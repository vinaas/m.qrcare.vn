import{c as Be,u as X,r as s,o as l,a as p,w as i,b as n,d as r,t as u,e as a,f as N,g as F,v as H,h as b,n as Z,i as w,j as V,F as x,k as L,l as ae,p as le,m as re,q as pe,s as Qe,x as me,y as Le,z as Fe,A as de,B as _e,C as fe,D as J,E as Oe,G as Ve,H as Me,I as He,J as ce,K as ge,L as ue,M as Ke,N as ve,O as ze,P as je,Q as Ye,R as Ge}from"./vendor.e5c09ed5.js";const We=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))h(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&h(f)}).observe(document,{childList:!0,subtree:!0});function d(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function h(o){if(o.ep)return;o.ep=!0;const c=d(o);fetch(o.href,c)}};We();const G=Be({state:{user:{},accessToken:"",userId:0,orgId:0,org:{},supporter:{},isAuthen:!1,isDemoCard:!1,qrUrl:""},getters:{isDemoCard({state:e}){return e.isDemoCard},userInfo({state:e}){return e.user},orgInfo({state:e}){return e.org},isAuthen({state:e}){return e.isAuthen},qrUrl({state:e}){return e.qrUrl},supporter({state:e}){return e.supporter},isLogged({state:e}){return e.user&&e.user.id&&e.user.id>0?e.isAuthen=!0:e.isAuthen=!1,e.isAuthen},isBoss({state:e}){return e.user.roleCode=="BOSS"},isSale({state:e}){return e.user.roleCode=="SALE"},isWorker({state:e}){return e.user.roleCode=="WORKER"}},actions:{logout({state:e}){e.user={},e.isAuthen=!1},login({state:e},t){e.user=t,e.userId=t.id,localStorage.setItem("user",JSON.stringify(t)),e.isAuthen=!0},ACCESS_TOKEN_SET({state:e},t){localStorage.setItem("access_token",t),axios.defaults.headers.Authorization=t,e.accessToken=t},ACCESS_TOKEN_CLEAR(e){localStorage.removeItem("access_token"),localStorage.removeItem("user"),e.accessToken="",axios.defaults.headers.Authorization=""},updateDemoCard({state:e},t){e.isDemoCard=t},scanQRCode({state:e},t){e.qrUrl=t}}});var q=(e,t)=>{for(const[d,h]of t)e[d]=h;return e};const Ze={props:{f7route:Object,f7router:Object},setup(){return{isAuthen:X("isAuthen"),login:()=>{G.dispatch("login")},logout:()=>{G.dispatch("logout")}}},methods:{changeStatus(){this.isAuthen?this.logout():this.login()},gotoHome(){window.location="https://qrcare.vn"}},async created(){}},Xe=a("h3",null,"C\u1EA3m \u01A1n c\xE1c b\u1EA1n \u0111\xE3 s\u1EED d\u1EE5ng gi\u1EA3i ph\xE1p QRCare",-1),Je=a("p",null,"\u0110\u1EC3 bi\u1EBFt th\xEAm chi ti\u1EBFt c\u0169ng nh\u01B0 li\xEAn h\u1EC7 v\u1EDBi ch\xFAng t\xF4i",-1),et=r("V\u1EC1 trang ch\u1EE7");function tt(e,t,d,h,o,c){const f=s("f7-nav-title"),C=s("f7-navbar"),v=s("f7-button"),m=s("f7-block"),E=s("f7-page");return l(),p(E,{name:"home"},{default:i(()=>[n(C,{sliding:!1},{default:i(()=>[n(f,{sliding:""},{default:i(()=>[r("QRCare Vi\u1EC7t Nam v"+u(d.f7router.app.version),1)]),_:1})]),_:1}),n(m,{strong:""},{default:i(()=>[Xe,Je,n(v,{onClick:t[0]||(t[0]=g=>c.gotoHome()),class:"fill large"},{default:i(()=>[et]),_:1})]),_:1})]),_:1})}var nt=q(Ze,[["render",tt]]);const it={props:["countImages","maxImages"],emits:["uploaded","toggleCamera"],data(){return{isCameraOpen:!1,isPhotoTaken:!1,isShotPhoto:!1,isLoading:!1,imageUrls:[],video:"",photoTaken:"",photoTakenCtx:"",width:0,height:0,log:"",dataUrl:""}},methods:{doLoad(){this.video=document.getElementById("camera-video"),this.photoTaken=document.getElementById("photoTaken"),this.photoTakenCtx=this.photoTaken.getContext("2d");let e=this;this.video.addEventListener("play",function(){e.width=e.video.videoWidth,e.height=e.video.videoHeight},!1)},computeFrame(){const e=this.video.videoWidth,t=this.video.videoHeight,d=t/4*3,h=(e-d)/2,o=0;this.photoTaken.width=d,this.photoTaken.height=t,this.log="Video:Crop:("+this.photoTaken.width+","+this.photoTaken.height+"("+e+","+t+")",this.photoTakenCtx.drawImage(this.video,h,o,d,t,0,0,d,t)},toggleCamera(){this.isCameraOpen?(this.isCameraOpen=!1,this.$emit("toggleCamera",this.isCameraOpen),this.isPhotoTaken=!1,this.isShotPhoto=!1,this.stopCameraStream()):(this.isCameraOpen=!0,this.$emit("toggleCamera",this.isCameraOpen),this.createCameraElement())},createCameraElement(){console.log("createCameraElement()",this.isCameraOpen);try{this.isLoading=!0,N.preloader.show();var e={video:{facingMode:"environment"}};navigator.mediaDevices.getUserMedia(e).then(t=>{this.isLoading=!1,N.preloader.hide(),this.$refs.camera.srcObject=t,this.doLoad()}).catch(t=>{this.isLoading=!1,N.preloader.hide(),alert("May the browser didn't support or there is some errors.")})}catch(t){console.log("createCameraElement()",t)}},stopCameraStream(){console.log("stopCameraStream()",this.isCameraOpen),this.$refs.camera.srcObject.getTracks().forEach(t=>{t.stop()})},async takePhoto(){if(console.log("takePhoto",this.countImages,this.maxImages),this.countImages>=this.maxImages){N.dialog.alert("B\u1EA1n \u0111\xE3 ch\u1EE5p t\u1EDBi gi\u1EDBi h\u1EA1n l\xE0 "+this.countImages+" t\u1EA5m!");return}this.isPhotoTaken||(this.isShotPhoto=!0,setTimeout(()=>{this.isShotPhoto=!1},50)),this.computeFrame(),this.isPhotoTaken=!this.isPhotoTaken,this.dataUrl=this.photoTaken.toDataURL(),await this.uploadImage()},async uploadImage(){const e=this.photoTaken.toDataURL("image/jpeg",.9);var t=this.dataURItoBlob(e);const d=new FormData;d.append("canvasImage",t);try{let h="https://media.vinaas.com/upload/qrcare-vn";const{data:o}=await this.$axios.post(h,d,{headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"}});if(o&&o.id){const c="https://apps.vinaas.com/file/"+o.id;this.imageUrls.push(c),this.$emit("uploaded",c)}}catch(h){console.log("err",h)}finally{}this.isPhotoTaken=!this.isPhotoTaken},dataURItoBlob(e){var t;e.split(",")[0].indexOf("base64")>=0?t=atob(e.split(",")[1]):t=unescape(e.split(",")[1]);for(var d=e.split(",")[0].split(":")[1].split(";")[0],h=new Uint8Array(t.length),o=0;o<t.length;o++)h[o]=t.charCodeAt(o);return new Blob([h],{type:d})}}},at={class:"web-camera-container"},ot=["width","height"],st=["src","width","height"],lt={id:"photoTaken"},rt=r(" Ch\u1EE5p h\xECnh"),dt=r("Close");function ct(e,t,d,h,o,c){const f=s("f7-icon"),C=s("f7-button"),v=s("f7-col"),m=s("f7-row"),E=s("f7-block");return l(),p(E,null,{default:i(()=>[a("div",at,[o.isCameraOpen?F((l(),b("div",{key:0,class:Z(["camera-box",{flash:o.isShotPhoto}])},[a("div",{class:Z(["camera-shutter",{flash:o.isShotPhoto}])},null,2),F(a("video",{id:"camera-video",ref:"camera",width:o.width/2,height:o.height/2,autoplay:"",muted:"",playsinline:""},null,8,ot),[[H,!o.isPhotoTaken]]),F(a("img",{src:o.dataUrl,id:"showPhotoTaken",width:o.height/8*3,height:o.height/2},null,8,st),[[H,o.isPhotoTaken]]),F(a("canvas",lt,null,512),[[H,!1]])],2)),[[H,!o.isLoading]]):w("",!0)]),o.isCameraOpen?(l(),p(m,{key:1},{default:i(()=>[n(v,{width:"30"},{default:i(()=>[o.isCameraOpen?(l(),p(C,{key:0,raised:"",round:"",large:"",color:"gray",onClick:c.toggleCamera},{default:i(()=>[dt]),_:1},8,["onClick"])):w("",!0)]),_:1}),n(v,{width:"10"}),n(v,{width:"60"},{default:i(()=>[o.isCameraOpen?(l(),p(C,{key:0,raised:"",outline:"",round:"",large:"",onClick:c.takePhoto},{default:i(()=>[n(f,{f7:"camera"})]),_:1},8,["onClick"])):w("",!0)]),_:1})]),_:1})):(l(),p(m,{key:0},{default:i(()=>[n(v,{width:"100"},{default:i(()=>[n(C,{raised:"",outline:"",round:"",large:"",onClick:c.toggleCamera},{default:i(()=>[n(f,{f7:"camera"}),rt]),_:1},8,["onClick"])]),_:1})]),_:1}))]),_:1})}var be=q(it,[["render",ct],["__scopeId","data-v-01ed4286"]]);const ut={},ht=a("p",null,"Sorry",-1),pt=a("p",null,"Requested content not found.",-1);function mt(e,t,d,h,o,c){const f=s("f7-navbar"),C=s("f7-block"),v=s("f7-page");return l(),p(v,null,{default:i(()=>[n(f,{title:"Not found","back-link":"Back"}),n(C,{strong:""},{default:i(()=>[ht,pt]),_:1})]),_:1})}var _t=q(ut,[["render",mt]]);const O={BASE_URL:"https://api.qrcare.net/api/"},ft=V({setup(){return{supporter:X("supporter")}},data(){return{status:"FREE"}},computed:{waitingTime(){if(this.status=="FREE")return 1;if(this.status=="WAITING")return 5}},methods:{updateSupplierStatus(){}},mounted(){this.updateSupplierStatus()}}),gt=r("Close"),vt={style:{height:"100%"},class:"display-flex justify-content-center align-items-center"},bt=r("G\u1ECDi l\u1EA1i theo s\u1ED1 (xxx022)"),Et=r("Nh\u1EADp s\u1ED1");function Ct(e,t,d,h,o,c){const f=s("f7-link"),C=s("f7-nav-right"),v=s("f7-navbar"),m=s("f7-list-item"),E=s("f7-list"),g=s("f7-page");return l(),p(g,null,{default:i(()=>[n(v,{title:"Simple QRCall"},{default:i(()=>[n(C,null,{default:i(()=>[n(f,{"popup-close":""},{default:i(()=>[gt]),_:1})]),_:1})]),_:1}),a("div",vt,[n(E,null,{default:i(()=>[n(m,null,{default:i(()=>[bt]),_:1}),n(m,null,{default:i(()=>[Et]),_:1}),n(m,null,{default:i(()=>[r("ch\xFAng t\xF4i s\u1EBD g\u1ECDi l\u1EA1i trong v\xF2ng "+u(e.waitingTime)+" ph\xFAt",1)]),_:1})]),_:1})])]),_:1})}var yt=q(ft,[["render",Ct]]);const kt=V({props:{orgId:Number,userId:Number},components:{SimpleCall:yt},computed:{item(){let e={id:111,name:"QRCare Vi\u1EC7t Nam",staffName:"Qu\xE2n",address:"11 \u0110\u1EB7ng Th\u1EBF Phong",phoneNumber:"+84xxxxxx4088"};return this.orgId>1e3,e}},mounted(){}}),wt={key:0,class:"one-step-qrcall"},Dt=r("G\u1ECDi l\u1EA1i cho t\xF4i"),At=a("div",{style:{height:"50px"}},null,-1),Tt=r("Close"),It={style:{height:"100%"},class:"display-flex justify-content-center align-items-center"},$t=r("Vui l\xF2ng \u0111\u1EC3 l\u1EA1i s\u1ED1 \u0111i\u1EC7n tho\u1EA1i");function Ut(e,t,d,h,o,c){const f=s("f7-card-header"),C=s("f7-button"),v=s("f7-card-content"),m=s("f7-card"),E=s("f7-link"),g=s("f7-nav-right"),y=s("f7-navbar"),k=s("f7-list-item"),A=s("f7-list"),_=s("f7-page"),U=s("f7-popup");return l(),b(x,null,[n(m,null,{default:i(()=>[n(f,null,{default:i(()=>[r("C\u1EA7n h\u1ED7 tr\u1EE3, "+u(e.item.name)+" s\u1EBD ph\u1EE5c v\u1EE5",1)]),_:1}),n(v,null,{default:i(()=>[(l(),b("div",wt,[n(C,{fill:"","popup-open":".demo-popup-swipe"},{default:i(()=>[Dt]),_:1})]))]),_:1})]),_:1}),At,n(U,{class:"demo-popup-swipe","swipe-to-close":""},{default:i(()=>[n(_,null,{default:i(()=>[n(y,{title:"QRCall: Ch\xFAng t\xF4i s\u1EBD g\u1ECDi l\u1EA1i"},{default:i(()=>[n(g,null,{default:i(()=>[n(E,{"popup-close":""},{default:i(()=>[Tt]),_:1})]),_:1})]),_:1}),a("div",It,[n(A,null,{default:i(()=>[n(k,null,{default:i(()=>[$t]),_:1}),n(k,null,{default:i(()=>[r("B\u1EA1n "+u(e.item.staffName)+" ("+u(e.item.phoneNumber)+") s\u1EBD g\u1ECDi l\u1EA1i trong v\xF2ng 1 ph\xFAt",1)]),_:1})]),_:1})])]),_:1})]),_:1})],64)}var Ee=q(kt,[["render",Ut]]);const Rt={components:{ImageUpload:be,Supporter:Ee},props:{f7route:Object,f7router:Object},setup(){const e=X("isAuthen"),t=X("userInfo");return{isAuthen:e,userInfo:t}},data(){return{activityImages:0,maxActivityImages:2,deviceImages:0,maxDeviceImages:4,isCameraOpen:!1,isCameraOpen2:!1,enablePopup:{editDevice:!1,editUser:!1,activeUsing:!1,sendRequest:!1,addNote:!1,submitTask:!1,confirmTask:!1,activity:!1},listSupplier:[],qrid:{},history:[],supporter:{},supplier:{},activity:{},view_activity:{},ACT_POPUP:{nar_bar_title:"G\u1EEDi y\xEAu c\u1EA7u"},isSellProduct:!0}},computed:{isEdit(){return this.isAuthen},isActive(){return this.qrid.status?this.qrid.status=="QRID_STATUS.ACTIVE":!0},hasData(){return this.qrid.title&&this.qrid.ownerName},listHistory(){return this.history}},methods:{formatDate(e){return this.$utils.formatDate(e)},formatDateTime(e){return this.$utils.formatDateTime(e)},formatMoney(e){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"VND"}).format(e)},clickLogin(){this.f7router.navigate("/login/")},clickLogout(){G.dispatch("logout")},clickEditDevice(){if(this.deviceImages=0,this.qrid.imageUrls.length>0){const e=this.maxDeviceImages-this.qrid.imageUrls.length;console.log("diff",e),e>0?this.deviceImages=this.qrid.imageUrls.length:this.deviceImages=this.maxDeviceImages}console.log("clickEditDevice()",this.deviceImages,this.qrid.imageUrls,this.qrid.imageUrls.length),this.enablePopup.editDevice=!0},getActivityName(e){let t="";return e.type==="ACTIVITY.QR_REQUEST"&&(t+="Y\xEAu c\u1EA7u",e.status=="CREATED"&&(t+=" \u0111\xE3 g\u1EEDi")),e.type==="ACTIVITY.QRTASK"&&(t+="C\xF4ng vi\u1EC7c",e.status=="CREATED"&&(t+=" \u0111\xE3 g\u1EEDi"),e.status=="CONFIRMED"&&(t="Kh\xE1ch h\xE0ng x\xE1c nh\u1EADn"),e.status=="REJECTED"&&(t="Kh\xE1ch h\xE0ng t\u1EEB ch\u1ED1i")),e.type==="ACTIVITY.QRNOTE"&&(t+="Ghi ch\xFA",e.status=="CREATED"&&(t+=" \u0111\xE3 g\u1EEDi")),e.type==="ACTIVITY.QRDelivery"&&(t+="B\xE0n giao",e.status=="CREATED"&&(t+=" \u0111\xE3 g\u1EEDi"),e.status=="CONFIRMED"&&(t+="Kh\xE1ch h\xE0ng x\xE1c nh\u1EADn"),e.status=="REJECTED"&&(t+="Kh\xE1ch h\xE0ng t\u1EEB ch\u1ED1i")),t},getActivityColor(e){if(e.type==="ACTIVITY.QR_REQUEST")return"item-title text-color-orange";if(e.type==="ACTIVITY.QRTASK"){if(e.status==="CONFIRMED")return"item-title text-color-green";if(e.status==="CREATED")return"item-title text-color-blue"}return e.type==="ACTIVITY.QRNOTE"?"item-title text-color-blue":"item-title text-color-black"},toggleCamera(e){console.log("toggleCamera()",e),this.isCameraOpen=e},toggleCamera2(e){console.log("toggleCamera2()",e),this.isCameraOpen2=e},async addImageDevices(e){this.qrid.imageUrls||(this.qrid.imageUrls=[]),this.qrid.imageUrls.push(e),this.deviceImages++},async addImageActivity(e){this.activity.imageUrls||(this.activity.imageUrls=[]),this.activity.imageUrls.push(e),this.activityImages++},cancelEditDevice(){this.stopCameraImageUpload(),this.enablePopup.editDevice=!1},stopCameraImageUpload(){this.isCameraOpen&&this.$refs.deviceImages.toggleCamera(),this.isCameraOpen2&&this.$refs.activityImages.toggleCamera()},async processEditDevice(){this.isActive||(this.qrid.status="QRID_STATUS.EDITED",this.qrid.modified=new Date,this.qrid.modifiedBy=this.userInfo.id,this.isSellProduct?(this.qrid.sellerId=this.supporter.id,this.qrid.sellerName=this.supporter.name,this.qrid.sellerAddress=this.supporter.address):this.qrid.sellerId==this.supporter.id&&(this.qrid.sellerId=0,this.qrid.sellerName="",this.qrid.sellerAddress=""),await this.$axios.patch("/QRIDs/"+this.qrid.id,this.qrid),console.log("editDevice()",this.qrid)),this.stopCameraImageUpload(),this.enablePopup.editDevice=!1},async editUser(){this.isActive||(this.qrid.status="QRID_STATUS.EDITED",this.qrid.modified=new Date,this.qrid.modifiedBy=this.userInfo.id),await this.$axios.patch("/QRIDs/"+this.qrid.id,this.qrid),console.log("editUser()",this.qrid),this.enablePopup.editUser=!1},clickActive(){this.enablePopup.activeUsing=!0},async activeUsing(){this.isActive||(this.qrid.status="QRID_STATUS.ACTIVE",this.qrid.modified=new Date,this.qrid.modifiedBy=this.userInfo.id,this.qrid.activatedDate=new Date),await this.$axios.patch("/QRIDs/"+this.qrid.id,this.qrid),console.log("activeUsing()",this.qrid),this.enablePopup.activeUsing=!1},clickSendRequest(e){e.type="ACTIVITY.QR_REQUEST",this.activity=e,this.ACT_POPUP={nar_bar_title:"Y\xEAu c\u1EA7u m\u1EDBi nh\u1EADn",content:"N\u1ED9i dung y\xEAu c\u1EA7u",sender:"Kh\xE1ch h\xE0ng g\u1EEDi",receiver:"B\xEAn ti\u1EBFp nh\u1EADn",action:"G\u1EEDi y\xEAu c\u1EA7u",action_footer:"Sau khi nh\u1EADn y\xEAu c\u1EA7u, ch\xFAng t\xF4i s\u1EBD g\u1ECDi l\u1EA1i cho qu\xFD kh\xE1ch."},console.log(this.activity),console.log(this.activityImages),this.activityImages=0,this.enablePopup.activity=!0},clickAddNote(e){e.type="ACTIVITY.QRNOTE",e.supplierOrganizationId=0,this.activity=e,this.ACT_POPUP={nar_bar_title:"N\u1ED9i dung ghi ch\xFA",content:"N\u1ED9i dung",sender:"Ng\u01B0\u1EDDi ghi ch\xFA",receiver:"",action:"L\u01B0u Ghi ch\xFA",action_footer:"Ghi ch\xFA n\xE0y ch\u1EC9 \u0111\u01B0\u1EE3c th\u1EA5y khi qu\xE9t Th\u1EBB"},console.log(this.activity),console.log(this.activityImages),this.activityImages=0,this.enablePopup.activity=!0},async clickViewActivity(e){if(this.view_activity=e,this.view_activity.supplierOrganizationId||(this.view_activity.supplierOrganizationId=111),this.view_activity.supplierOrganizationId==this.supporter.id)this.supplier=this.supporter;else{var t=await this.$axios.get("/Organizations/"+this.view_activity.supplierOrganizationId);t&&t.data&&(this.supplier=t.data)}this.view_activity.type=="ACTIVITY.QRTASK"&&(this.view_activity.status=="CREATED"&&(this.ACT_POPUP={nar_bar_title:"Ch\u1EDD x\xE1c nh\u1EADn",content:"N\u1ED9i dung \u0111\xE3 th\u1EF1c hi\u1EC7n",sender:"Kh\xE1ch h\xE0ng x\xE1c nh\u1EADn",receiver:"B\xEAn th\u1EF1c hi\u1EC7n",action:"X\xE1c nh\u1EADn",action_footer:"Sau khi x\xE1c nh\u1EADn, c\xF4ng vi\u1EC7c \u0111\xE3 k\u1EBFt th\xFAc."}),this.view_activity.status=="CONFIRMED"&&(this.ACT_POPUP={nar_bar_title:"C\xF4ng vi\u1EC7c \u0111\u01B0\u1EE3c x\xE1c nh\u1EADn",content:"N\u1ED9i dung \u0111\xE3 th\u1EF1c hi\u1EC7n",sender:"Kh\xE1ch h\xE0ng x\xE1c nh\u1EADn",receiver:"B\xEAn th\u1EF1c hi\u1EC7n",action:"X\xE1c nh\u1EADn",action_footer:"C\xF4ng vi\u1EC7c \u0111\xE3 k\u1EBFt th\xFAc, c\u1EA3m \u01A1n qu\xFD kh\xE1ch \u0111\xE3 l\u1EF1a ch\u1ECDn!"}),this.view_activity.status=="REJECTED"&&(this.ACT_POPUP={nar_bar_title:"C\xF4ng vi\u1EC7c b\u1ECB t\u1EEB ch\u1ED1i",content:"N\u1ED9i dung \u0111\xE3 th\u1EF1c hi\u1EC7n",sender:"Kh\xE1ch h\xE0ng t\u1EEB ch\u1ED1i",receiver:"B\xEAn th\u1EF1c hi\u1EC7n",action:"T\u1EEB ch\u1ED1i",action_footer:""})),this.view_activity.type=="ACTIVITY.QR_REQUEST"&&(this.ACT_POPUP={nar_bar_title:"Y\xEAu c\u1EA7u \u0111\xE3 g\u1EEDi",content:"N\u1ED9i dung y\xEAu c\u1EA7u",sender:"Kh\xE1ch h\xE0ng g\u1EEDi",receiver:"B\xEAn ti\u1EBFp nh\u1EADn",action_footer:"Ch\xFAng t\xF4i \u0111\xE3 ti\u1EBFp nh\u1EADn, s\u1EBD g\u1ECDi l\u1EA1i cho qu\xFD kh\xE1ch."}),this.view_activity.type=="ACTIVITY.QRNOTE"&&(this.ACT_POPUP={nar_bar_title:"Ghi ch\xFA \u0111\xE3 l\u01B0u",content:"N\u1ED9i dung",sender:"Ng\u01B0\u1EDDi ghi ch\xFA",receiver:"",action_footer:"Ch\xFAng t\xF4i \u0111\xE3 ti\u1EBFp nh\u1EADn, s\u1EBD g\u1ECDi l\u1EA1i cho qu\xFD kh\xE1ch."}),console.log("clickViewActivity()",this.view_activity),this.enablePopup.view_activity=!0},async confirmQRTask(){let e={id:this.view_activity.id,qrid:this.activity.qrid,userComment:this.view_activity.userComment,status:"CONFIRMED",modified:new Date};await this.patchActivity(e)},async rejectQRTask(){let e={id:this.view_activity.id,userComment:this.view_activity.userComment,status:"REJECTED",modified:new Date};await this.patchActivity(e)},clickNewActivity(e){const t=this.supporter;let d={qrid:this.qrid.id,title:"",description:"",imageUrls:[],customerName:this.qrid.ownerName,customerPhoneNumber:this.qrid.ownerPhoneNumber,customerAddress:this.qrid.ownerAddress,supplierOrganizationId:t.id,status:"CREATED",created:new Date};this.supplier=t,console.log("clickNewActivity()",d,this.supplier),e=="SEND_REQUEST"&&this.clickSendRequest(d),e=="ADD_NOTE"&&this.clickAddNote(d),e=="SUBMIT_TASK"&&this.clickSubmitTask(d)},clickSubmitTask(e){e.type="ACTIVITY.QRTASK",e.supplierStaffId=this.userInfo.id,this.activity=e,this.ACT_POPUP={nar_bar_title:"C\xF4ng vi\u1EC7c \u0111\xE3 th\u1EF1c hi\u1EC7n",content:"Chi ti\u1EBFt c\xF4ng vi\u1EC7c",sender:"Kh\xE1ch h\xE0ng x\xE1c nh\u1EADn",receiver:"",action:"G\u1EEDi k\u1EBFt qu\u1EA3",action_footer:"Sau khi nh\u1EADn y\xEAu c\u1EA7u, ch\xFAng t\xF4i s\u1EBD g\u1ECDi l\u1EA1i cho qu\xFD kh\xE1ch."},console.log(this.activity),console.log(this.activityImages),this.activityImages=0,this.enablePopup.activity=!0},async closeNewActivity(){this.stopCameraImageUpload(),this.enablePopup.activity=!1},async postActivity(){let e=await this.$axios.post("/QRActivities",this.activity);if(console.log("rs",e),e.data){let t=parseInt(e.data.id),d=await this.$axios.post("/QRActivities/notify",{activityId:t});console.log("notify",d)}this.history.unshift(e.data),this.stopCameraImageUpload(),this.enablePopup.activity=!1},async patchActivity(e){let t=await this.$axios.patch("/QRActivities/"+e.id,e);if(console.log("rs",t.data),t.data){let h=parseInt(t.data.id);await this.$axios.post("/QRActivities/notify",{activityId:h})}if(t.data){for(var d in this.history)if(this.history[d].id==t.data.id){this.history[d]=t.data;break}}return this.enablePopup.view_activity=!1,t.data},changeDesc(e,t){for(var d in projects)if(projects[d].value==e){projects[d].desc=t;break}},async getDeviceData(){try{var e=this.f7route.params.id,t=this.f7route.params.privateCode;this.$axios.defaults.baseURL=O.BASE_URL;var d=await this.$axios.get("QRIDs/getLifecycle",{params:{qrid:e,privateCode:t}}),h=d.data;console.log(h),h&&h.id&&(this.qrid=h,this.supporter=this.qrid.supporter,this.supporter&&this.supporter.id=="888"?G.dispatch("updateDemoCard",!0):G.dispatch("updateDemoCard",!1),this.history=this.qrid.history)}catch(o){console.log("error",o)}}},async created(){await Promise.all([this.getDeviceData()])}},St=r("\u0110\u0103ng nh\u1EADp"),xt=r("\u0110\u0103ng xu\u1EA5t"),Nt=r("\u0110\u01A1n v\u1ECB ph\xE1t h\xE0nh Th\u1EBB"),qt={key:0},Pt=r("\u0110\xE3 \u0111\u0103ng nh\u1EADp b\u1EDFi"),Bt=r("V\xF2ng \u0111\u1EDDi thi\u1EBFt b\u1ECB"),Qt={key:0},Lt=r(" Th\xF4ng tin thi\u1EBFt b\u1ECB "),Ft=r("Edit"),Ot={class:"list media-list no-hairlines-between"},Vt={class:"item-content"},Mt={class:"item-inner"},Ht={class:"item-title"},Kt={class:"item-content"},zt={class:"item-inner"},jt=["innerHTML"],Yt=["src"],Gt={key:0},Wt={class:"item-content"},Zt={class:"item-inner"},Xt={class:"item-title"},Jt={class:"item-checkbox item-content"},en={class:"item-inner"},tn=a("div",{class:"item-title-row"},[a("div",{class:"item-title"},"S\u1EA3n ph\u1EA9m c\u1EE7a")],-1),nn={class:"item-subtitle"},an={class:"item-text"},on=a("p",null,"Ch\u01B0a c\xF3 th\xF4ng tin",-1),sn=r(" Kh\xE1ch h\xE0ng s\u1EED d\u1EE5ng "),ln=r("Edit"),rn={class:"list media-list no-hairlines-between"},dn={class:"item-content"},cn=a("div",{class:"item-media"},[a("i",{class:"f7-icons"},"person_fill")],-1),un={class:"item-inner"},hn={class:"item-title"},pn={key:0},mn={class:"item-content"},_n=a("div",{class:"item-media"},[a("i",{class:"f7-icons"},"device_phone_portrait")],-1),fn={class:"item-inner"},gn={class:"item-subtitle"},vn={class:"item-content"},bn=a("div",{class:"item-media"},[a("i",{class:"f7-icons"},"house")],-1),En={class:"item-inner"},Cn={class:"item-subtitle"},yn=a("p",null,"Ch\u01B0a c\xF3 th\xF4ng tin",-1),kn=r("L\u1ECBch s\u1EED ho\u1EA1t \u0111\u1ED9ng"),wn={class:"list media-list medium-inset"},Dn=["onClick"],An={class:"item-media"},Tn=["src"],In={class:"item-inner"},$n={class:"item-header"},Un={class:"item-title-row"},Rn=a("div",{class:"item-after"},null,-1),Sn={class:"item-subtitle"},xn={class:"item-text"},Nn={class:"item-footer text-color-red",style:{"font-size":"14px","font-weight":"600"}},qn=["src"],Pn=a("i",{class:"f7-icons"},"xmark_circle",-1),Bn=r("Cancel"),Qn=a("i",{class:"f7-icons"},"cloud_upload",-1),Ln=r("L\u01B0u"),Fn=r("Ng\u01B0\u1EDDi s\u1EDF h\u1EEFu (mua) thi\u1EBFt b\u1ECB"),On=a("i",{class:"f7-icons"},"xmark_circle",-1),Vn=r("Cancel"),Mn=r("C\u1EADp nh\u1EADt"),Hn=r("X\xE1c nh\u1EADn th\xF4ng tin"),Kn=r("sau khi k\xEDch ho\u1EA1t, kh\xF4ng th\u1EC3 thay \u0111\u1ED5i th\xF4ng tin c\u1EE7a Th\u1EBB. B\u1EA1n c\xF3 d\xE1m ch\u1EAFc"),zn=a("i",{class:"f7-icons"},"xmark_circle",-1),jn=r("Hu\u1EF7"),Yn=a("i",{class:"f7-icons"},"checkmark_circle",-1),Gn=r(" X\xE1c nh\u1EADn"),Wn=["src"],Zn=a("i",{class:"f7-icons"},"xmark_circle",-1),Xn=r("Hu\u1EF7"),Jn=a("i",{class:"f7-icons"},"checkmark_circle",-1),ei=["src"],ti=r("Nh\u1EADn x\xE9t t\u1EEB kh\xE1ch h\xE0ng"),ni=r("ch\u01B0a c\xF3"),ii=r("Nh\u1EADn x\xE9t t\u1EEB kh\xE1ch h\xE0ng"),ai=r("T\u1EEB ch\u1ED1i"),oi=a("i",{class:"f7-icons"},"checkmark_circle",-1),si=r("X\xE1c nh\u1EADn"),li=a("i",{class:"f7-icons"},"xmark_circle",-1),ri=r(" \u0110\xF3ng");function di(e,t,d,h,o,c){const f=s("f7-navbar"),C=s("f7-link"),v=s("f7-list"),m=s("f7-block"),E=s("f7-block-title"),g=s("f7-card-header"),y=s("f7-card-content"),k=s("f7-card"),A=s("f7-page"),_=s("f7-view"),U=s("f7-panel"),B=s("f7-nav-right"),T=s("f7-nav-title"),D=s("f7-button"),P=s("f7-swiper-slide"),Q=s("f7-swiper"),R=s("f7-icon"),Y=s("f7-fab"),z=s("f7-list-input"),K=s("image-upload"),j=s("f7-col"),$=s("f7-row"),M=s("f7-list-item"),ne=s("f7-popup"),Pe=s("f7-card-footer"),he=s("f7-block-footer");return l(),p(A,null,{default:i(()=>[n(U,{left:"",cover:"","theme-dark":""},{default:i(()=>[n(_,null,{default:i(()=>[n(A,null,{default:i(()=>[n(f,{title:d.f7router.app.name+" v"+d.f7router.app.version},null,8,["title"]),n(m,null,{default:i(()=>[n(v,null,{default:i(()=>[c.isEdit?w("",!0):(l(),p(C,{key:0,onClick:t[0]||(t[0]=I=>c.clickLogin()),"data-view":".view-main",class:"item-content item-link panel-close"},{default:i(()=>[St]),_:1})),c.isEdit?(l(),p(C,{key:1,onClick:t[1]||(t[1]=I=>c.clickLogout()),"data-view":".view-main",class:"item-content item-link panel-close"},{default:i(()=>[xt]),_:1})):w("",!0)]),_:1})]),_:1}),n(E,null,{default:i(()=>[Nt]),_:1}),n(k,null,{default:i(()=>[n(g,null,{default:i(()=>[r(u(o.supporter.name),1)]),_:1}),n(y,null,{default:i(()=>[a("p",null,u(o.supporter.address),1),a("p",null,"Ng\xE0y ph\xE1t h\xE0nh "+u(c.formatDate(o.qrid.created)),1),c.isActive?(l(),b("p",qt," Ng\xE0y k\xEDch ho\u1EA1t "+u(c.formatDate(o.qrid.activatedDate)),1)):w("",!0)]),_:1})]),_:1}),h.userInfo.id?(l(),p(k,{key:0},{default:i(()=>[n(g,null,{default:i(()=>[Pt]),_:1}),n(y,null,{default:i(()=>[r(u(h.userInfo.username)+", vai tr\xF2: "+u(h.userInfo.roleCode)+", id: "+u(h.userInfo.id),1)]),_:1})]),_:1})):w("",!0)]),_:1})]),_:1})]),_:1}),n(f,{sliding:!1},{default:i(()=>[n(B,null,{default:i(()=>[n(C,{"icon-ios":"f7:menu","icon-aurora":"f7:menu","icon-md":"material:menu","panel-open":"left"})]),_:1}),n(T,{sliding:""},{default:i(()=>[Bt]),_:1})]),_:1}),n(k,{"bg-color":c.isActive?"blue":"red"},{default:i(()=>[n(g,null,{default:i(()=>[r("ID: "+u(d.f7route.params.id),1),c.isActive?w("",!0):(l(),b("span",Qt,"ch\u01B0a k\xEDch ho\u1EA1t"))]),_:1})]),_:1},8,["bg-color"]),n(k,null,{default:i(()=>[n(g,{"bg-color":"green"},{default:i(()=>[Lt,!c.isActive&&c.isEdit?(l(),p(D,{key:0,onClick:c.clickEditDevice},{default:i(()=>[Ft]),_:1},8,["onClick"])):w("",!0)]),_:1}),o.qrid.title?(l(),p(y,{key:0},{default:i(()=>[a("div",Ot,[a("ul",null,[a("li",null,[a("div",Vt,[a("div",Mt,[a("div",Ht,u(o.qrid.title),1)])])]),a("li",null,[a("div",Kt,[a("div",zt,[a("div",{class:"item-text",innerHTML:o.qrid.description},null,8,jt)])])]),a("li",null,[n(Q,{speed:500,slidesPerView:2,spaceBetween:10},{default:i(()=>[(l(!0),b(x,null,L(o.qrid.imageUrls,I=>(l(),p(P,{key:I},{default:i(()=>[a("img",{class:"small",src:I},null,8,Yt)]),_:2},1024))),128))]),_:1})]),c.isActive?(l(),b("li",Gt,[a("div",Wt,[a("div",Zt,[a("div",Xt," Ng\xE0y k\xEDch ho\u1EA1t: "+u(c.formatDate(o.qrid.activatedDate)),1)])])])):w("",!0),a("li",null,[a("label",Jt,[a("div",en,[tn,a("div",nn,u(o.qrid.sellerName),1),a("div",an,u(o.qrid.sellerAddress),1)])])])])])]),_:1})):(l(),p(y,{key:1},{default:i(()=>[on]),_:1}))]),_:1}),n(k,null,{default:i(()=>[n(g,{"bg-color":"green"},{default:i(()=>[sn,!c.isActive&&c.isEdit?(l(),p(D,{key:0,"popup-open":"#edit-user"},{default:i(()=>[ln]),_:1})):w("",!0)]),_:1}),o.qrid.ownerName?(l(),p(y,{key:0},{default:i(()=>[a("div",rn,[a("ul",null,[a("li",null,[a("div",dn,[cn,a("div",un,[a("div",hn,u(o.qrid.ownerName),1)])])]),o.qrid.ownerPhoneNumber?(l(),b("li",pn,[a("div",mn,[_n,a("div",fn,[a("div",gn,u(o.qrid.ownerPhoneNumber),1)])])])):w("",!0),a("li",null,[a("div",vn,[bn,a("div",En,[a("div",Cn,u(o.qrid.ownerAddress),1)])])])])])]),_:1})):(l(),p(y,{key:1},{default:i(()=>[yn]),_:1}))]),_:1}),c.isActive?(l(),p(E,{key:0},{default:i(()=>[kn]),_:1})):w("",!0),a("div",wn,[a("ul",null,[(l(!0),b(x,null,L(o.history,I=>(l(),b("li",{key:I.id},[a("a",{onClick:Fm=>c.clickViewActivity(I),class:"item-link item-content chevron-center"},[a("div",An,[a("img",{style:{border:"1px solid #ccc"},src:I.imageUrls&&I.imageUrls[0]?I.imageUrls[0]:"https://apps.vinaas.com/file/sBsN149Dh",width:"80"},null,8,Tn)]),a("div",In,[a("div",$n,u(c.formatDateTime(I.modified)),1),a("div",Un,[a("div",{class:Z(c.getActivityColor(I)),style:{"font-size":"16px"}},u(c.getActivityName(I)),3),Rn]),a("div",Sn,u(I.title),1),a("div",xn,u(I.description),1),a("div",Nn,u(I.money>0?c.formatMoney(I.money):" "),1)])],8,Dn)]))),128))])]),!c.isActive&&!c.isEdit?(l(),p(Y,{key:1,position:"center-bottom",text:"\u0110\u0103ng nh\u1EADp",color:"red",onClick:t[2]||(t[2]=I=>c.clickLogin())},{default:i(()=>[n(R,{ios:"f7:lock_open",aurora:"f7:lock_open",md:"material:lock_open"})]),_:1})):w("",!0),!c.isActive&&c.isEdit&&c.hasData?(l(),p(Y,{key:2,position:"center-bottom",text:"K\xEDch ho\u1EA1t",color:"red",onClick:t[3]||(t[3]=I=>c.clickActive())},{default:i(()=>[n(R,{ios:"f7:house",aurora:"f7:house",md:"material:house"})]),_:1})):w("",!0),c.isActive&&c.isEdit?(l(),p(Y,{key:3,position:"center-bottom",text:"C\xF4ng vi\u1EC7c",color:"blue",onClick:t[4]||(t[4]=I=>c.clickNewActivity("SUBMIT_TASK"))},{default:i(()=>[n(R,{f7:"bell_fill"})]),_:1})):w("",!0),c.isActive&&!c.isEdit?(l(),p(Y,{key:4,position:"left-bottom",text:"Ghi ch\xFA",color:"green",onClick:t[5]||(t[5]=I=>c.clickNewActivity("ADD_NOTE"))},{default:i(()=>[n(R,{f7:"pencil_ellipsis_rectangle"})]),_:1})):w("",!0),c.isActive&&!c.isEdit?(l(),p(Y,{key:5,position:"right-bottom",text:"Y\xEAu c\u1EA7u",color:"blue",onClick:t[6]||(t[6]=I=>c.clickNewActivity("SEND_REQUEST"))},{default:i(()=>[n(R,{f7:"paperplane_fill"})]),_:1})):w("",!0),n(ne,{id:"edit-device",opened:o.enablePopup.editDevice,"onUpdate:opened":t[10]||(t[10]=I=>o.enablePopup.editDevice=I)},{default:i(()=>[n(A,null,{default:i(()=>[n(f,{title:"C\u1EADp nh\u1EADt thi\u1EBFt b\u1ECB"}),n(m,null,{default:i(()=>[n(v,null,{default:i(()=>[n(z,{type:"text",placeholder:"nh\u1EADp ng\u1EAFn g\u1ECDn",outline:"",label:"T\xEAn thi\u1EBFt b\u1ECB","floating-label":"",maxlength:"25","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng",required:"","clear-button":"",value:o.qrid.title,"onUpdate:value":t[7]||(t[7]=I=>o.qrid.title=I)},null,8,["value"])]),_:1})]),_:1}),n(m,null,{default:i(()=>[n(K,{ref:"deviceImages",countImages:o.deviceImages,maxImages:o.maxDeviceImages,onToggleCamera:c.toggleCamera,onUploaded:c.addImageDevices},null,8,["countImages","maxImages","onToggleCamera","onUploaded"]),n($,{"no-gap":""},{default:i(()=>[(l(!0),b(x,null,L(o.qrid.imageUrls,I=>(l(),p(j,{width:"50",key:I},{default:i(()=>[a("img",{width:"100",src:I},null,8,qn)]),_:2},1024))),128))]),_:1}),n(v,null,{default:i(()=>[n(z,{outline:"",label:"M\xF4 t\u1EA3","floating-label":"",type:"textarea",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:o.qrid.description,"onUpdate:value":t[8]||(t[8]=I=>o.qrid.description=I)},null,8,["value"])]),_:1}),n(v,{"media-list":""},{default:i(()=>[n(M,{checkbox:"",checked:"","onUpdate:checked":t[9]||(t[9]=I=>o.isSellProduct=I),title:"S\u1EA3n ph\u1EA9m c\u1EE7a",after:"",subtitle:o.supporter.name,text:o.supporter.address},null,8,["checked","subtitle","text"])]),_:1})]),_:1}),n($,null,{default:i(()=>[n(j,{width:"40"},{default:i(()=>[n(D,{round:"",large:"",color:"gray",onClick:c.cancelEditDevice},{default:i(()=>[Pn,Bn]),_:1},8,["onClick"])]),_:1}),n(j,{width:"60"},{default:i(()=>[n(D,{fill:"",round:"",large:"",onClick:c.processEditDevice},{default:i(()=>[Qn,Ln]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["opened"]),n(ne,{id:"edit-user",opened:o.enablePopup.editUser,"onUpdate:opened":t[14]||(t[14]=I=>o.enablePopup.editUser=I)},{default:i(()=>[n(A,null,{default:i(()=>[n(f,{title:"Th\xF4ng tin ng\u01B0\u1EDDi s\u1EED d\u1EE5ng"}),n(m,null,{default:i(()=>[n(E,null,{default:i(()=>[Fn]),_:1}),n(v,{"no-hairlines-md":""},{default:i(()=>[n(z,{type:"text",outline:"",label:"T\xEAn g\u1ECDi","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"20","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:o.qrid.ownerName,"onUpdate:value":t[11]||(t[11]=I=>o.qrid.ownerName=I)},null,8,["value"]),n(z,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp \u0111\u1EC3 ti\u1EC7n li\xEAn h\u1EC7","error-message":"h\xE3y nh\u1EADp \u0111\u1EE7 10 s\u1ED1!",minlength:"10",maxlength:"11",validate:"",pattern:"[0-9]*","clear-button":"",value:o.qrid.ownerPhoneNumber,"onUpdate:value":t[12]||(t[12]=I=>o.qrid.ownerPhoneNumber=I)},null,8,["value"]),n(z,{outline:"",type:"textarea",label:"\u0110\u1ECBa ch\u1EC9","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:o.qrid.ownerAddress,"onUpdate:value":t[13]||(t[13]=I=>o.qrid.ownerAddress=I)},null,8,["value"])]),_:1})]),_:1}),n($,null,{default:i(()=>[n(j,{width:"40"},{default:i(()=>[n(D,{round:"",large:"",color:"gray","popup-close":""},{default:i(()=>[On,Vn]),_:1})]),_:1}),n(j,{width:"60"},{default:i(()=>[n(D,{fill:"",round:"",large:"",onClick:c.editUser},{default:i(()=>[Mn]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["opened"]),n(ne,{id:"active-using",opened:o.enablePopup.activeUsing,"onUpdate:opened":t[15]||(t[15]=I=>o.enablePopup.activeUsing=I)},{default:i(()=>[n(A,null,{default:i(()=>[n(f,{title:"C\u1EA3nh b\xE1o"}),n(k,{strong:""},{default:i(()=>[n(g,null,{default:i(()=>[Hn]),_:1}),n(y,null,{default:i(()=>[Kn]),_:1}),n(Pe,null,{default:i(()=>[n(j,null,{default:i(()=>[n(D,{"popup-close":""},{default:i(()=>[zn,jn]),_:1})]),_:1}),n(j,null,{default:i(()=>[n(D,{fill:"",onClick:c.activeUsing},{default:i(()=>[Yn,Gn]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["opened"]),n(ne,{id:"new-activity",opened:o.enablePopup.activity,"onUpdate:opened":t[22]||(t[22]=I=>o.enablePopup.activity=I)},{default:i(()=>[n(A,null,{default:i(()=>[n(f,{title:o.ACT_POPUP.nar_bar_title},null,8,["title"]),n(k,null,{default:i(()=>[n(g,{"bg-color":"green"},{default:i(()=>[r(u(o.ACT_POPUP.content),1)]),_:1}),n(y,null,{default:i(()=>[n(v,null,{default:i(()=>[n(z,{type:"text",placeholder:"nh\u1EADp ng\u1EAFn g\u1ECDn",outline:"",label:"Ti\xEAu \u0111\u1EC1","floating-label":"",maxlength:"25","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng",required:"","clear-button":"",value:o.activity.title,"onUpdate:value":t[16]||(t[16]=I=>o.activity.title=I)},null,8,["value"]),n(z,{outline:"",label:"M\xF4 t\u1EA3","floating-label":"",type:"textarea",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:o.activity.description,"onUpdate:value":t[17]||(t[17]=I=>o.activity.description=I)},null,8,["value"]),o.activity.type=="ACTIVITY.QRTASK"?(l(),p(z,{key:0,outline:"",type:"number",label:"Ti\u1EC1n \u0111\xE3 thu","floating-label":"",placeholder:"","clear-button":"",value:o.activity.money,"onUpdate:value":t[18]||(t[18]=I=>o.activity.money=I)},null,8,["value"])):w("",!0),o.activity.type=="ACTIVITY.QRTASK"?(l(),p(M,{key:1},{default:i(()=>[r("V\xE0o l\xFAc : "+u(c.formatDateTime(o.activity.created)),1)]),_:1})):w("",!0)]),_:1})]),_:1})]),_:1}),n(m,null,{default:i(()=>[n(K,{ref:"activityImages",countImages:o.activityImages,maxImages:o.maxActivityImages,onToggleCamera:c.toggleCamera2,onUploaded:c.addImageActivity},null,8,["countImages","maxImages","onToggleCamera","onUploaded"]),n($,{"no-gap":""},{default:i(()=>[(l(!0),b(x,null,L(o.activity.imageUrls,I=>(l(),p(j,{width:"50",key:I},{default:i(()=>[a("img",{width:"100",src:I},null,8,Wn)]),_:2},1024))),128))]),_:1})]),_:1}),n(k,null,{default:i(()=>[n(g,{"bg-color":"green"},{default:i(()=>[r(u(o.ACT_POPUP.sender),1)]),_:1}),n(y,null,{default:i(()=>[n(v,{"no-hairlines-md":""},{default:i(()=>[n(z,{type:"text",outline:"",label:"T\xEAn g\u1ECDi","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"20","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:o.activity.customerName,"onUpdate:value":t[19]||(t[19]=I=>o.activity.customerName=I)},null,8,["value"]),o.activity.type=="ACTIVITY.QR_REQUEST"?(l(),p(z,{key:0,outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i \u0111\u1EC3 li\xEAn h\u1EC7","floating-label":"",type:"text",placeholder:"nh\u1EADp \u0111\u1EC3 ti\u1EC7n li\xEAn h\u1EC7","error-message":"h\xE3y nh\u1EADp \u0111\u1EE7 10 s\u1ED1!",minlength:"10",maxlength:"11",validate:"",pattern:"[0-9]*","clear-button":"",value:o.activity.customerPhoneNumber,"onUpdate:value":t[20]||(t[20]=I=>o.activity.customerPhoneNumber=I)},null,8,["value"])):w("",!0),n(z,{outline:"",type:"textarea",label:"\u0110\u1ECBa ch\u1EC9","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:o.activity.customerAddress,"onUpdate:value":t[21]||(t[21]=I=>o.activity.customerAddress=I)},null,8,["value"])]),_:1})]),_:1})]),_:1}),o.activity.type=="ACTIVITY.QR_REQUEST"?(l(),p(k,{key:0},{default:i(()=>[n(g,{"bg-color":"blue"},{default:i(()=>[r(u(o.ACT_POPUP.receiver),1)]),_:1}),n(y,null,{default:i(()=>[n(g,null,{default:i(()=>[r(u(o.supplier.name),1)]),_:1}),n(y,null,{default:i(()=>[r(u(o.supplier.address),1)]),_:1})]),_:1})]),_:1})):w("",!0),n(m,null,{default:i(()=>[n($,null,{default:i(()=>[n(j,{width:"30"},{default:i(()=>[n(D,{raised:"",round:"",large:"",color:"gray",onClick:c.closeNewActivity},{default:i(()=>[Zn,Xn]),_:1},8,["onClick"])]),_:1}),n(j,{width:"60"},{default:i(()=>[n(D,{raised:"",round:"",fill:"",large:"",onClick:c.postActivity},{default:i(()=>[Jn,r(u(o.ACT_POPUP.action),1)]),_:1},8,["onClick"])]),_:1})]),_:1}),n(he,null,{default:i(()=>[r(u(o.ACT_POPUP.action_footer),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["opened"]),n(ne,{id:"view-activity",opened:o.enablePopup.view_activity,"onUpdate:opened":t[26]||(t[26]=I=>o.enablePopup.view_activity=I)},{default:i(()=>[n(A,null,{default:i(()=>[n(f,{title:o.ACT_POPUP.nar_bar_title},null,8,["title"]),n(k,null,{default:i(()=>[n(g,{"bg-color":"green"},{default:i(()=>[r(u(o.ACT_POPUP.content),1)]),_:1}),n(y,null,{default:i(()=>[n(v,{"no-hairlines-md":""},{default:i(()=>[n(M,null,{default:i(()=>[r(u(o.view_activity.title),1)]),_:1}),n(M,null,{default:i(()=>[r(u(o.view_activity.description),1)]),_:1}),o.view_activity.type=="ACTIVITY.QRTASK"?(l(),p(M,{key:0},{default:i(()=>[r("\u0110\xE3 thu: "+u(c.formatMoney(o.view_activity.money)),1)]),_:1})):w("",!0),o.view_activity.type=="ACTIVITY.QRTASK"?(l(),p(M,{key:1},{default:i(()=>[r("Th\u1EF1c hi\u1EC7n l\xFAc: "+u(c.formatDateTime(o.view_activity.created)),1)]),_:1})):(l(),p(M,{key:2},{default:i(()=>[r("G\u1EEDi l\xFAc: "+u(c.formatDateTime(o.view_activity.created)),1)]),_:1})),n(m,null,{default:i(()=>[n($,{"no-gap":""},{default:i(()=>[(l(!0),b(x,null,L(o.view_activity.imageUrls,I=>(l(),p(j,{width:"50",key:I},{default:i(()=>[a("img",{width:"100",src:I},null,8,ei)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n(k,null,{default:i(()=>[n(g,{"bg-color":"green"},{default:i(()=>[r(u(o.ACT_POPUP.sender),1)]),_:1}),n(y,null,{default:i(()=>[n(v,{"no-hairlines-md":""},{default:i(()=>[n(M,null,{default:i(()=>[r(u(o.view_activity.customerName),1)]),_:1}),n(M,null,{default:i(()=>[r(u(o.view_activity.customerPhoneNumber),1)]),_:1}),n(M,null,{default:i(()=>[r(u(o.view_activity.customerAddress),1)]),_:1}),o.view_activity.type=="ACTIVITY.QRTASK"&&o.view_activity.status=="CONFIRMED"?(l(),p(M,{key:0},{default:i(()=>[r("X\xE1c nh\u1EADn l\xFAc "+u(c.formatDateTime(o.view_activity.modified)),1)]),_:1})):w("",!0),o.view_activity.type=="ACTIVITY.QRTASK"&&o.view_activity.status=="REJECTED"?(l(),p(M,{key:1},{default:i(()=>[r("T\u1EEB ch\u1ED1i l\xFAc "+u(c.formatDateTime(o.view_activity.modified)),1)]),_:1})):w("",!0)]),_:1})]),_:1})]),_:1}),o.view_activity.type=="ACTIVITY.QRTASK"&&(o.view_activity.status=="CONFIRMED"||o.view_activity.status=="REJECTED")?(l(),p(k,{key:0},{default:i(()=>[n(g,{"bg-color":"green"},{default:i(()=>[ti]),_:1}),n(y,null,{default:i(()=>[o.view_activity.userComment?(l(),p(v,{key:0},{default:i(()=>[n(M,null,{default:i(()=>[r(u(o.view_activity.userComment),1)]),_:1})]),_:1})):(l(),p(v,{key:1},{default:i(()=>[n(M,null,{default:i(()=>[ni]),_:1})]),_:1}))]),_:1})]),_:1})):w("",!0),o.view_activity.type=="ACTIVITY.QR_REQUEST"||o.view_activity.type=="ACTIVITY.QRTASK"?(l(),p(k,{key:1},{default:i(()=>[n(g,{"bg-color":"blue"},{default:i(()=>[r(u(o.ACT_POPUP.receiver)+" ",1),n(R,{f7:o.supplier.status=="ACTIVE"?"star_circle":"star_slash"},null,8,["f7"])]),_:1}),n(y,null,{default:i(()=>[n(v,null,{default:i(()=>[n(M,null,{default:i(()=>[r(u(o.supplier.name),1)]),_:1}),n(M,null,{default:i(()=>[r(u(o.supplier.address),1)]),_:1})]),_:1})]),_:1})]),_:1})):w("",!0),o.view_activity.type=="ACTIVITY.QRTASK"&&o.view_activity.status=="CREATED"?(l(),p(k,{key:2},{default:i(()=>[n(g,{"bg-color":"green"},{default:i(()=>[ii]),_:1}),n(y,null,{default:i(()=>[n(v,null,{default:i(()=>[n(z,{type:"textarea",outline:"",label:"Nh\u1EADn x\xE9t","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","error-message":"b\u1EA1n \u0111\xE3 nh\u1EADp qu\xE1 d\xE0i!","clear-button":"",value:o.view_activity.userComment,"onUpdate:value":t[23]||(t[23]=I=>o.view_activity.userComment=I)},null,8,["value"])]),_:1})]),_:1})]),_:1})):w("",!0),n(m,null,{default:i(()=>[o.view_activity.type=="ACTIVITY.QRTASK"&&o.view_activity.status=="CREATED"?(l(),p($,{key:0},{default:i(()=>[n(j,{width:"40"},{default:i(()=>[n(D,{raised:"",round:"",large:"",color:"gray",onClick:t[24]||(t[24]=I=>c.rejectQRTask())},{default:i(()=>[ai]),_:1})]),_:1}),n(j,{width:"60"},{default:i(()=>[n(D,{fill:"",large:"",onClick:t[25]||(t[25]=I=>c.confirmQRTask())},{default:i(()=>[oi,si]),_:1})]),_:1})]),_:1})):(l(),p($,{key:1},{default:i(()=>[n(j,{width:"100"},{default:i(()=>[n(D,{fill:"",round:"",large:"","popup-close":""},{default:i(()=>[li,ri]),_:1})]),_:1})]),_:1})),n(he,null,{default:i(()=>[r(u(o.ACT_POPUP.action_footer),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1})}var ci=q(Rt,[["render",di]]);const ui={props:["maxImages","enableCamera"],emits:["save"],data(){return{isCameraOpen:!1,isPhotoTaken:!1,isShotPhoto:!1,isLoading:!1,imageUrls:[],video:"",photoTaken:"",photoTakenCtx:"",width:0,height:0,log:"",dataUrl:""}},computed:{textSaveButton(){return this.imageUrls.length>0?`Save(${this.imageUrls.length})`:"Save"}},methods:{close(e=!0){console.log("closeCamera",e),this.toggleCamera(),e?this.$emit("save",this.imageUrls):this.$emit("save",null)},closeCamera(){this.isCameraOpen=!1,this.isPhotoTaken=!1,this.isShotPhoto=!1,this.stopCameraStream()},openCamera(){this.imageUrls=[],this.toggleCamera()},doLoad(){this.video=document.getElementById("camera-video"),this.photoTaken=document.getElementById("photoTaken"),this.photoTakenCtx=this.photoTaken.getContext("2d");let e=this;this.video.addEventListener("play",function(){e.width=e.video.videoWidth,e.height=e.video.videoHeight},!1)},computeFrame(){const e=this.video.videoWidth,t=this.video.videoHeight,d=t/4*3,h=(e-d)/2,o=0;this.photoTaken.width=d,this.photoTaken.height=t,this.log="Video:Crop:("+this.photoTaken.width+","+this.photoTaken.height+"("+e+","+t+")",this.photoTakenCtx.drawImage(this.video,h,o,d,t,0,0,d,t)},toggleCamera(){console.log("toggleCamera()",this.isCameraOpen),this.isCameraOpen?(this.isCameraOpen=!1,this.isPhotoTaken=!1,this.isShotPhoto=!1,this.stopCameraStream()):(this.isCameraOpen=!0,this.createCameraElement())},createCameraElement(){console.log("createCameraElement()",this.isCameraOpen);try{this.isLoading=!0,N.preloader.show();var e={video:{facingMode:"environment"}};navigator.mediaDevices.getUserMedia(e).then(t=>{this.isLoading=!1,N.preloader.hide(),this.$refs.camera.srcObject=t,this.doLoad()}).catch(t=>{this.isLoading=!1,N.preloader.hide(),alert("May the browser didn't support or there is some errors.")})}catch(t){console.log("createCameraElement()",t)}},stopCameraStream(){console.log("stopCameraStream()",this.isCameraOpen),this.$refs.camera.srcObject.getTracks().forEach(t=>{t.stop()})},async takePhoto(){if(this.imageUrls.length>=this.maxImages){N.dialog.alert("B\u1EA1n \u0111\xE3 ch\u1EE5p qu\xE1 "+this.maxImages+" t\u1EA5m!");return}this.isPhotoTaken||(this.isShotPhoto=!0,setTimeout(()=>{this.isShotPhoto=!1},50)),this.computeFrame(),this.isPhotoTaken=!this.isPhotoTaken,this.dataUrl=this.photoTaken.toDataURL(),await this.uploadImage()},async uploadImage(){const e=this.photoTaken.toDataURL("image/jpeg",.9);var t=this.dataURItoBlob(e);const d=new FormData;d.append("canvasImage",t);try{let h="https://media.vinaas.com/upload/qrcare-vn";const{data:o}=await this.$axios.post(h,d,{headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"}});if(o&&o.id){const c="https://apps.vinaas.com/file/"+o.id;this.imageUrls.push(c)}}catch(h){console.log("err",h)}finally{}this.isPhotoTaken=!this.isPhotoTaken},dataURItoBlob(e){var t;e.split(",")[0].indexOf("base64")>=0?t=atob(e.split(",")[1]):t=unescape(e.split(",")[1]);for(var d=e.split(",")[0].split(":")[1].split(";")[0],h=new Uint8Array(t.length),o=0;o<t.length;o++)h[o]=t.charCodeAt(o);return new Blob([h],{type:d})}}},hi={class:"web-camera-container"},pi=["width","height"],mi=["src","width","height"],_i={id:"photoTaken"},fi=["src"];function gi(e,t,d,h,o,c){const f=s("f7-row"),C=s("f7-col"),v=s("f7-block"),m=s("f7-icon"),E=s("f7-fab"),g=s("f7-page");return l(),p(g,null,{default:i(()=>[a("div",hi,[o.isCameraOpen?F((l(),b("div",{key:0,class:Z(["camera-box",{flash:o.isShotPhoto}])},[a("div",{class:Z(["camera-shutter",{flash:o.isShotPhoto}])},null,2),F(a("video",{id:"camera-video",ref:"camera",width:o.width/2,height:o.height/2,autoplay:"",muted:"",playsinline:""},null,8,pi),[[H,!o.isPhotoTaken]]),F(a("img",{src:o.dataUrl,id:"showPhotoTaken",width:o.height/8*3,height:o.height/2},null,8,mi),[[H,o.isPhotoTaken]]),F(a("canvas",_i,null,512),[[H,!1]])],2)),[[H,!o.isLoading]]):w("",!0)]),n(v,null,{default:i(()=>[n(f,null,{default:i(()=>[r("H\xECnh \u0111\xE3 ch\u1EE5p ("+u(o.imageUrls.length)+" t\u1EA5m)",1)]),_:1}),n(f,null,{default:i(()=>[(l(!0),b(x,null,L(o.imageUrls,y=>(l(),p(C,{width:"50",key:y},{default:i(()=>[a("img",{style:{"max-width":"50%",height:"auto"},src:y},null,8,fi)]),_:2},1024))),128))]),_:1})]),_:1}),n(E,{position:"center-bottom",onClick:c.takePhoto,text:"",color:"red"},{default:i(()=>[n(m,{f7:"camera"})]),_:1},8,["onClick"]),n(E,{position:"right-bottom",color:"blue",onClick:t[0]||(t[0]=y=>c.close(!0)),text:c.textSaveButton},null,8,["text"]),n(E,{position:"left-bottom",color:"gray",onClick:t[1]||(t[1]=y=>c.close(!1)),text:"X"})]),_:1})}var Ce=q(ui,[["render",gi],["__scopeId","data-v-b151db60"]]);const vi=V({props:{isView:Boolean,id:Number,status:String},emits:["updated"],components:{ImageUpload:Ce},data(){return{locationName:"M\xF4 t\u1EA3 \u0111\u1ECBa \u0111i\u1EC3m",adminCardTitle:"Nh\xE2n s\u1EF1 ti\u1EBFp nh\u1EADn",isLoading:!1,enablePopup:!1,isCameraOpen:!1,imageUrls:[],data:{imageUrls:[],sellerName:null}}},watch:{id:"loadData",status:"loadData"},computed:{isActive(){return this.status!=="QRID_STATUS.ACTIVE"?this.isView:!0}},methods:{async loadData(){this.id>0&&(this.isLoading=!0,this.data=await this.$api.getQRID(this.id,"111"),this.isLoading=!1)},async updateData(){this.id&&await this.$api.activeQRMember(this.id,this.data)&&(N.dialog.alert("K\xEDch ho\u1EA1t th\xE0nh c\xF4ng!"),this.$emit("updated","ACTIVE"))},async showCamera(){console.log("click showCamera()"),this.enablePopup=!0,this.$refs.camera.openCamera()},saveImageUrls(e){this.enablePopup=!1,console.log("saveImages",e),e&&(this.data.imageUrls=e)}},async mounted(){await this.loadData()}}),bi={class:"list media-list no-hairlines-between"},Ei={class:"item-content"},Ci={class:"item-inner"},yi={class:"item-title"},ki={class:"item-content"},wi={class:"item-inner"},Di=["innerHTML"],Ai=["src"],Ti=r("H\xECnh \u1EA3nh minh ho\u1EA1 \u0111\u1ECBa \u0111i\u1EC3m"),Ii=["src"],$i=r("Ch\u1EE5p"),Ui={class:"list media-list no-hairlines-between"},Ri={class:"item-content"},Si=a("div",{class:"item-media"},[a("i",{class:"f7-icons"},"person_fill")],-1),xi={class:"item-inner"},Ni={class:"item-title"},qi={key:0},Pi={class:"item-content"},Bi=a("div",{class:"item-media"},[a("i",{class:"f7-icons"},"device_phone_portrait")],-1),Qi={class:"item-inner"},Li={class:"item-subtitle"},Fi={key:1},Oi={class:"item-checkbox item-content"},Vi={class:"item-inner"},Mi=a("div",{class:"item-title-row"},[a("div",{class:"item-title"},"Qu\u1EA3n l\xFD b\u1EDFi")],-1),Hi={class:"item-subtitle"},Ki={class:"item-text"},zi=r("K\xEDch ho\u1EA1t");function ji(e,t,d,h,o,c){const f=s("f7-preloader"),C=s("f7-card-header"),v=s("f7-swiper-slide"),m=s("f7-swiper"),E=s("f7-card-content"),g=s("f7-card"),y=s("f7-list-input"),k=s("f7-list"),A=s("f7-row"),_=s("f7-col"),U=s("f7-icon"),B=s("f7-button"),T=s("f7-block"),D=s("image-upload"),P=s("f7-popup");return l(),b(x,null,[e.isActive?(l(),p(g,{key:0},{default:i(()=>[n(C,{"bg-color":"green"},{default:i(()=>[r(u(e.locationName)+" ",1),F(n(f,null,null,512),[[H,e.isLoading]])]),_:1}),n(E,null,{default:i(()=>[a("div",bi,[a("ul",null,[a("li",null,[a("div",Ei,[a("div",Ci,[a("div",yi,u(e.data.title),1)])])]),a("li",null,[a("div",ki,[a("div",wi,[a("div",{class:"item-text",innerHTML:e.data.description},null,8,Di)])])]),a("li",null,[n(m,{speed:500,slidesPerView:2,spaceBetween:10},{default:i(()=>[(l(!0),b(x,null,L(e.data.imageUrls,Q=>(l(),p(v,{key:Q},{default:i(()=>[a("img",{class:"small",src:Q},null,8,Ai)]),_:2},1024))),128))]),_:1})])])])]),_:1})]),_:1})):(l(),p(g,{key:1},{default:i(()=>[n(C,{"bg-color":"blue"},{default:i(()=>[r(u(e.locationName),1)]),_:1}),n(E,null,{default:i(()=>[n(k,null,{default:i(()=>[n(y,{type:"text",placeholder:"nh\u1EADp ng\u1EAFn g\u1ECDn",outline:"",label:"T\xEAn \u0111\u1ECBa \u0111i\u1EC3m d\xE1n th\u1EBB","floating-label":"","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng",required:"","clear-button":"",value:e.data.title,"onUpdate:value":t[0]||(t[0]=Q=>e.data.title=Q)},null,8,["value"])]),_:1}),n(k,null,{default:i(()=>[n(y,{outline:"",label:"N\u1ED9i dung c\u1EA7n ph\u1EA3n \xE1nh(n\u1EBFu c\xF3)","floating-label":"",type:"textarea",resizable:"",maxlength:"200","clear-button":"",value:e.data.description,"onUpdate:value":t[1]||(t[1]=Q=>e.data.description=Q)},null,8,["value"])]),_:1}),n(T,{style:{"margin-top":"20px","margin-bottom":"10px"}},{default:i(()=>[n(A,null,{default:i(()=>[Ti]),_:1}),n(A,null,{default:i(()=>[(l(!0),b(x,null,L(e.data.imageUrls,Q=>(l(),p(_,{width:"50",key:Q},{default:i(()=>[a("img",{style:{"max-width":"100%",height:"auto"},src:Q},null,8,Ii)]),_:2},1024))),128))]),_:1}),n(B,{large:"",round:"",outline:"",onClick:t[2]||(t[2]=Q=>e.showCamera())},{default:i(()=>[n(U,{f7:"camera"}),$i]),_:1})]),_:1})]),_:1})]),_:1})),e.isActive?(l(),p(g,{key:2},{default:i(()=>[n(C,{"bg-color":"green"},{default:i(()=>[r(u(e.adminCardTitle),1)]),_:1}),n(E,null,{default:i(()=>[a("div",Ui,[a("ul",null,[a("li",null,[a("div",Ri,[Si,a("div",xi,[a("div",Ni,u(e.data.ownerName),1)])])]),e.data.ownerPhoneNumber?(l(),b("li",qi,[a("div",Pi,[Bi,a("div",Qi,[a("div",Li,u(e.data.ownerPhoneNumber),1)])])])):w("",!0),e.data.sellerName?(l(),b("li",Fi,[a("label",Oi,[a("div",Vi,[Mi,a("div",Hi,u(e.data.sellerName),1),a("div",Ki,u(e.data.sellerAddress),1)])])])):w("",!0)])])]),_:1})]),_:1})):(l(),p(g,{key:3},{default:i(()=>[n(C,{"bg-color":"blue"},{default:i(()=>[r(u(e.adminCardTitle),1)]),_:1}),n(E,null,{default:i(()=>[n(k,{"no-hairlines-md":""},{default:i(()=>[n(y,{type:"text",outline:"",label:"Nh\xE2n vi\xEAn ph\u1EE5 tr\xE1ch","floating-label":"",placeholder:"",maxlength:"100","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:e.data.ownerName,"onUpdate:value":t[3]||(t[3]=Q=>e.data.ownerName=Q)},null,8,["value"]),n(y,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (khi kh\u1EA9n c\u1EA5p)","floating-label":"",type:"text",placeholder:"nh\u1EADp \u0111\u1EC3 ti\u1EC7n li\xEAn h\u1EC7","error-message":"h\xE3y nh\u1EADp \u0111\u1EE7 10 s\u1ED1!",minlength:"10",maxlength:"11",validate:"",pattern:"[0-9]*","clear-button":"",value:e.data.ownerPhoneNumber,"onUpdate:value":t[4]||(t[4]=Q=>e.data.ownerPhoneNumber=Q)},null,8,["value"])]),_:1})]),_:1})]),_:1})),e.isActive?w("",!0):(l(),p(T,{key:4},{default:i(()=>[n(A,null,{default:i(()=>[n(_,{width:"100"},{default:i(()=>[n(B,{fill:"",round:"",large:"",onClick:t[5]||(t[5]=Q=>e.updateData()),color:"red"},{default:i(()=>[zi]),_:1})]),_:1})]),_:1})]),_:1})),n(P,{opened:e.enablePopup,"onUpdate:opened":t[6]||(t[6]=Q=>e.enablePopup=Q)},{default:i(()=>[n(D,{ref:"camera",maxImages:2,onSave:e.saveImageUrls},null,8,["onSave"])]),_:1},8,["opened"])],64)}var ye=q(vi,[["render",ji]]);const Yi=V({props:{qrid:Number,type:String},emits:["send"],components:{Camera:Ce,ImageUpload:be},data(){return{isLoading:!1,enablePopup:!1,isCameraOpen:!1,imageUrls:[],data:{title:"",imageUrls:[],sellerName:null,type:"",qrid:0,userComment:0,status:"CREATED",metadata:{enableSender:!1}}}},methods:{async showCamera(){console.log("click showCamera()"),this.enablePopup=!0,this.$refs.camera.openCamera()},saveImageUrls(e){this.enablePopup=!1,console.log("saveImages",e),e&&(this.data.imageUrls=e)},uploaded(e){console.log("uploaded",e),this.data.imageUrls.push(e)},close(){this.enablePopup=!1,this.$emit("send","CANCEL")},async postActivity(){this.data.qrid=this.qrid,this.data.type=this.type||"ACTIVITY.QR_REQUEST";let e=await this.$api.createQRFeedback(this.data);console.log("rs",e),N.dialog.alert("G\u1EEDi th\xE0nh c\xF4ng, c\u1EA3m \u01A1n b\u1EA1n!"),this.$emit("send","SUCCESS")}}}),Gi=r("Ph\u1EA3n \xE1nh hi\u1EC7n tr\u01B0\u1EDDng"),Wi=r(" Ch\u1EE5p h\xECnh ho\u1EB7c ghi ph\u1EA3n \xE1nh "),Zi=["src"],Xi=r("Ng\u01B0\u1EDDi g\u1EEDi (tu\u1EF3 ch\u1ECDn) "),Ji=a("i",{class:"f7-icons"},"xmark_circle",-1),ea=r("Hu\u1EF7"),ta=a("i",{class:"f7-icons"},"checkmark_circle",-1),na=r("G\u1EEDi");function ia(e,t,d,h,o,c){const f=s("f7-nav-title"),C=s("f7-navbar"),v=s("f7-card-header"),m=s("f7-col"),E=s("f7-row"),g=s("image-upload"),y=s("f7-block"),k=s("f7-list-input"),A=s("f7-list");s("f7-icon");const _=s("f7-button"),U=s("f7-card-content"),B=s("f7-card"),T=s("f7-toggle"),D=s("camera"),P=s("f7-popup"),Q=s("f7-page");return l(),p(Q,null,{default:i(()=>[n(C,{sliding:!1},{default:i(()=>[n(f,{sliding:""},{default:i(()=>[Gi]),_:1})]),_:1}),n(B,null,{default:i(()=>[n(v,{"bg-color":"blue"},{default:i(()=>[Wi]),_:1}),n(U,null,{default:i(()=>[n(y,null,{default:i(()=>[n(E,null,{default:i(()=>[(l(!0),b(x,null,L(e.data.imageUrls,R=>(l(),p(m,{width:"50",key:R},{default:i(()=>[a("img",{style:{"max-width":"50%",height:"auto"},src:R},null,8,Zi)]),_:2},1024))),128))]),_:1}),n(g,{ref:"activityImages",countImages:0,maxImages:4,onUploaded:e.uploaded},null,8,["onUploaded"])]),_:1}),n(A,{style:{"margin-top":"15px"}},{default:i(()=>[n(k,{type:"text",placeholder:"nh\u1EADp ng\u1EAFn g\u1ECDn",outline:"",label:"V\xE0i t\u1EEB ng\u1EAFn g\u1ECDn","floating-label":"","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng",required:"","clear-button":"",value:e.data.title,"onUpdate:value":t[0]||(t[0]=R=>e.data.title=R)},null,8,["value"])]),_:1}),w("",!0)]),_:1})]),_:1}),n(B,null,{default:i(()=>[n(v,{"bg-color":"green"},{default:i(()=>[Xi,n(T,{checked:e.data.metadata.enableSender,"onUpdate:checked":t[2]||(t[2]=R=>e.data.metadata.enableSender=R)},null,8,["checked"])]),_:1}),n(U,null,{default:i(()=>[F(n(A,{"no-hairlines-md":""},{default:i(()=>[n(k,{type:"text",outline:"",label:"T\xEAn g\u1ECDi","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"20","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:e.data.customerName,"onUpdate:value":t[3]||(t[3]=R=>e.data.customerName=R)},null,8,["value"]),n(k,{outline:"",type:"textarea",label:"\u0110\u1ECBa ch\u1EC9 (tu\u1EF3 ch\u1ECDn)","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:e.data.customerAddress,"onUpdate:value":t[4]||(t[4]=R=>e.data.customerAddress=R)},null,8,["value"])]),_:1},512),[[H,e.data.metadata.enableSender]])]),_:1})]),_:1}),n(y,null,{default:i(()=>[n(E,null,{default:i(()=>[n(m,{width:"30"},{default:i(()=>[n(_,{raised:"",round:"",large:"",color:"gray",onClick:t[5]||(t[5]=R=>e.close())},{default:i(()=>[Ji,ea]),_:1})]),_:1}),n(m,{width:"60"},{default:i(()=>[n(_,{raised:"",round:"",fill:"",large:"",onClick:t[6]||(t[6]=R=>e.postActivity())},{default:i(()=>[ta,na]),_:1})]),_:1})]),_:1})]),_:1}),n(P,{opened:e.enablePopup,"onUpdate:opened":t[7]||(t[7]=R=>e.enablePopup=R)},{default:i(()=>[n(D,{ref:"camera",maxImages:2,onSave:e.saveImageUrls},null,8,["onSave"])]),_:1},8,["opened"])]),_:1})}var aa=q(Yi,[["render",ia]]);const oa=V({props:{id:Number,type:String},data(){return{isLoading:!1,filter:{skip:0,limit:10},data:{metadata:{enableSender:!0}},ACT_POPUP:{nar_bar_title:"Chi ti\u1EBFt Ph\u1EA3n \xE1nh",content:"N\u1ED9i dung",sender:"Ng\u01B0\u1EDDi g\u1EEDi",receiver:"B\xEAn th\u1EF1c hi\u1EC7n",action:"X\xE1c nh\u1EADn",action_footer:"C\u1EA3m \u01A1n ph\u1EA3n \xE1nh c\u1EE7a Qu\xFD c\u01B0 d\xE2n!"}}},watch:{id:"loadData"},methods:{async loadData(){this.id>0&&(this.isLoading=!0,this.data=await this.$api.getCardActivity(this.id),this.isLoading=!1)}}}),sa=["src"],la=a("div",null,"\u0110\xE3 \u1EA9n th\xF4ng tin",-1),ra=r("Nh\u1EADn x\xE9t t\u1EEB kh\xE1ch h\xE0ng"),da=r("ch\u01B0a c\xF3"),ca=r("Nh\u1EADn x\xE9t t\u1EEB kh\xE1ch h\xE0ng"),ua=r("T\u1EEB ch\u1ED1i"),ha=a("i",{class:"f7-icons"},"checkmark_circle",-1),pa=r("X\xE1c nh\u1EADn"),ma=a("i",{class:"f7-icons"},"xmark_circle",-1),_a=r(" \u0110\xF3ng");function fa(e,t,d,h,o,c){const f=s("f7-preloader"),C=s("f7-navbar"),v=s("f7-card-header"),m=s("f7-list-item"),E=s("f7-col"),g=s("f7-row"),y=s("f7-block"),k=s("f7-list"),A=s("f7-card-content"),_=s("f7-card"),U=s("f7-icon"),B=s("f7-list-input"),T=s("f7-button"),D=s("f7-block-footer"),P=s("f7-page");return l(),p(P,null,{default:i(()=>[n(C,{title:e.ACT_POPUP.nar_bar_title},{default:i(()=>[F(n(f,null,null,512),[[H,e.isLoading]])]),_:1},8,["title"]),n(_,null,{default:i(()=>[n(v,{"bg-color":"green"},{default:i(()=>[r(u(e.ACT_POPUP.content),1)]),_:1}),n(A,null,{default:i(()=>[n(k,{"no-hairlines-md":""},{default:i(()=>[n(m,null,{default:i(()=>[r(u(e.data.title),1)]),_:1}),n(m,null,{default:i(()=>[r(u(e.data.description),1)]),_:1}),e.data.type=="ACTIVITY.QRTASK"?(l(),p(m,{key:0},{default:i(()=>[r("\u0110\xE3 thu: "+u(e.$utils.formatMoney(e.data.money)),1)]),_:1})):w("",!0),e.data.type=="ACTIVITY.QRTASK"?(l(),p(m,{key:1},{default:i(()=>[r("Th\u1EF1c hi\u1EC7n l\xFAc: "+u(e.$utils.formatDateTime(e.data.created)),1)]),_:1})):(l(),p(m,{key:2},{default:i(()=>[r("G\u1EEDi l\xFAc: "+u(e.$utils.formatDateTime(e.data.created)),1)]),_:1})),n(y,null,{default:i(()=>[n(g,{"no-gap":""},{default:i(()=>[(l(!0),b(x,null,L(e.data.imageUrls,Q=>(l(),p(E,{width:"50",key:Q},{default:i(()=>[a("img",{width:"100",src:Q},null,8,sa)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n(_,null,{default:i(()=>[n(v,{"bg-color":"green"},{default:i(()=>[r(u(e.ACT_POPUP.sender),1)]),_:1}),n(A,null,{default:i(()=>[la,e.data.metadata.enableSender!=!1?(l(),p(k,{key:0,"no-hairlines-md":""},{default:i(()=>[n(m,null,{default:i(()=>[r(u(e.data.customerName),1)]),_:1}),n(m,null,{default:i(()=>[r(u(e.data.customerPhoneNumber),1)]),_:1}),n(m,null,{default:i(()=>[r(u(e.data.customerAddress),1)]),_:1}),e.data.type=="ACTIVITY.QRTASK"&&e.data.status=="CONFIRMED"?(l(),p(m,{key:0},{default:i(()=>[r("X\xE1c nh\u1EADn l\xFAc "+u(e.$utils.formatDateTime(e.data.modified)),1)]),_:1})):w("",!0),e.data.type=="ACTIVITY.QRTASK"&&e.data.status=="REJECTED"?(l(),p(m,{key:1},{default:i(()=>[r("T\u1EEB ch\u1ED1i l\xFAc "+u(e.$utils.formatDateTime(e.data.modified)),1)]),_:1})):w("",!0)]),_:1})):w("",!0)]),_:1})]),_:1}),e.data.type=="ACTIVITY.QRTASK"&&(e.data.status=="CONFIRMED"||e.data.status=="REJECTED")?(l(),p(_,{key:0},{default:i(()=>[n(v,{"bg-color":"green"},{default:i(()=>[ra]),_:1}),n(A,null,{default:i(()=>[e.data.userComment?(l(),p(k,{key:0},{default:i(()=>[n(m,null,{default:i(()=>[r(u(e.data.userComment),1)]),_:1})]),_:1})):(l(),p(k,{key:1},{default:i(()=>[n(m,null,{default:i(()=>[da]),_:1})]),_:1}))]),_:1})]),_:1})):w("",!0),e.data.type=="ACTIVITY.QR_REQUEST"||e.data.type=="ACTIVITY.QRTASK"?(l(),p(_,{key:1},{default:i(()=>[n(v,{"bg-color":"blue"},{default:i(()=>[r(u(e.ACT_POPUP.receiver)+" ",1),n(U,{f7:e.supplier.status=="ACTIVE"?"star_circle":"star_slash"},null,8,["f7"])]),_:1}),n(A,null,{default:i(()=>[n(k,null,{default:i(()=>[n(m,null,{default:i(()=>[r(u(e.supplier.name),1)]),_:1}),n(m,null,{default:i(()=>[r(u(e.supplier.address),1)]),_:1})]),_:1})]),_:1})]),_:1})):w("",!0),e.data.type=="ACTIVITY.QRTASK"&&e.data.status=="CREATED"?(l(),p(_,{key:2},{default:i(()=>[n(v,{"bg-color":"green"},{default:i(()=>[ca]),_:1}),n(A,null,{default:i(()=>[n(k,null,{default:i(()=>[n(B,{type:"textarea",outline:"",label:"Nh\u1EADn x\xE9t","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","error-message":"b\u1EA1n \u0111\xE3 nh\u1EADp qu\xE1 d\xE0i!","clear-button":"",value:e.data.userComment,"onUpdate:value":t[0]||(t[0]=Q=>e.data.userComment=Q)},null,8,["value"])]),_:1})]),_:1})]),_:1})):w("",!0),n(y,null,{default:i(()=>[e.data.type=="ACTIVITY.QRTASK"&&e.data.status=="CREATED"?(l(),p(g,{key:0},{default:i(()=>[n(E,{width:"40"},{default:i(()=>[n(T,{raised:"",round:"",large:"",color:"gray",onClick:t[1]||(t[1]=Q=>e.rejectQRTask())},{default:i(()=>[ua]),_:1})]),_:1}),n(E,{width:"60"},{default:i(()=>[n(T,{fill:"",large:"",onClick:t[2]||(t[2]=Q=>e.confirmQRTask())},{default:i(()=>[ha,pa]),_:1})]),_:1})]),_:1})):(l(),p(g,{key:1},{default:i(()=>[n(E,{width:"100"},{default:i(()=>[n(T,{fill:"",round:"",large:"","popup-close":""},{default:i(()=>[ma,_a]),_:1})]),_:1})]),_:1})),n(D,null,{default:i(()=>[r(u(e.ACT_POPUP.action_footer),1)]),_:1})]),_:1})]),_:1})}var ke=q(oa,[["render",fa]]);const ga=V({props:{isView:Boolean,id:Number,privateCode:String},components:{Activity:ke},data(){return{isLoading:!1,filter:{skip:0,limit:10},enablePopup:!1,selectedId:0,data:{}}},watch:{id:"loadData"},methods:{clickViewActivity(e){e.id>0&&(this.selectedId=e.id,this.enablePopup=!0)},async loadData(){this.id>0&&(this.isLoading=!0,this.data=await this.$api.getCardHistory(this.id,this.privateCode,this.filter),this.isLoading=!1)}},async mounted(){this.loadData()}}),va=r("Ph\u1EA3n \xE1nh g\u1EA7n nh\u1EA5t (10) "),ba={class:"list media-list medium-inset"},Ea=["onClick"],Ca={class:"item-media"},ya=["src"],ka={class:"item-inner"},wa={class:"item-header"},Da={class:"item-title-row"},Aa=a("div",{class:"item-after"},null,-1),Ta={class:"item-subtitle"},Ia={class:"item-text"},$a={class:"item-footer text-color-red",style:{"font-size":"14px","font-weight":"600"}};function Ua(e,t,d,h,o,c){const f=s("f7-preloader"),C=s("f7-card-header"),v=s("f7-card"),m=s("activity"),E=s("f7-popup");return l(),b(x,null,[n(v,null,{default:i(()=>[n(C,{"bg-color":"blue"},{default:i(()=>[va,F(n(f,null,null,512),[[H,e.isLoading]])]),_:1}),a("div",ba,[a("ul",null,[(l(!0),b(x,null,L(e.data,g=>(l(),b("li",{key:g.id},[a("a",{onClick:y=>e.clickViewActivity(g),class:"item-link item-content chevron-center"},[a("div",Ca,[a("img",{style:{border:"1px solid #ccc"},src:e.$utils.firstImage(g.imageUrls),width:"80"},null,8,ya)]),a("div",ka,[a("div",wa,u(e.$utils.formatDateTime(g.modified)),1),a("div",Da,[a("div",{class:Z(e.$utils.getActivityColor(g)),style:{"font-size":"16px"}},u(e.$utils.getActivityName(g)),3),Aa]),a("div",Ta,u(g.title||"kh\xF4ng c\xF3"),1),a("div",Ia,u(g.description),1),a("div",$a,u(e.$utils.formatMoney(g.money)),1)])],8,Ea)]))),128))])])]),_:1}),n(E,{id:"view-activity",opened:e.enablePopup,"onUpdate:opened":t[0]||(t[0]=g=>e.enablePopup=g),"tablet-fullscreen":!0},{default:i(()=>[n(m,{id:e.selectedId},null,8,["id"])]),_:1},8,["opened"])],64)}var oe=q(ga,[["render",Ua]]);const Ra=V({props:{isView:Boolean,id:Number,privateCode:String},components:{Activity:ke},data(){return{isLoading:!1,filter:{skip:0,limit:10},enablePopup:!1,selectedId:0,data:{}}},watch:{id:"loadData"},methods:{clickViewActivity(e){e.id>0&&(this.selectedId=e.id,this.enablePopup=!0)},async loadData(){this.id>0&&(this.isLoading=!0,this.data=await this.$api.getRecentActivity(this.id,this.privateCode,this.filter),this.isLoading=!1)}},async mounted(){this.loadData()}}),Sa=r("Ph\u1EA3n \xE1nh m\u1EDBi nh\u1EA5t (10) "),xa={class:"list media-list medium-inset"},Na=["onClick"],qa={class:"item-media"},Pa=["src"],Ba={class:"item-inner"},Qa={class:"item-header"},La={class:"item-title-row"},Fa=a("div",{class:"item-after"},null,-1),Oa={class:"item-subtitle"},Va={class:"item-text"},Ma={class:"item-footer text-color-red",style:{"font-size":"14px","font-weight":"600"}};function Ha(e,t,d,h,o,c){const f=s("f7-preloader"),C=s("f7-card-header"),v=s("f7-card"),m=s("activity"),E=s("f7-popup");return l(),b(x,null,[n(v,null,{default:i(()=>[n(C,{"bg-color":"green"},{default:i(()=>[Sa,F(n(f,null,null,512),[[H,e.isLoading]])]),_:1}),a("div",xa,[a("ul",null,[(l(!0),b(x,null,L(e.data,g=>(l(),b("li",{key:g.id},[a("a",{onClick:y=>e.clickViewActivity(g),class:"item-link item-content chevron-center"},[a("div",qa,[a("img",{style:{border:"1px solid #ccc"},src:e.$utils.firstImage(g.imageUrls),width:"80"},null,8,Pa)]),a("div",Ba,[a("div",Qa,u(e.$utils.formatDateTime(g.modified)),1),a("div",La,[a("div",{class:Z(e.$utils.getActivityColor(g)),style:{"font-size":"16px"}},u(e.$utils.getActivityName(g)),3),Fa]),a("div",Oa,u(g.title||"kh\xF4ng c\xF3"),1),a("div",Va,u(g.description),1),a("div",Ma,u(e.$utils.formatMoney(g.money)),1)])],8,Na)]))),128))])])]),_:1}),n(E,{id:"view-activity",opened:e.enablePopup,"onUpdate:opened":t[0]||(t[0]=g=>e.enablePopup=g)},{default:i(()=>[n(m,{id:e.selectedId},null,8,["id"])]),_:1},8,["opened"])],64)}var we=q(Ra,[["render",Ha]]);const Ka=V({props:{id:Number},data(){return{data:{ownerName:"Ban Qu\u1EA3n l\xFD Emerald Precint",ownerAddress:"string",logoUrl:"",status:"ACTIVE"}}},watch:{id:"loadData"},methods:{async loadData(){this.id>0&&(this.data=await this.$api.getQRID(this.id,"111"))}},async mounted(){await this.loadData()}}),za=r("Ban qu\u1EA3n l\xFD"),ja={class:"list media-list no-hairlines-between"},Ya={class:"item-content"},Ga=a("div",{class:"item-media"},[a("i",{class:"f7-icons"},"person_fill")],-1),Wa={class:"item-inner"},Za={class:"item-title"},Xa={class:"item-content"},Ja=a("div",{class:"item-media"},[a("i",{class:"f7-icons"},"house")],-1),eo={class:"item-inner"},to={class:"item-subtitle"};function no(e,t,d,h,o,c){const f=s("f7-card-header"),C=s("f7-card-content"),v=s("f7-card");return l(),p(v,null,{default:i(()=>[n(f,{"bg-color":"green"},{default:i(()=>[za]),_:1}),n(C,null,{default:i(()=>[a("div",ja,[a("ul",null,[a("li",null,[a("div",Ya,[Ga,a("div",Wa,[a("div",Za,u(e.data.ownerName),1)])])]),a("li",null,[a("div",Xa,[Ja,a("div",eo,[a("div",to,u(e.data.ownerAddress),1)])])])])])]),_:1})]),_:1})}var io=q(Ka,[["render",no]]);const ao={props:{f7route:Object,f7router:Object},components:{Location:ye,History:oe,RecentHistory:we,Feedback:aa,Company:io},computed:{isActive(){return this.data.status=="QRID_STATUS.ACTIVE"}},data(){var e=parseInt(this.f7route.params.id),t=this.f7route.params.privateCode;return{title:"Ph\u1EA3n \xE1nh hi\u1EC7n tr\u01B0\u1EDDng",enablePopup:!1,qrid:e,privateCode:t,setupId:0,data:{id:e,packageId:"10001001029",private:"19717042",status:"QRID_STATUS.ACTIVE",cardType:"CARD_TYPE.PUBLIC_LOCATION",ownerPhoneNumber:""}}},methods:{async loadvcard(){var e=await this.$api.getVcard(this.data.id);window.open("data:text/x-vcard;urlencoded,"+e)},async loadData(){console.log("loadData");var e=parseInt(this.f7route.params.id),t=this.f7route.params.privateCode;if(e>0){this.data=await this.$api.getQRID(e,"111"),console.log("loadData",this.data);let d=this.$utils.qrid_setup(e);this.setupId=d,this.isActive&&(this.qrid=e,this.privateCode=t)}},async locationUpdated(e){console.log("locationUpdate",e),e=="ACTIVE"&&await this.loadData()},async clickFeedback(){this.enablePopup=!0},feedbackClose(e){e=="CANCEL"&&console.log("do nothing"),this.enablePopup=!1},async clickCall(e){console.log("clickCall",e),e&&(window.location="tel:"+e)}},async mounted(){await this.loadData()}},oo=r("qrFeedback v.16");function so(e,t,d,h,o,c){const f=s("f7-nav-title"),C=s("f7-navbar"),v=s("location"),m=s("company"),E=s("history"),g=s("f7-card-header"),y=s("f7-card-content"),k=s("f7-card"),A=s("f7-icon"),_=s("f7-fab"),U=s("feedback"),B=s("f7-popup"),T=s("f7-page");return l(),p(T,null,{default:i(()=>[n(C,{sliding:!1},{default:i(()=>[n(f,{sliding:""},{default:i(()=>[r(u(o.title),1)]),_:1})]),_:1}),n(v,{isView:!1,id:o.data.id,status:o.data.status,onUpdated:c.locationUpdated},null,8,["id","status","onUpdated"]),n(m,{id:o.setupId},null,8,["id"]),c.isActive?(l(),p(E,{key:0,id:o.qrid},null,8,["id"])):w("",!0),n(k,null,{default:i(()=>[n(g,null,{default:i(()=>[oo]),_:1}),n(y,null,{default:i(()=>[a("div",null,u(o.data.id),1),a("div",null,u(o.data.status),1)]),_:1})]),_:1}),c.isActive?(l(),p(_,{key:1,position:"center-bottom",onClick:t[0]||(t[0]=D=>c.clickFeedback()),text:"Ph\u1EA3n \xE1nh",color:"green"},{default:i(()=>[n(A,{f7:"camera"})]),_:1})):w("",!0),o.data.ownerPhoneNumber?(l(),p(_,{key:2,position:"right-bottom",onClick:t[1]||(t[1]=D=>c.clickCall(o.data.ownerPhoneNumber)),text:"",color:"red"},{default:i(()=>[n(A,{f7:"phone_fill"})]),_:1})):w("",!0),n(B,{opened:o.enablePopup,"onUpdate:opened":t[2]||(t[2]=D=>o.enablePopup=D)},{default:i(()=>[n(U,{qrid:o.qrid,type:"ACTIVITY.QRFEEDBACK",onSend:c.feedbackClose},null,8,["qrid","onSend"])]),_:1},8,["opened"])]),_:1})}var lo=q(ao,[["render",so]]);const ro={props:{f7route:Object,f7router:Object}};function co(e,t,d,h,o,c){const f=s("f7-navbar"),C=s("f7-block"),v=s("f7-page");return l(),p(v,null,{default:i(()=>[n(f,{title:"V\xF2ng \u0111\u1EDDi thi\u1EBFt b\u1ECB","back-link":"Back"}),n(C,null,{default:i(()=>[a("h2",null,u(d.f7route.params.id),1)]),_:1})]),_:1})}var uo=q(ro,[["render",co]]);const ho={},po={color:"green"};function mo(e,t,d,h,o,c){const f=s("f7-navbar"),C=s("f7-block"),v=s("f7-page");return l(),p(v,null,{default:i(()=>[n(f,{title:"Th\xF4ng tin Ch\xEDnh h\xE3ng","back-link":"Back"}),n(C,null,{default:i(()=>[a("h2",po,u(e.f7route.params.id),1)]),_:1})]),_:1})}var _o=q(ho,[["render",mo]]);const fo={computed:{isActive(){return!1}}},go=r("V\xF2ng \u0111\u1EDDi t\xE0i s\u1EA3n"),vo=a("span",null,"ch\u01B0a k\xEDch ho\u1EA1t",-1),bo=r(" Th\xF4ng tin t\xE0i s\u1EA3n "),Eo={class:"list media-list no-hairlines-between"},Co={class:"item-content"},yo={class:"item-inner"},ko={class:"item-title"},wo={class:"item-content"},Do={class:"item-inner"},Ao=["innerHTML"],To=["src"],Io={key:0},$o={class:"item-content"},Uo={class:"item-inner"},Ro={class:"item-title"},So={class:"item-checkbox item-content"},xo={class:"item-inner"},No=a("div",{class:"item-title-row"},[a("div",{class:"item-title"},"S\u1EA3n ph\u1EA9m c\u1EE7a")],-1),qo={class:"item-subtitle"},Po={class:"item-text"};function Bo(e,t,d,h,o,c){const f=s("f7-link"),C=s("f7-nav-right"),v=s("f7-nav-title"),m=s("f7-navbar"),E=s("f7-card-header"),g=s("f7-card"),y=s("f7-swiper-slide"),k=s("f7-swiper"),A=s("f7-card-content"),_=s("f7-page");return l(),p(_,null,{default:i(()=>[n(m,{sliding:!1},{default:i(()=>[n(C,null,{default:i(()=>[n(f,{"icon-ios":"f7:menu","icon-aurora":"f7:menu","icon-md":"material:menu","panel-open":"left"})]),_:1}),n(v,{sliding:""},{default:i(()=>[go]),_:1})]),_:1}),c.isActive()?(l(),p(g,{key:0,"bg-color":"blue"},{default:i(()=>[n(E,null,{default:i(()=>[r("ID: "+u(e.f7route.params.id),1)]),_:1})]),_:1})):(l(),p(g,{key:1,"bg-color":"red"},{default:i(()=>[n(E,null,{default:i(()=>[r("ID: "+u(e.f7route.params.id)+" ",1),vo]),_:1})]),_:1})),n(g,null,{default:i(()=>[n(E,{"bg-color":"green"},{default:i(()=>[bo]),_:1}),n(A,null,{default:i(()=>[a("div",Eo,[a("ul",null,[a("li",null,[a("div",Co,[a("div",yo,[a("div",ko,u(e.data.title),1)])])]),a("li",null,[a("div",wo,[a("div",Do,[a("div",{class:"item-text",innerHTML:e.data.description},null,8,Ao)])])]),a("li",null,[n(k,{speed:500,slidesPerView:2,spaceBetween:10},{default:i(()=>[(l(!0),b(x,null,L(e.data.imageUrls,U=>(l(),p(y,{key:U},{default:i(()=>[a("img",{class:"small",src:U},null,8,To)]),_:2},1024))),128))]),_:1})]),c.isActive?(l(),b("li",Io,[a("div",$o,[a("div",Uo,[a("div",Ro," Ng\xE0y k\xEDch ho\u1EA1t: "+u(e.formatDate(e.data.activatedDate)),1)])])])):w("",!0),a("li",null,[a("label",So,[a("div",xo,[No,a("div",qo,u(e.data.sellerName),1),a("div",Po,u(e.data.sellerAddress),1)])])])])])]),_:1})]),_:1})]),_:1})}var Qo=q(fo,[["render",Bo]]);const Lo=V({name:"QrLogin",emits:["detect","warning"],components:{QrStream:ae.exports.QrStream,QrCapture:ae.exports.QrCapture},data(){return{qrUrl:"",warning:!1}},methods:{async onDecode(e){console.log("onDecode",e),e.includes("backend.qrcare.net/api/ApplicationUsers/")||e.includes("m.qrcare.vn/u/")?(this.qrUrl=e,this.$emit("detect",e)):this.$emit("warning",e)}}}),Fo=e=>(le("data-v-5749cdf0"),e=e(),re(),e),Oo={class:"reader"},Vo={class:"center stream"},Mo=Fo(()=>a("div",{style:{color:"red"},class:"frame"},null,-1)),Ho={key:0,"text-color":"red"};function Ko(e,t,d,h,o,c){const f=s("qr-stream");return l(),b("div",Oo,[a("div",null,[a("div",Vo,[n(f,{onDecode:e.onDecode,class:"mb"},{default:i(()=>[Mo]),_:1},8,["onDecode"])])]),e.warning?(l(),b("h3",Ho,"M\xE3 QRCode kh\xF4ng \u0111\xFAng.")):w("",!0)])}var zo=q(Lo,[["render",Ko],["__scopeId","data-v-5749cdf0"]]);const jo=V({props:{f7route:Object,f7router:Object},components:{QrScanOne:zo},data(){const e=pe();return e.desktop?console.log("It is desktop"):console.log("It is mobile"),{qrUrl:"",device:e,username:"",password:""}},methods:{detectURl(e){console.log(e),this.qrUrl=e,this.clickLogin()},showWarning(e){N.dialog.alert("qrcode kh\xF4ng h\u1EE3p l\u1EC7!<br>",e)},async clickLogin(){if(this.qrUrl){let e=this.qrUrl;this.qrUrl.includes("backend.qrcare.net")&&(e=this.qrUrl.replace("backend.qrcare.net","api.qrcare.net")),await this.loginByUrl(e)}else await this.loginByAccount()},async loginByUrl(e){let t=await this.$axios.get(e);t&&t.data&&(console.log(t.data),G.dispatch("login",t.data),this.f7router.back())},async loginByAccount(){var e={username:this.username,password:this.password};let d=(await this.$axios.post(O.BASE_URL+"ApplicationUsers/login",e)).data;if(d.id&&d.userId){console.log("loginAction",d);let h=O.BASE_URL+"ApplicationUsers/"+d.userId+"?access_token="+d.id;await this.loginByUrl(h)}}},mounted(){const e=X("isDemoCard");console.log("isDemoCard",e),e.value&&(this.username="888.10",this.password="QRcare888.10")}}),Yo=r("Qu\xE9t Th\u1EBB QRLogin \u0111\u1EC3 t\u1EF1 \u0111\u1ED9ng \u0111\u0103ng nh\u1EADp "),Go=r("Ho\u1EB7c cung c\u1EA5p th\xF4ng tin"),Wo=r("\u0110\u0103ng nh\u1EADp"),Zo=a("p",null,"Li\xEAn h\u1EC7 v\u1EDBi ch\xFAng t\xF4i \u0111\u1EC3 \u0111\u01B0\u1EE3c c\u1EA5p t\xE0i kho\u1EA3n",-1),Xo=a("p",null,"Email: sales@qrcare.net ",-1),Jo=a("p",null,"Phone: +84 906 826 807",-1);function es(e,t,d,h,o,c){const f=s("qr-scan-one"),C=s("f7-block-footer"),v=s("f7-block"),m=s("f7-block-title"),E=s("f7-list-input"),g=s("f7-list"),y=s("f7-button"),k=s("f7-page");return l(),p(k,{name:"Login Desktop"},{default:i(()=>[e.device.desktop?w("",!0):(l(),p(v,{key:0},{default:i(()=>[n(f,{onDetect:e.detectURl,onWarning:e.showWarning},null,8,["onDetect","onWarning"]),n(C,{style:{"margin-top":"20px"}},{default:i(()=>[Yo]),_:1})]),_:1})),n(v,null,{default:i(()=>[n(m,null,{default:i(()=>[Go]),_:1}),n(g,{form:""},{default:i(()=>[n(E,{outline:"",type:"text",label:"username","floating-label":"",placeholder:"username",value:e.username,"onUpdate:value":t[0]||(t[0]=A=>e.username=A)},null,8,["value"]),n(E,{type:"password",name:"password",placeholder:"m\u1EADt kh\u1EA9u",value:e.password,"onUpdate:value":t[1]||(t[1]=A=>e.password=A)},null,8,["value"])]),_:1}),n(y,{fill:"",large:"",round:"",onClick:e.clickLogin},{default:i(()=>[Wo]),_:1},8,["onClick"]),n(g,null,{default:i(()=>[n(C,null,{default:i(()=>[Zo,Xo,Jo]),_:1})]),_:1})]),_:1})]),_:1})}var ts=q(jo,[["render",es]]);const ns={},is=V({emits:["updated"],props:{isView:Boolean,data:Object},computed:{isActive(){return!1},isEdit(){return!this.isView&&this.item.id>0}},watch:{data(e){e&&e.id&&(console.log("to update",this.data.ownerName),this.item={id:e.id,ownerName:e.ownerName||"",ownerPhoneNumber:e.ownerPhoneNumber||"",ownerAddress:e.ownerAddress||""})}},data(){return{item:{id:0,ownerName:"",ownerPhoneNumber:"",ownerAddress:""}}},methods:{updateData(){const e=this;this.item,this.$api.activeQRMember(this.item.id,this.item).then(t=>{e.$emit("updated","DONE"),N.dialog.alert("C\u1EADp nh\u1EADt Th\xE0nh c\xF4ng")}).catch(t=>{e.$emit("updated","ERROR"),N.dialog.alert("C\u1EADp nh\u1EADt b\u1ECB l\u1ED7i")})}},mounted(){}}),as=r(" Th\xE0nh vi\xEAn "),os=r("Edit"),ss={class:"list media-list no-hairlines-between"},ls={class:"item-content"},rs=a("div",{class:"item-media"},[a("i",{class:"f7-icons"},"person_fill")],-1),ds={class:"item-inner"},cs={class:"item-title"},us={key:0},hs={class:"item-content"},ps=a("div",{class:"item-media"},[a("i",{class:"f7-icons"},"device_phone_portrait")],-1),ms={class:"item-inner"},_s={class:"item-subtitle"},fs=r("K\xEDch ho\u1EA1t"),gs=r("Danh x\u01B0ng"),vs=a("i",{class:"f7-icons"},"xmark_circle",-1),bs=r("Cancel"),Es=r("C\u1EADp nh\u1EADt");function Cs(e,t,d,h,o,c){const f=s("f7-button"),C=s("f7-card-header"),v=s("f7-card-content"),m=s("f7-list-input"),E=s("f7-list"),g=s("f7-card"),y=s("f7-navbar"),k=s("f7-block-title"),A=s("f7-block"),_=s("f7-col"),U=s("f7-row"),B=s("f7-page"),T=s("f7-popup");return l(),b(x,null,[n(g,null,{default:i(()=>[n(C,{"bg-color":"green"},{default:i(()=>[as,!e.isActive&&e.isEdit?(l(),p(f,{key:0,"popup-open":".member-popup"},{default:i(()=>[os]),_:1})):w("",!0)]),_:1}),e.item.ownerName?(l(),p(v,{key:0},{default:i(()=>[a("div",ss,[a("ul",null,[a("li",null,[a("div",ls,[rs,a("div",ds,[a("div",cs,u(e.item.ownerName),1)])])]),e.item.ownerPhoneNumber?(l(),b("li",us,[a("div",hs,[ps,a("div",ms,[a("div",_s,u(e.item.ownerPhoneNumber),1)])])])):w("",!0)])])]),_:1})):(l(),p(v,{key:1},{default:i(()=>[n(E,null,{default:i(()=>[n(m,{type:"text",outline:"",label:"T\xEAn g\u1ECDi","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"20","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:e.item.ownerName,"onUpdate:value":t[0]||(t[0]=D=>e.item.ownerName=D)},null,8,["value"]),n(m,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1 cu\u1ED1i","error-message":"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1!",minlength:"6",maxlength:"11",validate:"",pattern:"[0-9]*","clear-button":"",value:e.item.ownerPhoneNumber,"onUpdate:value":t[1]||(t[1]=D=>e.item.ownerPhoneNumber=D)},null,8,["value"]),n(f,{fill:"",round:"",large:"",onClick:t[2]||(t[2]=D=>e.updateData())},{default:i(()=>[fs]),_:1})]),_:1})]),_:1}))]),_:1}),n(T,{class:"member-popup"},{default:i(()=>[n(B,null,{default:i(()=>[n(y,{title:"QRMember Th\xE0nh vi\xEAn"}),n(A,null,{default:i(()=>[n(k,null,{default:i(()=>[gs]),_:1}),n(E,{"no-hairlines-md":""},{default:i(()=>[n(m,{type:"text",outline:"",label:"T\xEAn g\u1ECDi","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"20","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:e.item.ownerName,"onUpdate:value":t[3]||(t[3]=D=>e.item.ownerName=D)},null,8,["value"]),n(m,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1 cu\u1ED1i","error-message":"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1!",minlength:"6",maxlength:"11",validate:"",pattern:"[0-9]*","clear-button":"",value:e.item.ownerPhoneNumber,"onUpdate:value":t[4]||(t[4]=D=>e.item.ownerPhoneNumber=D)},null,8,["value"]),n(m,{outline:"",type:"textarea",label:"\u0110\u1ECBa ch\u1EC9","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:e.item.ownerAddress,"onUpdate:value":t[5]||(t[5]=D=>e.item.ownerAddress=D)},null,8,["value"])]),_:1})]),_:1}),n(U,null,{default:i(()=>[n(_,{width:"40"},{default:i(()=>[n(f,{round:"",large:"",color:"gray","popup-close":""},{default:i(()=>[vs,bs]),_:1})]),_:1}),n(_,{width:"60"},{default:i(()=>[n(f,{fill:"",round:"",large:"",onClick:t[6]||(t[6]=D=>e.updateData())},{default:i(()=>[Es]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}var ys=q(is,[["render",Cs]]);const ks={},ws={class:"card card-expandable"},Ds=Qe('<div class="card-content"><div class="bg-color-red" style="height:300px;"><div class="card-header text-color-white display-block">Ti\xEAu chu\u1EA9n an to\xE0n th\xF4ng tin <br><small style="opacity:0.7;"> kh\xE1ch h\xE0ng an t\xE2m khi k\xEDch ho\u1EA1t v\xE0 s\u1EED d\u1EE5ng Th\u1EBB</small></div><a href="#" class="link card-close card-opened-fade-in color-white" style="position:absolute;right:15px;top:15px;"><i class="icon f7-icons">xmark_circle_fill</i></a></div><div class="card-content-padding"><p>Thu th\u1EADp \xEDt nh\u1EA5t c\xF3 th\u1EC3</p><p>1 ph\u1EA7n c\u1EE7a s\u1ED1 \u0111i\u1EC7n tho\u1EA1i (6 s\u1ED1 cu\u1ED1i) \u0111\u1EC3 \u0111\u1ED1i chi\u1EBFu qua QRCall ho\u1EB7c OTP khi c\u1EA7n</p><p>1. kh\xE1ch h\xE0ng cung c\u1EA5p s\u1ED1 \u0111i\u1EC7n tho\u1EA1i \u0111\u1EA7y \u0111\u1EE7, tr\xF9ng v\u1EDBi 6 s\u1ED1 \u0111\xE3 \u0111\u0103ng k\xFD</p><p>2. X\xE1c th\u1EF1c b\u1EB1ng c\xE1ch: - QRCall t\u1EDBi s\u1ED1 \u0111i\u1EC7n tho\u1EA1i n\xE0y ho\u1EB7c g\u1EEDi OTP \u0111\u1ED1i chi\u1EBFu 6 s\u1ED1 CMND/ CCCD</p><p>Cung c\u1EA5p s\u1ED1 \u0111i\u1EC7n tho\u1EA1i \u0111\u1EA7y \u0111\u1EE7 khi c\xF3 nhu c\u1EA7u QRCall</p><p>Th\u1EBB l\xE0 c\xE1ch x\xE1c th\u1EF1c tin c\u1EADy</p></div></div>',1),As=[Ds];function Ts(e,t){return l(),b("div",ws,As)}var Is=q(ks,[["render",Ts]]);const $s=V({emits:["updated"],props:{isView:Boolean,data:Object},computed:{isActive(){return!1},isEdit(){return this.isView}},watch:{data(e){e&&e.id&&(console.log("to update",this.data.ownerName),this.item={id:e.id,ownerName:e.ownerName||"",ownerPhoneNumber:e.ownerPhoneNumber||"",ownerAddress:e.ownerAddress||""})}},data(){return{item:{id:0,ownerName:"",ownerPhoneNumber:"",ownerAddress:""}}},methods:{updateData(){const e=this;this.$api.activeQRLoyalty(this.item.id,this.item).then(t=>{e.$emit("updated","DONE"),N.dialog.alert("C\u1EADp nh\u1EADt Th\xE0nh c\xF4ng"),N.popup.close()}).catch(t=>{e.$emit("updated","ERROR"),N.popup.close()})}}}),Us=r(" Th\xE0nh vi\xEAn th\xE2n thi\u1EBFt "),Rs=r("Edit"),Ss={class:"list media-list no-hairlines-between"},xs={class:"item-content"},Ns=a("div",{class:"item-media"},[a("i",{class:"f7-icons"},"person_fill")],-1),qs={class:"item-inner"},Ps={class:"item-title"},Bs={key:0},Qs={class:"item-content"},Ls=a("div",{class:"item-media"},[a("i",{class:"f7-icons"},"device_phone_portrait")],-1),Fs={class:"item-inner"},Os={class:"item-subtitle"},Vs={class:"item-content"},Ms=a("div",{class:"item-media"},[a("i",{class:"f7-icons"},"house")],-1),Hs={class:"item-inner"},Ks={class:"item-subtitle"},zs=a("p",null,"Ch\u01B0a c\xF3 th\xF4ng tin",-1),js=r("Danh x\u01B0ng c\u1EE7a kh\xE1ch h\xE0ng"),Ys=a("i",{class:"f7-icons"},"xmark_circle",-1),Gs=r("Cancel"),Ws=r("C\u1EADp nh\u1EADt");function Zs(e,t,d,h,o,c){const f=s("f7-button"),C=s("f7-card-header"),v=s("f7-card-content"),m=s("f7-card"),E=s("f7-navbar"),g=s("f7-block-title"),y=s("f7-list-input"),k=s("f7-list"),A=s("f7-block"),_=s("f7-col"),U=s("f7-row"),B=s("f7-page"),T=s("f7-popup");return l(),b(x,null,[n(m,null,{default:i(()=>[n(C,{"bg-color":"green"},{default:i(()=>[Us,!e.isActive&&e.isEdit?(l(),p(f,{key:0,"popup-open":".loyalty-popup"},{default:i(()=>[Rs]),_:1})):w("",!0)]),_:1}),e.item.ownerName?(l(),p(v,{key:0},{default:i(()=>[a("div",Ss,[a("ul",null,[a("li",null,[a("div",xs,[Ns,a("div",qs,[a("div",Ps,u(e.item.ownerName),1)])])]),e.item.ownerPhoneNumber?(l(),b("li",Bs,[a("div",Qs,[Ls,a("div",Fs,[a("div",Os,u(e.item.ownerPhoneNumber),1)])])])):w("",!0),a("li",null,[a("div",Vs,[Ms,a("div",Hs,[a("div",Ks,u(e.item.ownerAddress),1)])])])])])]),_:1})):(l(),p(v,{key:1},{default:i(()=>[zs]),_:1}))]),_:1}),n(T,{class:"loyalty-popup"},{default:i(()=>[n(B,null,{default:i(()=>[n(E,{title:"QRLoyalty: Th\xE0nh vi\xEAn th\xE2n thi\u1EBFt"}),n(A,null,{default:i(()=>[n(g,null,{default:i(()=>[js]),_:1}),n(k,{"no-hairlines-md":""},{default:i(()=>[n(y,{type:"text",outline:"",label:"T\xEAn g\u1ECDi","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"20","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:e.item.ownerName,"onUpdate:value":t[0]||(t[0]=D=>e.item.ownerName=D)},null,8,["value"]),n(y,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp \u0111\u1EC3 ti\u1EC7n li\xEAn h\u1EC7","error-message":"h\xE3y nh\u1EADp \u0111\u1EE7 10 s\u1ED1!",minlength:"10",maxlength:"11",validate:"",pattern:"[0-9]*","clear-button":"",value:e.item.ownerPhoneNumber,"onUpdate:value":t[1]||(t[1]=D=>e.item.ownerPhoneNumber=D)},null,8,["value"]),n(y,{outline:"",type:"textarea",label:"\u0110\u1ECBa ch\u1EC9","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:e.item.ownerAddress,"onUpdate:value":t[2]||(t[2]=D=>e.item.ownerAddress=D)},null,8,["value"])]),_:1})]),_:1}),n(U,null,{default:i(()=>[n(_,{width:"40"},{default:i(()=>[n(f,{round:"",large:"",color:"gray","popup-close":""},{default:i(()=>[Ys,Gs]),_:1})]),_:1}),n(_,{width:"60"},{default:i(()=>[n(f,{fill:"",round:"",large:"",onClick:t[3]||(t[3]=D=>e.updateData())},{default:i(()=>[Ws]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Xs=q($s,[["render",Zs]]);V({name:"CUSTOMER_MEMBER",components:{supporter:Ee,Member:ys,MemberPrivacy:Is,loyalty:Xs},props:{f7route:Object,f7router:Object},data(){return{rs:{}}},computed:{isActive(){return!1}},methods:{updatedMember(e){console.log("updatedMember()",e)},updatedLoyalty(e){console.log("updatedLoyalty()",e)},async getDeviceData(){var e=this.f7route.params.id,t=this.f7route.params.privateCode;let d=await this.$api.getLifecycle(e,t);console.log("rs",d),this.rs=d}},async created(){await Promise.all([this.getDeviceData()])}});const Js=V({emits:["updated"],props:{isView:Boolean,data:Object},computed:{isActive(){return!1},isEdit(){return!this.isView&&this.item.id>0}},watch:{data(e){e&&e.id&&(console.log("to update",this.data.ownerName),this.item={id:e.id,ownerId:e.ownerId,ownerName:e.ownerName||"",ownerPhoneNumber:e.ownerPhoneNumber||"",ownerAddress:e.ownerAddress||""})}},data(){return{selectedUserId:0,item:{},users:[{fullName:"H\u1ECD t\xEAn c\u1EE7a: S888.2",roleCode:"SALE",phoneNumber:null,username:"S888.2",id:172},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.3",roleCode:"WORKER",phoneNumber:null,username:"888.3",id:173},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.4",roleCode:"WORKER",phoneNumber:null,username:"888.4",id:174},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.5",roleCode:"WORKER",phoneNumber:null,username:"888.5",id:175},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.6",roleCode:"WORKER",phoneNumber:null,username:"888.6",id:176},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.7",roleCode:"WORKER",phoneNumber:null,username:"888.7",id:177},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.8",roleCode:"WORKER",phoneNumber:null,username:"888.8",id:178},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.9",roleCode:"WORKER",phoneNumber:null,username:"888.9",id:179},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.10",roleCode:"WORKER",phoneNumber:null,username:"888.10",id:180}]}},methods:{updateData(){const e=this;this.item,this.$api.activeQRMember(this.item.id,this.item).then(t=>{e.$emit("updated","DONE"),N.dialog.alert("C\u1EADp nh\u1EADt Th\xE0nh c\xF4ng")}).catch(t=>{e.$emit("updated","ERROR"),N.dialog.alert("C\u1EADp nh\u1EADt b\u1ECB l\u1ED7i")})}},mounted(){}}),el=r("Edit"),tl={class:"list media-list no-hairlines-between"},nl={class:"item-content"},il=a("div",{class:"item-media"},[a("i",{class:"f7-icons"},"person_fill")],-1),al={class:"item-inner"},ol={class:"item-title"},sl={class:"item-content"},ll=a("div",{class:"item-media"},[a("i",{class:"f7-icons"},"device_phone_portrait")],-1),rl={class:"item-inner"},dl={class:"item-subtitle"},cl={class:"item-content"},ul=a("div",{class:"item-media"},[a("i",{class:"f7-icons"},"house")],-1),hl={class:"item-inner"},pl={class:"item-subtitle"},ml={class:"list"},_l=a("option",{disabled:"",value:""},"Please select one",-1),fl=["selected","value"],gl=r("K\xEDch ho\u1EA1t"),vl=r("Danh x\u01B0ng"),bl=a("i",{class:"f7-icons"},"xmark_circle",-1),El=r("Cancel"),Cl=r("C\u1EADp nh\u1EADt");function yl(e,t,d,h,o,c){const f=s("f7-button"),C=s("f7-card-header"),v=s("f7-card-content"),m=s("f7-list-input"),E=s("f7-list"),g=s("f7-card"),y=s("f7-navbar"),k=s("f7-block-title"),A=s("f7-block"),_=s("f7-col"),U=s("f7-row"),B=s("f7-page"),T=s("f7-popup");return l(),b(x,null,[n(g,null,{default:i(()=>[n(C,{"bg-color":"green"},{default:i(()=>[r(" Th\xE0nh vi\xEAn "+u(e.data.ownerId)+" ",1),n(f,{"popup-open":".member-popup"},{default:i(()=>[el]),_:1})]),_:1}),e.data.ownerId>0?(l(),p(v,{key:0},{default:i(()=>[a("div",tl,[a("ul",null,[a("li",null,[a("div",nl,[il,a("div",al,[a("div",ol,u(e.item.ownerName),1)])])]),a("li",null,[a("div",sl,[ll,a("div",rl,[a("div",dl,u(e.item.ownerPhoneNumber||"Ch\u01B0a c\u1EADp nh\u1EADt"),1)])])]),a("li",null,[a("div",cl,[ul,a("div",hl,[a("div",pl,u(e.item.ownerAddress||"Ch\u01B0a c\u1EADp nh\u1EADt"),1)])])])])])]),_:1})):(l(),p(v,{key:1},{default:i(()=>[a("div",ml,[a("ul",null,[a("li",null,[F(a("select",{class:"item-content","onUpdate:modelValue":t[0]||(t[0]=D=>e.selectedUserId=D)},[_l,(l(!0),b(x,null,L(e.users,D=>(l(),b("option",{key:D.id,selected:D.id==e.selectedUserId,value:D.id},u(D.fullName),9,fl))),128))],512),[[me,e.selectedUserId]])])])]),e.selectedUserId>0?(l(),p(E,{key:0},{default:i(()=>[n(m,{type:"text",outline:"",label:"T\xEAn g\u1ECDi","floating-label":"",placeholder:"danh x\u01B0ng ",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"20","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:e.item.ownerName,"onUpdate:value":t[1]||(t[1]=D=>e.item.ownerName=D)},null,8,["value"]),n(m,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1 cu\u1ED1i","error-message":"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1!",minlength:"6",maxlength:"11",validate:"",pattern:"[0-9]*","clear-button":"",value:e.item.ownerPhoneNumber,"onUpdate:value":t[2]||(t[2]=D=>e.item.ownerPhoneNumber=D)},null,8,["value"]),n(f,{fill:"",round:"",large:"",onClick:t[3]||(t[3]=D=>e.updateData())},{default:i(()=>[gl]),_:1})]),_:1})):w("",!0)]),_:1}))]),_:1}),n(T,{class:"member-popup"},{default:i(()=>[n(B,null,{default:i(()=>[n(y,{title:"QRMember Th\xE0nh vi\xEAn"}),n(A,null,{default:i(()=>[n(k,null,{default:i(()=>[vl]),_:1}),n(E,{"no-hairlines-md":""},{default:i(()=>[n(m,{type:"text",outline:"",label:"T\xEAn g\u1ECDi","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"20","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:e.item.ownerName,"onUpdate:value":t[4]||(t[4]=D=>e.item.ownerName=D)},null,8,["value"]),n(m,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1 cu\u1ED1i","error-message":"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1!",minlength:"6",maxlength:"11",validate:"",pattern:"[0-9]*","clear-button":"",value:e.item.ownerPhoneNumber,"onUpdate:value":t[5]||(t[5]=D=>e.item.ownerPhoneNumber=D)},null,8,["value"]),n(m,{outline:"",type:"textarea",label:"\u0110\u1ECBa ch\u1EC9","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:e.item.ownerAddress,"onUpdate:value":t[6]||(t[6]=D=>e.item.ownerAddress=D)},null,8,["value"])]),_:1})]),_:1}),n(U,null,{default:i(()=>[n(_,{width:"40"},{default:i(()=>[n(f,{round:"",large:"",color:"gray","popup-close":""},{default:i(()=>[bl,El]),_:1})]),_:1}),n(_,{width:"60"},{default:i(()=>[n(f,{fill:"",round:"",large:"",onClick:t[7]||(t[7]=D=>e.updateData())},{default:i(()=>[Cl]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}var De=q(Js,[["render",yl]]);const kl={emits:["selected"],setup(){},data(){return{orgs:[],selectedUser:0,users:[{fullName:"H\u1ECD t\xEAn c\u1EE7a: S888.2",roleCode:"SALE",phoneNumber:null,username:"S888.2",id:172},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.3",roleCode:"WORKER",phoneNumber:null,username:"888.3",id:173},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.4",roleCode:"WORKER",phoneNumber:null,username:"888.4",id:174},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.5",roleCode:"WORKER",phoneNumber:null,username:"888.5",id:175},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.6",roleCode:"WORKER",phoneNumber:null,username:"888.6",id:176},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.7",roleCode:"WORKER",phoneNumber:null,username:"888.7",id:177},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.8",roleCode:"WORKER",phoneNumber:null,username:"888.8",id:178},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.9",roleCode:"WORKER",phoneNumber:null,username:"888.9",id:179},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.10",roleCode:"WORKER",phoneNumber:null,username:"888.10",id:180}]}},computed:{},methods:{getUser(e){this.users.forEach(t=>{if(console.log(t.id,e),t.id===e)return console.log(t),t})}},watch:{selectedUser(e){if(e){console.log("selected",e);let t=this.getUser(e);this.$emit("selected",t)}}}},wl={class:"list"},Dl=a("li",null,null,-1),Al={class:"item-link smart-select smart-select-init","data-open-in":"popup","data-searchbar":"true","data-searchbar-placeholder":"Search users"},Tl=["value"],Il=a("div",{class:"item-content"},[a("div",{class:"item-inner"},[a("div",{class:"item-title"},"Users")])],-1);function $l(e,t,d,h,o,c){return l(),b("div",wl,[a("ul",null,[Dl,a("li",null,[a("a",Al,[F(a("select",{name:"car","onUpdate:modelValue":t[0]||(t[0]=f=>o.selectedUser=f)},[(l(!0),b(x,null,L(o.users,f=>(l(),b("option",{key:f.id,value:f.id},u(f.fullName),9,Tl))),128))],512),[[me,o.selectedUser]]),Il])])])])}var Ae=q(kl,[["render",$l]]);const Ul={name:"QRCUSTOMER",components:{Sale:De,User:Ae},props:{f7route:Object,f7router:Object},setup(){},data(){let e=[{qrUrl:"/m/100010010960002/i/529/p/3031"},{qrUrl:"/m/100010010960002/i/530/p/8117"},{qrUrl:"/m/100010010960002/i/531/p/9741"}],t={id:100010010970001,packageId:"10001001097",private:42743589,cardType:"CARD_TYPE.QRSALE",phase:"MANAGER",title:"Th\u1EBB c\u1ED9ng t\xE1c vi\xEAn",description:"",imageUrls:["https://apps.vinaas.com/file/qRa7o3Xw9"],productId:0,activatedDate:"2021-12-03T04:13:39.602Z",endDate:"2021-12-03T04:13:39.602Z",deviceMetadata:{index:577,pdfUrl:"qrcustomer_1638520256647.pdf",pdfUrls:["qrcustomer_1638520011773.pdf","qrcustomer_1638520256647.pdf"]},ownerName:"GENKI GYM",ownerAddress:"187-189 Tr\u1EA7n Th\u1ECB C\u1EDD, P Th\u1EDBi An, Q.12",ownerPhoneNumber:"0906.836.977",ownerId:180,ownerOrganizationId:888,ownerMetadata:{from:0,to:1e3},sellerName:"Thanh Hoang Sport",sellerAddress:"Quan 12, Tp HCM",supportId:111,status:"ACTIVE",created:"2021-12-03T04:13:39.602Z",createdBy:0,modified:"2021-12-03T04:13:39.602Z",modifiedBy:0,metadata:{discount:{enable:!1,title:"",content:""},introduction:{enable:!1,title:"",content:""},quotation:{enable:!1,title:"",content:""},qrcall:{enable:!0,title:"G\u1ECDi l\u1EA1i cho t\xF4i",name:"Quang",phoneNumber:"02800224088",workTime:"gi\u1EDD h\xE0nh ch\xEDnh"},call:{enable:!0,title:"G\u1ECDi ch\xFAng t\xF4i",phoneNumber:""}}};return{item:t,customer:{qrUrl:"",name:"",status:"CREATED",history:[]},fix:t,qrUrls:e}},computed:{background(){if(this.item.imageUrls)return this.item.imageUrls[0]||""},voucherContent(){return this.item.metadata&&this.item.metadata.VoucherContent||""}},methods:{async clickCall(e){console.log("clickCall",e),e&&(window.location="tel:"+e),this.customer.history.unshift({type:"CALL",date:new Date().toISOString()})},async getDeviceData(){var e=this.f7route.params.id,t=this.f7route.params.privateCode;let d=await this.$api.getQRID(e,t);console.log("rs",d),this.item=d,this.item.metadata.introduction||(this.item.metadata.introduction={enable:!1,title:"",content:""}),this.item.metadata.discount||(this.item.metadata.discount={enable:!1,title:"",content:""}),this.item.metadata.quotation||(this.item.metadata.quotation={enable:!1,title:"",content:""}),this.item.metadata.call||(this.item.metadata.call={enable:!1,title:"",phoneNumber:""}),this.item.metadata.qrcall||(this.item.metadata.qrcall={enable:!1,title:"G\u1ECDi l\u1EA1i cho t\xF4i",name:"Quang",phoneNumber:"",workTime:""})},async getCustomerData(){let e=await this.$api.scanQRCustomer(this.f7route.params.id,this.f7route.params.index,this.f7route.params.privateCode);this.customer=e,console.log("%cqrcustomer.vue line:253 object","color: #007acc;",this.customer.history)},toQRCustomer(e){this.f7router.navigate(e.qrUrl)},selectedUser(e){console.log("selectedUser()",e)},updateItem(e){}},async mounted(){await this.getDeviceData(),await this.getCustomerData()}},Rl={class:"content",style:{"padding-bottom":"70px"}},Sl={class:"card demo-card-header-pic"},xl={class:"card-content card-content-padding"},Nl={class:"card-footer"},ql={href:"#",class:"link"},Pl=r("\u01AFu \u0111\xE3i khi s\u1EED d\u1EE5ng Th\u1EBB"),Bl=["innerHTML"],Ql=["innerHTML"],Ll=["innerHTML"],Fl=["innerHTML"],Ol=r("Th\u1EBB Kh\xE1ch h\xE0ng v1.4"),Vl=a("div",null,"L\u1ECBch s\u1EED t\u01B0\u01A1ng t\xE1c",-1);function Ml(e,t,d,h,o,c){const f=s("f7-icon"),C=s("f7-fab"),v=s("f7-card-header"),m=s("f7-card-content"),E=s("f7-card"),g=s("f7-page");return l(),p(g,{"no-navbar":!0},{default:i(()=>[o.item.metadata.call.enable?(l(),p(C,{key:0,onClick:t[0]||(t[0]=y=>c.clickCall(o.item.metadata.call.phoneNumber)),class:"style-call",position:"center-bottom",text:o.item.metadata.call.title,color:"red"},{default:i(()=>[n(f,{f7:"phone_fill"})]),_:1},8,["text"])):w("",!0),o.item.metadata.qrcall.enable?(l(),p(C,{key:1,class:"style-call",position:"center-bottom",text:o.item.metadata.qrcall.title,color:"red"},{default:i(()=>[n(f,{f7:"phone_fill"})]),_:1},8,["text"])):w("",!0),a("div",Rl,[a("div",Sl,[a("div",{style:Le("background-image:url("+c.background+")"),class:"card-header align-items-flex-end"},u(o.item.ownerName),5),a("div",xl,[a("p",null,"\u0110\u1ECBa ch\u1EC9: "+u(o.item.ownerAddress),1)]),a("div",Nl,[a("a",ql,u(o.item.ownerPhoneNumber),1)])]),c.voucherContent?(l(),p(E,{key:0},{default:i(()=>[n(v,{"bg-color":"green"},{default:i(()=>[Pl]),_:1}),n(m,null,{default:i(()=>[a("div",{innerHTML:c.voucherContent},null,8,Bl)]),_:1})]),_:1})):w("",!0),o.item.metadata.introduction.enable?(l(),p(E,{key:1},{default:i(()=>[n(v,{"bg-color":"green",innerHTML:o.item.metadata.introduction.title},null,8,["innerHTML"]),n(m,null,{default:i(()=>[a("div",{innerHTML:o.item.metadata.introduction.content},null,8,Ql)]),_:1})]),_:1})):w("",!0),o.item.metadata.discount.enable?(l(),p(E,{key:2},{default:i(()=>[n(v,{"bg-color":"green",innerHTML:o.item.metadata.discount.title},null,8,["innerHTML"]),n(m,null,{default:i(()=>[a("div",{innerHTML:o.item.metadata.discount.content},null,8,Ll)]),_:1})]),_:1})):w("",!0),o.item.metadata.quotation.enable?(l(),p(E,{key:3},{default:i(()=>[n(v,{"bg-color":"green",innerHTML:o.item.metadata.quotation.title},null,8,["innerHTML"]),n(m,null,{default:i(()=>[a("div",{innerHTML:o.item.metadata.quotation.content},null,8,Fl)]),_:1})]),_:1})):w("",!0),n(E,null,{default:i(()=>[n(v,null,{default:i(()=>[Ol]),_:1}),n(m,null,{default:i(()=>[Vl,a("ul",null,[(l(!0),b(x,null,L(o.customer.history.slice(0,10),y=>(l(),b("li",{key:y},u(e.$utils.formatDateTime(y.date))+" : "+u(y.type=="SCAN"?"Qu\xE9t th\u1EBB":y.type),1))),128))])]),_:1})]),_:1})])]),_:1})}var Hl=q(Ul,[["render",Ml]]);const Kl={name:"QRSALE",components:{Sale:De,User:Ae},props:{f7route:Object,f7router:Object},setup(){},data(){let e={id:100010010960001,title:"Th\u1EBB Gi\xE1m s\xE1t (L\u1EDBp tr\u01B0\u1EDFng)",description:"D\xE0nh cho l\u1EDBp tr\u01B0\u1EDFng: 1 Th\u1EBB",imageUrls:[],productId:0,ownerName:"A B\u1EA3o",ownerAddress:"11 Dtp, Tan Phu",ownerPhoneNumber:"02822004088",ownerId:180,ownerOrganizationId:888,deviceMetadata:{start:1,index:577,pdfUrl:"qrcustomer_1638520256647.pdf",pdfUrls:["qrcustomer_1638520011773.pdf","qrcustomer_1638520256647.pdf"]},ownerMetadata:{enable:!0,qrid:"100010010960001",from:0,to:577,list:["m/100010010960003/i/1/p/30","m/100010010960003/i/2/p/11"]},supportId:111,status:"ACTIVE",metadata:{discount:{enable:!0,title:"\u01AFu \u0111\xE3i khi s\u1EED d\u1EE5ng th\u1EBB n\xE0y",content:"N\u1ED9i dung \u01B0u \u0111\xE3i"},introduction:{enable:!1,title:"Gi\u1EDBi thi\u1EC7u v\u1EC1 s\u1EA3n ph\u1EA9m, d\u1ECBch v\u1EE5",content:"N\u1ED9i dung"},quotation:{enable:!1,title:"B\u1EA3ng gi\xE1 s\u1EA3n ph\u1EA9m, d\u1ECBch v\u1EE5",content:"N\u1ED9i dung b\u1EA3ng gi\xE1"},qrcall:{enable:!0,title:"",phoneNumber:"02800224088",workTime:""}}};return{item:e,fix:e,customers:[],paidCustomers:[],customValue:""}},watch:{imageUrl(e){this.item.imageUrls[0]=e,console.log(this.item.imageUrls)},customValue(e){this.item.metadata?this.item.metadata.VoucherContent=this.customValue:this.item.metadata={VoucherContent:this.customValue}}},computed:{idFrom(){if(this.item.ownerMetadata.qrid&&this.item.ownerMetadata.from){let e=this.item.ownerMetadata.qrid.slice(8),t=this.item.ownerMetadata.from;return`${e}.${t}`}else return""},idTo(){},discount(){return this.metadata&&this.metadata.discount?this.metadata.discount:{enable:!1}}},methods:{actionText(e){var t=e.status!="PAID"?"Qu\xE9t Th\u1EBB":"\u0110\xE3 mua";return e.name+" "+t},idText(e){return e.substring(9)},async getQRCustomer(){var e=this.f7route.params.id,t=this.f7route.params.privateCode;this.customers=await this.$api.getQRCustomerBySale(e,t),this.paidCustomers=this.customers.filter(d=>d.status=="PAID"),console.log("sorted"),this.customers.sort((d,h)=>new Date(h.modified)-new Date(d.modified))},async getDeviceData(){var e=this.f7route.params.id,t=this.f7route.params.privateCode;let d=await this.$api.getQRID(e,t);this.item=d;const h=d.ownerMetadata;console.log("meta",h),await this.getQRCustomer(),this.item.ownerMetadata&&this.item.ownerMetadata.qrid||(this.item.ownerMetadata={enable:!0,qrid:"100010010970001",from:1,to:100}),this.item.metadata||(this.item.metadata={}),this.item.imageUrls&&(this.imageUrl=this.item.imageUrls[0])},async active(){var e=this.f7route.params.id,t=this.f7route.params.privateCode;this.item.status="QRID_STATUS.ACTIVE",await this.$api.updateQRSaleInfo(e,this.item,t),N.dialog.alert("SUCCESS active()")},async updateData(){var e=this.f7route.params.id,t=this.f7route.params.privateCode;console.log("updateData()",this.item),await this.$api.updateQRSaleInfo(e,this.item,t),N.dialog.alert("SUCCESS updateData()")},toQRCustomer(e){this.f7router.navigate(e.qrUrl)},selectedUser(e){console.log("selectedUser()",e)},updateItem(e){}},async mounted(){let e=this.f7route.params.id.toString().slice(11);var t=parseInt(e);this.$utils.qrid_index(this.f7route.params.id)>=10?(console.log("num_last_4",t,e),await this.getDeviceData()):(N.dialog.alert("ID kh\xF4ng h\u1EE3p l\u1EC7, v\u1EC1 trang ch\u1EE7"),this.f7router.navigate("HomePage"))}},zl=r("Th\u1EBB c\u1ED9ng t\xE1c"),jl={class:"content"},Yl=r("Th\xF4ng tin b\xEAn c\u1ED9ng t\xE1c"),Gl=r("Th\u1EBB \u0111\xE3 \u0111\u0103ng k\xFD (mua h\xE0ng)"),Wl=r("Th\u1EBB c\xF3 ho\u1EA1t \u0111\u1ED9ng g\u1EA7n \u0111\xE2y"),Zl=r("C\u1EADp nh\u1EADt"),Xl=r("Thi\u1EBFt l\u1EADp Leader (T\u1ED5 tr\u01B0\u1EDFng)"),Jl=r("Update"),er=r(" Active");function tr(e,t,d,h,o,c){const f=s("f7-nav-title"),C=s("f7-navbar"),v=s("f7-card-header"),m=s("f7-list-input"),E=s("f7-list"),g=s("f7-card"),y=s("f7-list-item"),k=s("f7-button"),A=s("f7-card-footer"),_=s("f7-col"),U=s("f7-row"),B=s("f7-page");return l(),p(B,null,{default:i(()=>[n(C,{sliding:!1},{default:i(()=>[n(f,{sliding:""},{default:i(()=>[zl]),_:1})]),_:1}),a("div",jl,[n(g,null,{default:i(()=>[n(v,null,{default:i(()=>[Yl]),_:1}),n(E,{"no-hairlines-md":""},{default:i(()=>[n(m,{type:"text",outline:"",label:"T\xEAn g\u1ECDi","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"20","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:o.item.ownerName,"onUpdate:value":t[0]||(t[0]=T=>o.item.ownerName=T)},null,8,["value"]),n(m,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1 cu\u1ED1i",pattern:"[0-9]*","clear-button":"",value:o.item.ownerPhoneNumber,"onUpdate:value":t[1]||(t[1]=T=>o.item.ownerPhoneNumber=T)},null,8,["value"]),n(m,{outline:"",type:"textarea",label:"T\xE0i kho\u1EA3n ng\xE2n h\xE0ng",placeholder:"T\xEAn ng\xE2n h\xE0ng, chi nh\xE1nh, s\u1ED1 t\xE0i kho\u1EA3n","floating-label":"",maxlength:"300","clear-button":"",value:o.item.description,"onUpdate:value":t[2]||(t[2]=T=>o.item.description=T)},null,8,["value"])]),_:1})]),_:1}),o.item.status=="QRID_STATUS.ACTIVE"?(l(),p(g,{key:0},{default:i(()=>[n(v,{"bg-color":"green"},{default:i(()=>[Gl]),_:1}),n(E,{"no-hairlines-md":"","media-list":""},{default:i(()=>[(l(!0),b(x,null,L(o.paidCustomers,T=>(l(),p(y,{key:T.qrUrl,header:e.$utils.formatDateTime(T.modified),title:T.name||"Ch\u01B0a c\u1EADp nh\u1EADt",subtitle:"Id: "+c.idText(T.qrUrl)},null,8,["header","title","subtitle"]))),128))]),_:1})]),_:1})):w("",!0),o.item.status=="QRID_STATUS.ACTIVE"?(l(),p(g,{key:1},{default:i(()=>[n(v,{"bg-color":"blue"},{default:i(()=>[Wl]),_:1}),n(E,{"no-hairlines-md":"","media-list":""},{default:i(()=>[(l(!0),b(x,null,L(o.customers,T=>(l(),p(y,{key:T.qrUrl,header:e.$utils.formatDateTime(T.modified),title:"Id: "+c.idText(T.qrUrl),subtitle:c.actionText(T)},null,8,["header","title","subtitle"]))),128))]),_:1}),n(A,null,{default:i(()=>[n(k,{rounded:"",fill:"",onClick:t[3]||(t[3]=T=>c.getQRCustomer())},{default:i(()=>[Zl]),_:1})]),_:1})]),_:1})):w("",!0),o.item.status!="QRID_STATUS.ACTIVE"?(l(),p(g,{key:2},{default:i(()=>[n(v,null,{default:i(()=>[Xl]),_:1}),o.item.status!="QRID_STATUS.ACTIVE"?(l(),p(E,{key:0,"no-hairlines-md":""},{default:i(()=>[n(m,{outline:"",label:"QRID","floating-label":"",type:"text",placeholder:"",pattern:"[0-9]*","clear-button":"",value:o.item.ownerMetadata.qrid,"onUpdate:value":t[4]||(t[4]=T=>o.item.ownerMetadata.qrid=T)},null,8,["value"]),n(m,{outline:"",label:"B\u1EAFt \u0111\u1EA7u","floating-label":"",type:"text",placeholder:"",pattern:"[0-9]*","clear-button":"",value:o.item.ownerMetadata.from,"onUpdate:value":t[5]||(t[5]=T=>o.item.ownerMetadata.from=T)},null,8,["value"]),n(m,{outline:"",label:"K\u1EBFt th\xFAc","floating-label":"",type:"text",placeholder:"",pattern:"[0-9]*","clear-button":"",value:o.item.ownerMetadata.to,"onUpdate:value":t[6]||(t[6]=T=>o.item.ownerMetadata.to=T)},null,8,["value"])]),_:1})):w("",!0)]),_:1})):(l(),p(g,{key:3},{default:i(()=>[n(v,null,{default:i(()=>[r("Th\u1EBB \u0111\u01B0\u1EE3c c\u1EA5p ("+u(o.item.ownerMetadata.to-o.item.ownerMetadata.from+1)+" th\u1EBB)",1)]),_:1}),n(E,{"no-hairlines-md":""},{default:i(()=>[n(y,null,{default:i(()=>[r("B\u1EAFt \u0111\u1EA7u: "+u(o.item.ownerMetadata.from),1)]),_:1}),n(y,null,{default:i(()=>[r(" K\u1EBFt th\xFAc: "+u(o.item.ownerMetadata.to),1)]),_:1})]),_:1})]),_:1})),n(U,null,{default:i(()=>[n(_,{width:"40"},{default:i(()=>[n(k,{fill:"",round:"",large:"",onClick:t[7]||(t[7]=T=>c.updateData())},{default:i(()=>[Jl]),_:1})]),_:1}),o.item.status=="QRID_STATUS.GENERATED"?(l(),p(_,{key:0,width:"40"},{default:i(()=>[n(k,{fill:"",round:"",large:"",color:"red",onClick:t[8]||(t[8]=T=>c.active())},{default:i(()=>[er]),_:1})]),_:1})):w("",!0)]),_:1})])]),_:1})}var nr=q(Kl,[["render",tr]]);const ir=V({props:{qrid:Number,privateCode:String,isSetup:{type:Boolean,defaut:!1}},components:{},data(){return{isLoading:!1,filter:{skip:0,limit:10},enablePopup:!1,selectedId:0,data:{},customers:[]}},watch:{id:"loadData"},methods:{idText(e){return e.substring(9)},async getQRCustomer(){this.qrid>0&&(this.customers=await this.$api.getQRCustomers(this.qrid,this.privateCode),console.log("sorted"))},async loadData(){this.qrid>0&&(this.isLoading=!0,await this.getQRCustomer(),this.isLoading=!1)}},async mounted(){this.loadData()}}),ar=r("T\u01B0\u01A1ng t\xE1c m\u1EDBi nh\u1EA5t t\u1EEB kh\xE1ch h\xE0ng "),or={class:"list media-list medium-inset"},sr=["onClick"],lr={class:"item-inner"},rr={class:"item-header"},dr={class:"item-title-row"},cr={style:{"font-size":"16px"}},ur=a("div",{class:"item-after"},null,-1),hr={class:"item-subtitle"},pr={class:"item-text"},mr=r("C\u1EADp nh\u1EADt");function _r(e,t,d,h,o,c){const f=s("f7-preloader"),C=s("f7-card-header"),v=s("f7-button"),m=s("f7-card-footer"),E=s("f7-card"),g=s("activity"),y=s("f7-popup");return l(),b(x,null,[n(E,null,{default:i(()=>[n(C,{"bg-color":"blue"},{default:i(()=>[ar,F(n(f,null,null,512),[[H,e.isLoading]])]),_:1}),a("div",or,[a("ul",null,[(l(!0),b(x,null,L(e.customers,k=>(l(),b("li",{key:k.id},[a("a",{onClick:A=>e.clickViewActivity(k),class:"item-link item-content chevron-center"},[a("div",lr,[a("div",rr,u(e.$utils.formatDateTime(k.modified)),1),a("div",dr,[a("div",cr,u(e.idText(k.qrUrl)),1),ur]),a("div",hr,u(k.name),1),a("div",pr,u(k.status=="CREATED"?"Qu\xE9t Th\u1EBB":k.status),1)])],8,sr)]))),128))])]),n(m,null,{default:i(()=>[n(v,{rounded:"",fill:"",onClick:t[0]||(t[0]=k=>e.getQRCustomer())},{default:i(()=>[mr]),_:1})]),_:1})]),_:1}),n(y,{id:"view-activity",opened:e.enablePopup,"onUpdate:opened":t[1]||(t[1]=k=>e.enablePopup=k)},{default:i(()=>[n(g,{id:e.selectedId},null,8,["id"])]),_:1},8,["opened"])],64)}var Te=q(ir,[["render",_r]]);const fr={name:"QRSALE",components:{ListPeople:Te},props:{f7route:Object,f7router:Object},setup(){},data(){let e=[{qrUrl:"/m/100010010960002/i/529/p/3031"},{qrUrl:"/m/100010010960002/i/530/p/8117"},{qrUrl:"/m/100010010960002/i/531/p/9741"}],t={id:100010010960001,title:"Th\u1EBB Gi\xE1m s\xE1t (L\u1EDBp tr\u01B0\u1EDFng)",description:"D\xE0nh cho l\u1EDBp tr\u01B0\u1EDFng: 1 Th\u1EBB",imageUrls:[],productId:0,ownerName:"QRCare Vi\u1EC7t Nam",ownerAddress:"11 Dtp, Tan Phu",ownerPhoneNumber:"02822004088",ownerId:180,ownerOrganizationId:888,deviceMetadata:{start:1,index:577,pdfUrl:"qrcustomer_1638520256647.pdf",pdfUrls:["qrcustomer_1638520011773.pdf","qrcustomer_1638520256647.pdf"]},ownerMetadata:{enable:!0,qrid:"100010010960001",from:0,to:577,list:["m/100010010960003/i/1/p/30","m/100010010960003/i/2/p/11"]},supportId:111,status:"ACTIVE",metadata:{discount:{enable:!0,title:"\u01AFu \u0111\xE3i khi s\u1EED d\u1EE5ng th\u1EBB n\xE0y",content:"N\u1ED9i dung \u01B0u \u0111\xE3i"},introduction:{enable:!1,title:"Gi\u1EDBi thi\u1EC7u v\u1EC1 s\u1EA3n ph\u1EA9m, d\u1ECBch v\u1EE5",content:"N\u1ED9i dung"},quotation:{enable:!1,title:"B\u1EA3ng gi\xE1 s\u1EA3n ph\u1EA9m, d\u1ECBch v\u1EE5",content:"N\u1ED9i dung b\u1EA3ng gi\xE1"},qrcall:{enable:!0,title:"G\u1ECDi l\u1EA1i cho t\xF4i",name:"Quang",phoneNumber:"02800224088",workTime:"gi\u1EDD h\xE0nh ch\xEDnh"},call:{enable:!0,title:"G\u1ECDi ch\xFAng t\xF4i",phoneNumber:"02800224088"}}};return{qrid:this.f7route.params.id,privateCode:this.f7route.params.privateCode,item:t,fix:t,qrUrls:e,imageUrl:"https://apps.vinaas.com/file/OmEkiJOFm",customValue:""}},watch:{imageUrl(e){this.item.imageUrls[0]=e,console.log(this.item.imageUrls)},customValue(e){this.item.metadata?this.item.metadata.VoucherContent=this.customValue:this.item.metadata={VoucherContent:this.customValue}}},computed:{discount(){return this.metadata&&this.metadata.discount?this.metadata.discount:{enable:!1}}},methods:{async getDeviceData(){var e=this.f7route.params.id,t=this.f7route.params.privateCode;let d=await this.$api.getQRID(e,t);d&&(console.log("rs",d),this.item=d,this.item.metadata||(this.item.metadata={}),this.item.metadata.introduction||(this.item.metadata.introduction={enable:!1,title:"",content:""}),this.item.metadata.discount||(this.item.metadata.discount={enable:!1,title:"",content:""}),this.item.metadata.quotation||(this.item.metadata.quotation={enable:!1,title:"",content:""}),this.item.metadata.call||(this.item.metadata.call={enable:!1,phoneNumber:"02800224088"}),this.item.imageUrls&&(this.imageUrl=this.item.imageUrls[0]))},async updateData(){var e=this.f7route.params.id,t=this.f7route.params.privateCode;console.log("updateData()",this.item);let d=await this.$api.updateQRSaleInfo(e,this.item,t);console.log("rs",d),N.dialog.alert("SUCCESS updateData()")},toQRCustomer(e){this.f7router.navigate(e.qrUrl)},selectedUser(e){console.log("selectedUser()",e)},updateItem(e){}},async mounted(){await this.getDeviceData()}},gr=r("Th\u1EBB Thi\u1EBFt l\u1EADp"),vr={class:"content"},br=r("Th\xF4ng tin c\xF4ng ty (c\xE1 nh\xE2n)"),Er={key:0,class:"item-content"},Cr={class:"item-media"},yr=["src"],kr=a("div",{class:"item-inner"},[a("div",{class:"item-title-row"})],-1),wr=r("Hi\u1EC3n th\u1ECB Ph\u1EA7n gi\u1EDBi thi\u1EC7u"),Dr=r("Content show to customer"),Ar=r("Hi\u1EC3n th\u1ECB M\u1EE5c Khuy\u1EBFn m\xE3i "),Tr=r("Content show to customer"),Ir=r("Hi\u1EC3n th\u1ECB B\u1EA3ng gi\xE1 "),$r=r("Content show to customer"),Ur=r('Hi\u1EC7n n\xFAt "Hotline"'),Rr=r("C\u1EADp nh\u1EADt"),Sr=r("Th\u1EBB thi\u1EBFt l\u1EADp v1.5");function xr(e,t,d,h,o,c){const f=s("f7-nav-title"),C=s("f7-navbar"),v=s("list-people"),m=s("f7-card-header"),E=s("f7-list-input"),g=s("f7-list"),y=s("f7-card"),k=s("f7-toggle"),A=s("f7-block-header"),_=s("f7-text-editor"),U=s("f7-card-content"),B=s("f7-button"),T=s("f7-col"),D=s("f7-row"),P=s("f7-block"),Q=s("f7-page");return l(),p(Q,null,{default:i(()=>[n(C,{sliding:!1},{default:i(()=>[n(f,{sliding:""},{default:i(()=>[gr]),_:1})]),_:1}),a("div",vr,[n(v,{qrid:o.qrid,privateCode:o.privateCode},null,8,["qrid","privateCode"]),n(y,null,{default:i(()=>[n(m,{"bg-color":"blue"},{default:i(()=>[br]),_:1}),n(g,{"no-hairlines-md":""},{default:i(()=>[n(E,{type:"text",outline:"",label:"T\xEAn g\u1ECDi","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"100","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:o.item.ownerName,"onUpdate:value":t[0]||(t[0]=R=>o.item.ownerName=R)},null,8,["value"]),n(E,{outline:"",label:"H\xECnh \u0111\u1EA1i di\u1EC7n ","floating-label":"",type:"text",placeholder:"link h\xECnh","clear-button":"",value:o.imageUrl,"onUpdate:value":t[1]||(t[1]=R=>o.imageUrl=R)},null,8,["value"]),o.imageUrl?(l(),b("li",Er,[a("div",Cr,[a("img",{src:o.imageUrl,style:{"max-width":"240px"}},null,8,yr)]),kr])):w("",!0),n(E,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1 cu\u1ED1i",pattern:"[0-9]*","clear-button":"",value:o.item.ownerPhoneNumber,"onUpdate:value":t[2]||(t[2]=R=>o.item.ownerPhoneNumber=R)},null,8,["value"]),n(E,{outline:"",type:"textarea",label:"\u0110\u1ECBa ch\u1EC9","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:o.item.ownerAddress,"onUpdate:value":t[3]||(t[3]=R=>o.item.ownerAddress=R)},null,8,["value"])]),_:1})]),_:1}),n(y,null,{default:i(()=>[n(m,null,{default:i(()=>[wr,n(k,{checked:o.item.metadata.introduction.enable,"onUpdate:checked":t[4]||(t[4]=R=>o.item.metadata.introduction.enable=R)},null,8,["checked"])]),_:1}),n(U,null,{default:i(()=>[F(n(g,{"no-hairlines-md":""},{default:i(()=>[n(E,{type:"text",outline:"","floating-label":"",placeholder:"",info:"show on tieu de",maxlength:"50","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:o.item.metadata.introduction.title,"onUpdate:value":t[5]||(t[5]=R=>o.item.metadata.introduction.title=R)},null,8,["value"]),n(A,null,{default:i(()=>[Dr]),_:1}),n(_,{placeholder:"Enter text...",buttons:[["bold","italic","underline","strikeThrough"],["orderedList","unorderedList"],["link","image"],["paragraph","h1","h2","h3"],["alignLeft","alignCenter","alignRight","alignJustify"],["subscript","superscript"]],value:o.item.metadata.introduction.content,"onTexteditor:change":t[6]||(t[6]=R=>o.item.metadata.introduction.content=R)},null,8,["value"])]),_:1},512),[[H,o.item.metadata.introduction.enable]])]),_:1})]),_:1}),n(y,null,{default:i(()=>[n(m,null,{default:i(()=>[Ar,n(k,{checked:o.item.metadata.discount.enable,"onUpdate:checked":t[7]||(t[7]=R=>o.item.metadata.discount.enable=R)},null,8,["checked"])]),_:1}),n(U,null,{default:i(()=>[F(n(g,{"no-hairlines-md":""},{default:i(()=>[n(E,{type:"text",outline:"","floating-label":"",placeholder:"",info:"show on tieu de",maxlength:"50","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:o.item.metadata.discount.title,"onUpdate:value":t[8]||(t[8]=R=>o.item.metadata.discount.title=R)},null,8,["value"]),n(A,null,{default:i(()=>[Tr]),_:1}),n(_,{placeholder:"Enter text...",value:o.item.metadata.discount.content,"onTexteditor:change":t[9]||(t[9]=R=>o.item.metadata.discount.content=R)},null,8,["value"])]),_:1},512),[[H,o.item.metadata.discount.enable]])]),_:1})]),_:1}),n(y,null,{default:i(()=>[n(m,null,{default:i(()=>[Ir,n(k,{checked:o.item.metadata.quotation.enable,"onUpdate:checked":t[10]||(t[10]=R=>o.item.metadata.quotation.enable=R)},null,8,["checked"])]),_:1}),n(U,null,{default:i(()=>[F(n(g,{"no-hairlines-md":""},{default:i(()=>[n(E,{type:"text",outline:"","floating-label":"",placeholder:"",info:"show on tieu de",maxlength:"50","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:o.item.metadata.quotation.title,"onUpdate:value":t[11]||(t[11]=R=>o.item.metadata.quotation.title=R)},null,8,["value"]),n(A,null,{default:i(()=>[$r]),_:1}),n(_,{placeholder:"Enter text...",value:o.item.metadata.quotation.content,"onTexteditor:change":t[12]||(t[12]=R=>o.item.metadata.quotation.content=R)},null,8,["value"])]),_:1},512),[[H,o.item.metadata.quotation.enable]])]),_:1})]),_:1}),n(y,null,{default:i(()=>[n(m,null,{default:i(()=>[Ur,n(k,{checked:o.item.metadata.call.enable,"onUpdate:checked":t[13]||(t[13]=R=>o.item.metadata.call.enable=R)},null,8,["checked"])]),_:1}),n(U,null,{default:i(()=>[F(n(g,{"no-hairlines-md":""},{default:i(()=>[n(E,{type:"text",outline:"","floating-label":"",placeholder:"",info:"ti\xEAu \u0111\u1EC1 button Call",maxlength:"50","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:o.item.metadata.call.title,"onUpdate:value":t[14]||(t[14]=R=>o.item.metadata.call.title=R)},null,8,["value"]),n(E,{type:"text",outline:"","floating-label":"",placeholder:"",info:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i h\u1EE3p l\u1EC7",required:"","clear-button":"",value:o.item.metadata.call.phoneNumber,"onUpdate:value":t[15]||(t[15]=R=>o.item.metadata.call.phoneNumber=R)},null,8,["value"])]),_:1},512),[[H,o.item.metadata.call.enable]])]),_:1})]),_:1}),n(P,null,{default:i(()=>[n(D,null,{default:i(()=>[n(T,{width:"100"},{default:i(()=>[n(B,{fill:"",round:"",large:"",onClick:t[16]||(t[16]=R=>c.updateData())},{default:i(()=>[Rr]),_:1})]),_:1})]),_:1})]),_:1}),n(y,null,{default:i(()=>[n(m,null,{default:i(()=>[Sr]),_:1}),n(U,null,{default:i(()=>[r(u(d.f7route.params.id),1)]),_:1})]),_:1})])]),_:1})}var Nr=q(fr,[["render",xr]]);const qr=V({props:{isView:Boolean,id:Number},data(){return{isLoading:!1,data:{}}},watch:{id:"loadData"},methods:{async loadData(){this.id>0&&(this.isLoading=!0,this.data=await this.$api.getQRID(this.id,"111"),this.isLoading=!1)}},async mounted(){this.loadData()}}),Pr=r(" Th\xF4ng tin thi\u1EBFt b\u1ECB "),Br={class:"list media-list no-hairlines-between"},Qr={class:"item-content"},Lr={class:"item-inner"},Fr={class:"item-title"},Or={class:"item-content"},Vr={class:"item-inner"},Mr=["innerHTML"],Hr=["src"],Kr={class:"item-content"},zr={class:"item-inner"},jr={class:"item-title"},Yr={class:"item-checkbox item-content"},Gr={class:"item-inner"},Wr=a("div",{class:"item-title-row"},[a("div",{class:"item-title"},"S\u1EA3n ph\u1EA9m c\u1EE7a")],-1),Zr={class:"item-subtitle"},Xr={class:"item-text"},Jr=r(" Kh\xE1ch h\xE0ng s\u1EED d\u1EE5ng "),ed={class:"list media-list no-hairlines-between"},td={class:"item-content"},nd=a("div",{class:"item-media"},[a("i",{class:"f7-icons"},"person_fill")],-1),id={class:"item-inner"},ad={class:"item-title"},od={key:0},sd={class:"item-content"},ld=a("div",{class:"item-media"},[a("i",{class:"f7-icons"},"device_phone_portrait")],-1),rd={class:"item-inner"},dd={class:"item-subtitle"},cd={class:"item-content"},ud=a("div",{class:"item-media"},[a("i",{class:"f7-icons"},"house")],-1),hd={class:"item-inner"},pd={class:"item-subtitle"};function md(e,t,d,h,o,c){const f=s("f7-preloader"),C=s("f7-card-header"),v=s("f7-swiper-slide"),m=s("f7-swiper"),E=s("f7-card-content"),g=s("f7-card");return l(),b(x,null,[n(g,null,{default:i(()=>[n(C,{"bg-color":"green"},{default:i(()=>[Pr,F(n(f,null,null,512),[[H,e.isLoading]])]),_:1}),n(E,null,{default:i(()=>[a("div",Br,[a("ul",null,[a("li",null,[a("div",Qr,[a("div",Lr,[a("div",Fr,u(e.data.title),1)])])]),a("li",null,[a("div",Or,[a("div",Vr,[a("div",{class:"item-text",innerHTML:e.data.description},null,8,Mr)])])]),a("li",null,[n(m,{speed:500,slidesPerView:2,spaceBetween:10},{default:i(()=>[(l(!0),b(x,null,L(e.data.imageUrls,y=>(l(),p(v,{key:y},{default:i(()=>[a("img",{class:"small",src:y},null,8,Hr)]),_:2},1024))),128))]),_:1})]),a("li",null,[a("div",Kr,[a("div",zr,[a("div",jr," Ng\xE0y k\xEDch ho\u1EA1t: "+u(e.$utils.formatDate(e.data.activatedDate)),1)])])]),a("li",null,[a("label",Yr,[a("div",Gr,[Wr,a("div",Zr,u(e.data.sellerName),1),a("div",Xr,u(e.data.sellerAddress),1)])])])])])]),_:1})]),_:1}),n(g,null,{default:i(()=>[n(C,{"bg-color":"green"},{default:i(()=>[Jr]),_:1}),n(E,null,{default:i(()=>[a("div",ed,[a("ul",null,[a("li",null,[a("div",td,[nd,a("div",id,[a("div",ad,u(e.data.ownerName),1)])])]),e.data.ownerPhoneNumber?(l(),b("li",od,[a("div",sd,[ld,a("div",rd,[a("div",dd,u(e.data.ownerPhoneNumber),1)])])])):w("",!0),a("li",null,[a("div",cd,[ud,a("div",hd,[a("div",pd,u(e.data.ownerAddress),1)])])])])])]),_:1})]),_:1})],64)}var Ie=q(qr,[["render",md]]);const _d=V({components:{DetailQrid:Ie,History:oe},props:{f7route:Object,f7router:Object},data(){return{name:"Th\u1EBB gi\xE1m s\xE1t D\u1EF1 \xE1n",enablePopup:!1,items:[],selectedId:0,item:{},id:this.f7route.params.packageId,privateCode:"",org:{name:"",address:""},project:{title:"DEMO - VINAAS",cardType:"CARD_TYPE.EXIST_DEVICE",count:108,organizationId:888,status:"ACTIVE"}}},computed:{},methods:{async showItem(e){console.log("click showItem()"),this.selectedId=e.id,this.enablePopup=!0},async loadData(){let e={id:10001001053,title:"DEMO - VINAAS",cardType:"CARD_TYPE.EXIST_DEVICE",count:108,organizationId:888,status:"ACTIVE",organization:{name:"",address:""},qridList:[{id:100010010530026,packageId:"10001001053",title:"Vsmart Active 3",imageUrls:[],activatedDate:"2021-12-28T01:52:59.981Z",ownerName:"Nguy\u1EC5n M\u1EA1nh H\xE0",status:"QRID_STATUS.ACTIVE"},{id:100010010530031,packageId:"10001001053",title:"M\u1EB7t sau c\u1EEDa ch\xEDnh",imageUrls:["https://apps.vinaas.com/file/ru9CQThTA","https://apps.vinaas.com/file/RLwdCELBA","https://apps.vinaas.com/file/AIAHKgmk7","https://apps.vinaas.com/file/NsarQsF2n"],activatedDate:"2021-11-29T23:56:18.922Z",ownerName:"A b\u1EA3o",status:"QRID_STATUS.ACTIVE"},{id:100010010530028,packageId:"10001001053",title:"\u0110i\u1EC7n tho\u1EA1i trong nh\xE0",imageUrls:["https://apps.vinaas.com/file/myuy7kknk","https://apps.vinaas.com/file/nT3MbPc3I"],activatedDate:"2021-11-29T23:53:36.845Z",ownerName:"A b\u1EA3o",status:"QRID_STATUS.ACTIVE"},{id:100010010530027,packageId:"10001001053",title:"Laptop Asus ",imageUrls:["https://apps.vinaas.com/file/r5uvOPkcs","https://apps.vinaas.com/file/plm25aLDq"],activatedDate:"2021-11-17T02:35:08.572Z",ownerName:"A Quang",status:"QRID_STATUS.ACTIVE"},{id:100010010530088,packageId:"10001001053",title:"B\xE0n ph\xEDm c\u01A1",imageUrls:[],activatedDate:"2021-11-17T02:27:11.578Z",ownerName:"Quang t\xE8o",status:"QRID_STATUS.ACTIVE"},{id:100010010530087,packageId:"10001001053",title:"M\xE1y Mac mini",imageUrls:["https://apps.vinaas.com/file/3YFASbh8C","https://apps.vinaas.com/file/03HbRRiG1","https://apps.vinaas.com/file/XDb7lTtVl"],activatedDate:"2021-11-17T02:23:54.741Z",ownerName:"Qu\xE2n ",status:"QRID_STATUS.ACTIVE"},{id:100010010530085,packageId:"10001001053",title:"B\xE0n ph\xEDm c\u01A1 filco",imageUrls:["https://apps.vinaas.com/file/Fu5gRnWof","https://apps.vinaas.com/file/6ncWsokIC"],activatedDate:"2021-11-17T02:15:48.717Z",ownerName:"A b\u1EA3o",status:"QRID_STATUS.ACTIVE"},{id:100010010530083,packageId:"10001001053",title:"B\xE0n ph\xEDm c\u01A1 zero",imageUrls:["https://apps.vinaas.com/file/LuyYLtpKG","https://apps.vinaas.com/file/8ig2ZBJfy"],activatedDate:"2021-11-17T02:10:00.643Z",ownerName:"A qu\xE2n",status:"QRID_STATUS.ACTIVE"},{id:100010010530082,packageId:"10001001053",title:"Laptop Panasonic ",imageUrls:["https://media.vinaas.com/file/nCzWPJLaY","https://media.vinaas.com/file/QRMVaE1Bb","https://media.vinaas.com/file/fQRDWpAtZ","https://media.vinaas.com/file/eNTzIq9BV"],activatedDate:"2021-11-17T02:07:37.254Z",ownerName:"A Quang",status:"QRID_STATUS.ACTIVE"},{id:100010010530084,packageId:"10001001053",title:"M\xE0n h\xECnh philip",imageUrls:["https://apps.vinaas.com/file/icZg42sYz","https://apps.vinaas.com/file/HkjWkXA1g","https://apps.vinaas.com/file/488IHrxAv","https://apps.vinaas.com/file/wqxFUw3mS"],activatedDate:"2021-11-17T02:05:38.758Z",ownerName:"A quang",status:"QRID_STATUS.ACTIVE"},{id:100010010530081,packageId:"10001001053",title:"B\xE0n ph\xEDm c\u01A1 leopold",imageUrls:["https://apps.vinaas.com/file/GVTZpR1sk","https://apps.vinaas.com/file/rgwFU4ujn","https://apps.vinaas.com/file/1wOyxulmT","https://apps.vinaas.com/file/lGtnrGJWZ"],activatedDate:"2021-11-17T01:57:51.814Z",ownerName:"A b\u1EA3o",status:"QRID_STATUS.ACTIVE"},{id:100010010530011,packageId:"10001001053",title:"Xe m\xE1y Air Blade 2008",imageUrls:["https://media.vinaas.com/file/1Np2nCWT9","https://media.vinaas.com/file/F5n4LBeUr"],activatedDate:"2021-11-04T02:36:11.823Z",ownerName:"Anh Hu\u1EC7",status:"QRID_STATUS.ACTIVE"},{id:100010010530001,packageId:"10001001053",title:"T\u1EE7 m\xE1t DarLing",imageUrls:["https://media.vinaas.com/file/3XdMOIoYd"],activatedDate:"2021-10-17T08:38:44.940Z",ownerName:"Dingtea 03 \xC2u C\u01A1",status:"QRID_STATUS.ACTIVE"},{id:100010010530106,packageId:"10001001053",title:"M\xE1y l\u1EA1nh 1",imageUrls:["https://media.vinaas.com/file/8p7qpJiBk"],activatedDate:"2021-07-29T08:20:37.924Z",ownerName:"H\u1EADu",status:"QRID_STATUS.ACTIVE"},{id:100010010530100,packageId:"10001001053",title:"Lan \u0111\u1ED9t bi\u1EBFn",imageUrls:["https://media.vinaas.com/file/ZPssCHCKl","https://media.vinaas.com/file/UkiKsvhuT"],activatedDate:"2021-07-23T03:01:20.236Z",ownerName:"L\xEA thi lan Nhi\xEAn",status:"QRID_STATUS.ACTIVE"},{id:100010010530063,packageId:"10001001053",title:"Sunhose 09789",imageUrls:["https://media.vinaas.com/file/iFY0GXmME","https://media.vinaas.com/file/ruJb3FnX1"],activatedDate:"2021-06-08T10:14:03.703Z",ownerName:"Anh Quang",status:"QRID_STATUS.ACTIVE"},{id:100010010530072,packageId:"10001001053",title:"M\xE1y t\xEDnh",imageUrls:["https://media.vinaas.com/file/FZYlfwQTS"],activatedDate:"2021-05-29T05:15:34.013Z",ownerName:"Ch\u1ECB vy",status:"QRID_STATUS.ACTIVE"},{id:10001001053e4,packageId:"10001001053",title:"DEmo",imageUrls:["https://media.vinaas.com/file/WtQwiOaUV","https://media.vinaas.com/file/leCfZsktH"],activatedDate:"2021-05-26T02:06:06.447Z",ownerName:"A d\u01B0\u01A1ng",status:"QRID_STATUS.ACTIVE"},{id:100010010530097,packageId:"10001001053",title:"Xe ",imageUrls:[],activatedDate:"2021-04-25T07:24:25.326Z",ownerName:"L\u01B0\u01A1ng v\u0103n thanh",status:"QRID_STATUS.ACTIVE"}]};e=await this.$api.getProjectSummary(this.id,this.privateCode),this.project={title:e.title,cardType:e.cardType,count:e.count,organizationId:e.organizationId,status:e.status},this.org=e.organization,this.items=e.qridList}},async mounted(){await this.loadData()}}),fd={class:"content"},gd=["src"],vd=r("Close");function bd(e,t,d,h,o,c){const f=s("f7-nav-title"),C=s("f7-navbar"),v=s("f7-card-header"),m=s("f7-list-item"),E=s("f7-list"),g=s("f7-card-content"),y=s("f7-card"),k=s("f7-link"),A=s("f7-nav-right"),_=s("detail-qrid"),U=s("history"),B=s("f7-page"),T=s("f7-popup");return l(),p(B,null,{default:i(()=>[n(C,{sliding:!1},{default:i(()=>[n(f,{sliding:""},{default:i(()=>[r(u(e.name),1)]),_:1})]),_:1}),a("div",fd,[n(y,null,{default:i(()=>[n(v,{"bg-color":"blue"},{default:i(()=>[r("ID "+u(e.f7route.params.packageId),1)]),_:1}),n(g,null,{default:i(()=>[n(E,null,{default:i(()=>[n(m,null,{default:i(()=>[r("Lo\u1EA1i Th\u1EBB "+u(e.project.cardType),1)]),_:1}),n(m,null,{default:i(()=>[r("T\u1ED5ng s\u1ED1 "+u(e.project.count)+" th\u1EBB",1)]),_:1}),n(m,null,{default:i(()=>[r("C\xF4ng ty: "+u(e.org.name),1)]),_:1}),n(m,null,{default:i(()=>[r("\u0110\u1ECBa ch\u1EC9: "+u(e.org.address),1)]),_:1})]),_:1})]),_:1})]),_:1}),n(y,null,{default:i(()=>[n(v,{"bg-color":"green"},{default:i(()=>[r(u(e.items.length)+" / "+u(e.project.count)+" Th\u1EBB \u0111\xE3 \u0111\u01B0\u1EE3c k\xEDch ho\u1EA1t",1)]),_:1}),n(g,null,{default:i(()=>[n(E,{"media-list":""},{default:i(()=>[(l(!0),b(x,null,L(e.items,D=>(l(),p(m,{key:D.id,onClick:P=>e.showItem(D),subtitle:D.title,header:e.$utils.formatQRID(D.id),title:D.ownerName,text:"K\xEDch ho\u1EA1t: "+e.$utils.formatDate(D.activatedDate)},{media:i(()=>[a("img",{src:e.$utils.firstImage(D.imageUrls),width:"60"},null,8,gd)]),_:2},1032,["onClick","subtitle","header","title","text"]))),128))]),_:1})]),_:1})]),_:1})]),n(T,{opened:e.enablePopup,"onUpdate:opened":t[0]||(t[0]=D=>e.enablePopup=D),"tablet-fullscreen":!0},{default:i(()=>[n(B,null,{default:i(()=>[n(C,{title:"Chi ti\u1EBFt"},{default:i(()=>[n(A,null,{default:i(()=>[n(k,{"popup-close":""},{default:i(()=>[vd]),_:1})]),_:1})]),_:1}),n(_,{isView:!0,id:e.selectedId},null,8,["id"]),n(U,{id:e.selectedId},null,8,["id"])]),_:1})]),_:1},8,["opened"])]),_:1})}var Ed=q(_d,[["render",bd]]);const Cd=V({props:{id:Number,privateCode:String},components:{History:oe,Location:ye},data(){return{isLoading:!1,filter:{skip:0,limit:10},enablePopup:!1,selectedId:0,data:{}}},watch:{id:"loadData"},methods:{clickViewActivity(e){e.id>0&&(this.selectedId=e.id,this.enablePopup=!0)},async loadData(){if(this.id>0){this.isLoading=!0;let e=this.$utils.qrid_package(this.id),t=parseInt(e);this.data=await this.$api.getQRList(t,this.privateCode),this.isLoading=!1}}},async mounted(){this.loadData()}}),yd=r("\u0110\u1ECBa \u0111i\u1EC3m \u0111\u01B0\u1EE3c d\xE1n v\xE0 k\xEDch ho\u1EA1t Th\u1EBB "),kd={class:"list media-list medium-inset"},wd=["onClick"],Dd={class:"item-media"},Ad=["src"],Td={class:"item-inner"},Id={class:"item-header"},$d={class:"item-title-row"},Ud={style:{"font-size":"16px"}},Rd=a("div",{class:"item-after"},null,-1),Sd={class:"item-text"},xd={class:"item-footer text-color-red",style:{"font-size":"14px","font-weight":"600"}},Nd=r("Close");function qd(e,t,d,h,o,c){const f=s("f7-preloader"),C=s("f7-card-header"),v=s("f7-card"),m=s("f7-link"),E=s("f7-nav-right"),g=s("f7-navbar"),y=s("location"),k=s("history"),A=s("f7-page"),_=s("f7-popup");return l(),b(x,null,[n(v,null,{default:i(()=>[n(C,{"bg-color":"blue"},{default:i(()=>[yd,F(n(f,null,null,512),[[H,e.isLoading]])]),_:1}),a("div",kd,[a("ul",null,[(l(!0),b(x,null,L(e.data,U=>(l(),b("li",{key:U.id},[a("a",{onClick:B=>e.clickViewActivity(U),class:"item-link item-content chevron-center"},[a("div",Dd,[a("img",{style:{border:"1px solid #ccc"},src:e.$utils.firstImage(U.imageUrls),width:"80"},null,8,Ad)]),a("div",Td,[a("div",Id,u(e.$utils.formatQRID(U.id)),1),a("div",$d,[a("div",Ud,u(U.title),1),Rd]),a("div",Sd,u(U.description),1),a("div",xd,u(e.$utils.formatMoney(U.money)),1)])],8,wd)]))),128))])])]),_:1}),n(_,{id:"view-card",opened:e.enablePopup,"onUpdate:opened":t[0]||(t[0]=U=>e.enablePopup=U),"tablet-fullscreen":!0},{default:i(()=>[n(A,null,{default:i(()=>[n(g,{title:"Chi ti\u1EBFt"},{default:i(()=>[n(E,null,{default:i(()=>[n(m,{"popup-close":""},{default:i(()=>[Nd]),_:1})]),_:1})]),_:1}),n(y,{isView:!1,id:e.selectedId,status:"QRID_STATUS.ACTIVE"},null,8,["id"]),n(k,{id:e.selectedId},null,8,["id"])]),_:1})]),_:1},8,["opened"])],64)}var Pd=q(Cd,[["render",qd]]);const Bd=V({components:{DetailQrid:Ie,RecentHistory:we,History:oe,CardList:Pd},props:{f7route:Object,f7router:Object},data(){let e="admin",t="CARD_TYPE.PUBLIC_LOCATION",d=parseInt(this.f7route.params.id);return{name:e,title:"Th\u1EBB qu\u1EA3n l\xFD Ph\u1EA3n \xE1nh",enablePopup:!1,data:{title:e,cardType:t,status:"NOT_GENERATED",ownerName:"",ownerPhoneNumber:"",ownerAddress:"",metadata:{qrid:0,from:1,to:20,listIds:[]}},items:[],selectedId:0,item:{},id:d,privateCode:this.f7route.params.privateCode}},computed:{listIds(){if(this.id>0){let e=this.$utils.qrid_package(this.id),t=this.$utils.list_qrid(e,this.data.metadata.from,this.data.metadata.to);return this.data.metadata.listIds=t,console.log(t.toString()),t}else return[]},firstId(){let e=this.listIds[0];return e>0?this.$utils.formatQRID(e):""},lastId(){let e=this.listIds[this.listIds.length-1];return e>0?this.$utils.formatQRID(e):""}},methods:{async showItem(e){console.log("click showItem()"),this.selectedId=e.id,this.enablePopup=!0},async loadData(){try{let e=await this.$api.verifyCard(this.id,this.privateCode);e&&(e.status=="INVALID_PRIVATE"?(console.log(e),this.f7router.navigate("/")):e.status=="NOT_GENERATED"||(this.data=await this.$api.getQRID(this.id,this.privateCode)))}catch(e){}},async updateCard(){if(this.id){console.log("initData()",this.id,this.privateCode,this.data);let e=await this.$api.updateCard(this.id,this.privateCode,this.data);e&&(N.dialog.alert("C\u1EADp nh\u1EADt th\xE0nh c\xF4ng"),this.data=e)}},async activeCard(){if(this.id){console.log("initData()",this.id,this.privateCode,this.data);let e=await this.$api.activeCard(this.id,this.privateCode,this.data);e&&(N.dialog.alert("K\xEDch hoat th\xE0nh c\xF4ng"),this.data=e)}},async initData(){console.log("initData()",this.id,this.privateCode,this.data);let e=await this.$api.initCard(this.id,this.privateCode,this.data);e&&(N.dialog.alert("Kh\u1EDFi t\u1EA1o th\xE0nh c\xF4ng"),this.data=e)}},async mounted(){await this.loadData()}}),Qd=r("Thi\u1EBFt l\u1EADp Th\u1EBB"),Ld=r("Kh\u1EDFi t\u1EA1o"),Fd=r("B\u1ED9 ph\u1EADn qu\u1EA3n l\xFD"),Od=r("C\u1EADp nh\u1EADt"),Vd=r("K\xEDch ho\u1EA1t"),Md=r("Close");function Hd(e,t,d,h,o,c){const f=s("f7-nav-title"),C=s("f7-navbar"),v=s("recent-history"),m=s("card-list"),E=s("f7-card-header"),g=s("f7-list-input"),y=s("f7-col"),k=s("f7-row"),A=s("f7-list-item"),_=s("f7-button"),U=s("f7-list"),B=s("f7-card"),T=s("f7-card-content"),D=s("f7-link"),P=s("f7-nav-right"),Q=s("detail-qrid"),R=s("history"),Y=s("f7-page"),z=s("f7-popup");return l(),p(Y,null,{default:i(()=>[n(C,{sliding:!1},{default:i(()=>[n(f,{sliding:""},{default:i(()=>[r(u(e.title),1)]),_:1})]),_:1}),e.data.status=="QRID_STATUS.ACTIVE"?(l(),p(v,{key:0,id:e.id,privateCode:e.privateCode},null,8,["id","privateCode"])):w("",!0),e.data.status=="QRID_STATUS.ACTIVE"?(l(),p(m,{key:1,id:e.id,privateCode:e.privateCode},null,8,["id","privateCode"])):w("",!0),e.data.status=="NOT_GENERATED"?(l(),p(B,{key:2},{default:i(()=>[n(E,null,{default:i(()=>[Qd]),_:1}),n(U,{"no-hairlines-md":""},{default:i(()=>[n(g,{outline:"",label:"CardType","floating-label":"",type:"text",placeholder:"",pattern:"[0-9]*","clear-button":"",value:e.data.cardType,"onUpdate:value":t[0]||(t[0]=K=>e.data.cardType=K)},null,8,["value"]),n(A,null,{default:i(()=>[n(k,null,{default:i(()=>[n(y,null,{default:i(()=>[n(g,{outline:"",label:"B\u1EAFt \u0111\u1EA7u","floating-label":"",type:"number",placeholder:"",pattern:"[0-9]*",value:e.data.metadata.from,"onUpdate:value":t[1]||(t[1]=K=>e.data.metadata.from=K)},null,8,["value"]),r(" "+u(e.firstId),1)]),_:1}),n(y,null,{default:i(()=>[n(g,{outline:"",label:"K\u1EBFt th\xFAc","floating-label":"",type:"number",placeholder:"",value:e.data.metadata.to,"onUpdate:value":t[2]||(t[2]=K=>e.data.metadata.to=K)},null,8,["value"]),r(" "+u(e.lastId),1)]),_:1})]),_:1})]),_:1}),n(A,null,{default:i(()=>[n(_,{fill:"",large:"",outline:"",onClick:t[3]||(t[3]=K=>e.initData())},{default:i(()=>[Ld]),_:1})]),_:1})]),_:1})]),_:1})):(l(),p(B,{key:3},{default:i(()=>[n(E,{"bg-color":"blue"},{default:i(()=>[Fd]),_:1}),n(U,{"no-hairlines-md":""},{default:i(()=>[n(g,{type:"text",outline:"",label:"T\xEAn ng\u01B0\u1EDDi ph\u1EE5 tr\xE1ch","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"100","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:e.data.ownerName,"onUpdate:value":t[4]||(t[4]=K=>e.data.ownerName=K)},null,8,["value"]),n(g,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1 cu\u1ED1i",pattern:"[0-9]*","clear-button":"",value:e.data.ownerPhoneNumber,"onUpdate:value":t[5]||(t[5]=K=>e.data.ownerPhoneNumber=K)},null,8,["value"]),n(g,{outline:"",type:"textarea",label:"Ph\xF2ng l\xE0m vi\u1EC7c","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:e.data.ownerAddress,"onUpdate:value":t[6]||(t[6]=K=>e.data.ownerAddress=K)},null,8,["value"]),n(A,null,{default:i(()=>[e.data.status=="QRID_STATUS.ACTIVE"?(l(),p(_,{key:0,fill:"",large:"",outline:"",onClick:t[7]||(t[7]=K=>e.updateCard())},{default:i(()=>[Od]),_:1})):(l(),p(_,{key:1,fill:"",large:"",outline:"",onClick:t[8]||(t[8]=K=>e.activeCard())},{default:i(()=>[Vd]),_:1}))]),_:1})]),_:1})]),_:1})),n(B,null,{default:i(()=>[n(E,null,{default:i(()=>[r("\u0110ang qu\u1EA3n l\xFD, gi\xE1m s\xE1t "+u(this.listIds.length)+" Th\u1EBB",1)]),_:1}),n(T,null,{default:i(()=>[n(U,null,{default:i(()=>[n(A,null,{default:i(()=>[r("T\u1EEB: "+u(e.firstId),1)]),_:1}),n(A,null,{default:i(()=>[r("\u0110\u1EBFn: "+u(e.lastId),1)]),_:1})]),_:1})]),_:1})]),_:1}),n(z,{opened:e.enablePopup,"onUpdate:opened":t[9]||(t[9]=K=>e.enablePopup=K)},{default:i(()=>[n(Y,null,{default:i(()=>[n(C,{title:"Chi ti\u1EBFt"},{default:i(()=>[n(P,null,{default:i(()=>[n(D,{"popup-close":""},{default:i(()=>[Md]),_:1})]),_:1})]),_:1}),n(Q,{isView:!0,id:e.selectedId},null,8,["id"]),n(R,{id:e.selectedId},null,8,["id"])]),_:1})]),_:1},8,["opened"])]),_:1})}var Kd=q(Bd,[["render",Hd]]);const zd=V({name:"QrLogin",emits:["detect","warning"],props:{f7route:Object,f7router:Object},components:{QrStream:ae.exports.QrStream,QrCapture:ae.exports.QrCapture},data(){return{qrUrl:"",warning:!1,camera:"auto"}},methods:{async onDecode(e){console.log("onDecode",e),this.qrUrl=e,e&&e.toString().includes("www.qrcare.vn/m/")?(this.warning=!1,G.dispatch("scanQRCode",e),this.f7router.back()):this.warning=!0}}}),jd=e=>(le("data-v-41e79232"),e=e(),re(),e),Yd={class:"reader"},Gd={class:"center stream"},Wd=jd(()=>a("div",{style:{color:"red"},class:"frame"},null,-1)),Zd=r("Th\u1EBB kh\xF4ng h\u1EE3p l\u1EC7"),Xd={style:{"word-wrap":"break-word"}};function Jd(e,t,d,h,o,c){const f=s("f7-navbar"),C=s("qr-stream"),v=s("f7-block-title"),m=s("f7-block"),E=s("f7-page");return l(),p(E,null,{default:i(()=>[n(f,{title:"QRMember Scan","back-link":"Back"}),n(m,null,{default:i(()=>[a("div",Yd,[a("div",null,[a("div",Gd,[n(C,{onDecode:e.onDecode,class:"mb"},{default:i(()=>[Wd]),_:1},8,["onDecode"])])])]),n(m,{strong:""},{default:i(()=>[e.warning?(l(),p(v,{key:0},{default:i(()=>[Zd]),_:1})):w("",!0),a("div",Xd,u(e.qrUrl),1)]),_:1})]),_:1})]),_:1})}var $e=q(zd,[["render",Jd],["__scopeId","data-v-41e79232"]]);const ec=V({props:{f7route:Object,f7router:Object},components:{QrScanOne:$e},setup(){return{qrUrl:X("qrUrl")}},data(){return{enablePopup:!1,customer:{},customers:[],name:"",note:"",qrid:this.f7route.params.id}},watch:{qrUrl(e){console.log("watch qrUrl",e),e&&this.detectURl(e)}},computed:{isPaid(){return this.customer&&this.customer.status?this.customer.status=="PAID":!1},enablePaidButton(){return this.qrUrl&&!this.isPaid}},methods:{scanCard(){this.f7router.navigate("/qrmemberscan")},async getQRCustomer(){var e=100010010970010,t=this.f7route.params.privateCode;let d=await this.$api.getQRCustomerBySale(e,t);this.customers=d.filter(h=>h.status=="PAID")},async detectURl(e){if(e&&e.includes("www.qrcare.vn")){e.includes("http")||(e="https://"+e);let t=new URL(e).pathname.split("/"),d=t[2],h=t[4],o=t[6];this.qrUrl=`${d}-${h}-${o}`,console.log("detectURl",t,this.qrUrl);let c=await this.$api.getQRCustomer(this.qrUrl);c?this.customer=c:(this.qrUrl="",N.dialog.alert("Th\u1EBB ch\u01B0a \u0111\u01B0\u1EE3c k\xEDch ho\u1EA1t")),this.enablePopup=!1}},async Paid(){this.customer.name=this.name,this.customer.status="PAID",this.customer.modified=new Date().toISOString(),this.customer.history.unshift({type:"PAID",date:this.customer.modified}),this.customer.info={customerName:this.name,note:this.note,operator:this.qrid},await this.$api.updateQRCustomer(this.qrUrl,this.customer)&&(await this.getQRCustomer(),N.dialog.alert("X\xE1c nh\u1EADn th\xE0nh c\xF4ng!"))}},async mounted(){this.$utils.qrid_index(this.qrid),await this.getQRCustomer()}}),tc=r("Th\u1EBB Nh\xE2n vi\xEAn"),nc={class:"page-content"},ic=r("X\xE1c nh\u1EADn \u0110\u0103ng k\xFD"),ac=r("Qu\xE9t Th\u1EBB"),oc=a("div",null,"T\u01B0\u01A1ng t\xE1c g\u1EA7n nh\u1EA5t",-1),sc={key:0},lc={key:1},rc=a("p",null," Sau khi x\xE1c nh\u1EADn, s\u1EBD c\u1EADp nh\u1EADt l\xEAn Th\u1EBB C\u1ED9ng t\xE1c",-1),dc=r("X\xE1c nh\u1EADn"),cc=r("Th\u1EBB \u0111\xE3 \u0111\u0103ng k\xFD (mua h\xE0ng)");function uc(e,t,d,h,o,c){const f=s("f7-nav-title"),C=s("f7-navbar"),v=s("f7-card-header"),m=s("f7-button"),E=s("f7-card-content"),g=s("f7-card-footer"),y=s("f7-card"),k=s("f7-list-input"),A=s("f7-list"),_=s("f7-list-item"),U=s("f7-block"),B=s("f7-page");return l(),p(B,null,{default:i(()=>[n(C,{sliding:!1},{default:i(()=>[n(f,{sliding:""},{default:i(()=>[tc]),_:1})]),_:1}),a("div",nc,[n(y,null,{default:i(()=>[n(v,null,{default:i(()=>[ic]),_:1}),n(E,null,{default:i(()=>[n(m,{fill:"",large:"",onClick:t[0]||(t[0]=T=>e.scanCard())},{default:i(()=>[ac]),_:1}),e.customer.qrUrl?(l(),p(y,{key:0},{default:i(()=>[n(v,null,{default:i(()=>[r("Th\u1EBB "+u(e.customer.qrUrl.substring(6)),1)]),_:1}),n(E,null,{default:i(()=>[a("div",null,"T\xEAn: "+u(e.customer.name),1),oc,a("ul",null,[(l(!0),b(x,null,L(e.customer.history.slice(0,3),T=>(l(),b("li",{key:T},u(e.$utils.formatDateTime(T.date))+" : "+u(e.$utils.actionText(T.type)),1))),128))])]),_:1}),n(g,null,{default:i(()=>[e.isPaid?(l(),b("div",lc,"Tr\u1EA1ng th\xE1i: \u0110\xE3 \u0111\u0103ng k\xFD")):(l(),b("div",sc,"Tr\u1EA1ng th\xE1i: Ch\u01B0a \u0110\u0103ng k\xFD"))]),_:1})]),_:1})):w("",!0),e.enablePaidButton?(l(),p(y,{key:1},{default:i(()=>[e.isPaid?w("",!0):(l(),p(A,{key:0,"no-hairlines-md":""},{default:i(()=>[n(k,{outline:"",label:"T\xEAn kh\xE1ch h\xE0ng","floating-label":"",type:"text",placeholder:"","clear-button":"",value:e.name,"onUpdate:value":t[1]||(t[1]=T=>e.name=T)},null,8,["value"]),n(k,{outline:"",label:"Ghi ch\xFA","floating-label":"",type:"textarea",placeholder:"","clear-button":"",value:e.note,"onUpdate:value":t[2]||(t[2]=T=>e.note=T)},null,8,["value"])]),_:1})),rc,n(m,{fill:"",large:"",onClick:t[3]||(t[3]=T=>e.Paid())},{default:i(()=>[dc]),_:1})]),_:1})):w("",!0)]),_:1})]),_:1}),n(y,null,{default:i(()=>[n(v,{"bg-color":"green"},{default:i(()=>[cc]),_:1}),n(A,{"no-hairlines-md":"","media-list":""},{default:i(()=>[(l(!0),b(x,null,L(e.customers,T=>(l(),p(_,{key:T.qrUrl,header:e.$utils.formatDateTime(T.modified),title:T.name||"Ch\u01B0a c\u1EADp nh\u1EADt",subtitle:"Id: "+T.qrUrl.substring(9)},null,8,["header","title","subtitle"]))),128))]),_:1})]),_:1}),n(U,null,{default:i(()=>[a("div",null,"ID c\u1EE7a Th\u1EBB : "+u(e.$utils.formatQRID(e.qrid)),1)]),_:1})])]),_:1})}var hc=q(ec,[["render",uc]]);const pc=V({props:{id:Number,privateCode:Number,initInfo:Object},data(){return{enablePopup:!1,info:{title:"",desc:"",imageUrl:"",icon:"",features:[{title:"ch\u01B0a c\u1EADp nh\u1EADt"}]},data:{}}},methods:{showDetail(){this.enablePopup=!0},async getData(){if(this.id>0){let e=await this.$api.getQRID(this.id,this.privateCode);e&&(this.data=e,e.title&&(this.info.title=e.title),e.description&&(this.info.desc=e.description),e.metadata&&e.metadata.features&&(this.info.features=e.metadata.features))}}},mounted(){this.initInfo&&this.initInfo.title&&(this.info=this.initInfo)}}),mc=a("i",{class:"f7-icons"},"pencil_circle",-1),_c={key:0},fc=r("Close"),gc=r(" Chi ti\u1EBFt gi\u1EA3i ph\xE1p ");function vc(e,t,d,h,o,c){const f=s("f7-block-title"),C=s("f7-block-content"),v=s("f7-block-header"),m=s("f7-block"),E=s("f7-link"),g=s("f7-nav-right"),y=s("f7-navbar"),k=s("f7-card"),A=s("f7-page"),_=s("f7-popup");return l(),b(x,null,[n(m,null,{default:i(()=>[a("a",{onClick:t[0]||(t[0]=U=>e.showDetail())},[n(f,{medium:""},{default:i(()=>[r(u(e.info.title)+" ",1),mc]),_:1})]),n(C,null,{default:i(()=>[e.info.desc?(l(),b("p",_c,u(e.info.desc),1)):w("",!0)]),_:1}),n(v,null,{default:i(()=>[r("ID: "+u(e.id)+", M\xE3 ri\xEAng t\u01B0: "+u(e.privateCode),1)]),_:1})]),_:1}),n(_,{opened:e.enablePopup,"onUpdate:opened":t[1]||(t[1]=U=>e.enablePopup=U)},{default:i(()=>[n(A,null,{default:i(()=>[n(y,{title:e.info.title},{default:i(()=>[n(g,null,{default:i(()=>[n(E,{"popup-close":""},{default:i(()=>[fc]),_:1})]),_:1})]),_:1},8,["title"]),n(k,null,{default:i(()=>[gc]),_:1})]),_:1})]),_:1},8,["opened"])],64)}var Ue=q(pc,[["render",vc]]);let W={props:[{name:"address",type:"text",icon:"house",placeholder:"\u0110\u1ECBa ch\u1EC9 nh\xE0"},{name:"email",type:"email",icon:"envelope",placeholder:""},{name:"facebook",type:"url",icon:"logo_facebook",placeholder:""},{name:"skype",type:"text",icon:"/assets/skype.png",placeholder:""},{name:"linkedin",type:"url",icon:"logo_linkedin",placeholder:""},{name:"zalo",type:"text",icon:"/assets/zalo.png",placeholder:"https://zalo.me/...."},{name:"twitter",type:"url",icon:"logo_twitter",placeholder:""},{name:"instagram",type:"url",icon:"logo_instagram",placeholder:""},{name:"tiktok",type:"url",icon:"/assets/tiktok.png",placeholder:""},{name:"telegram",type:"url",icon:"/assets/telegram.png",placeholder:""},{name:"messenger",type:"url",icon:"/assets/messenger.svg",placeholder:""}],payments:[{name:"momo",type:"url",icon:"/assets/momo.png",placeholder:"https://me.momo.vn/qr-page/..."}],ecommerce:[{name:"website",type:"url",icon:"link_circle",placeholder:"order link"},{name:"tiki",type:"url",icon:"/assets/tiki.png",placeholder:""},{name:"lazada",type:"url",icon:"/assets/lazada.png",placeholder:""},{name:"shopee",type:"url",icon:"/assets/shopee.png",placeholder:"https://shopee.vn/product/..."}],socialUrls:{facebook:"",skype:"",telegram:"",zalo:"",momo:"",shopee:"",lazada:"",tiki:"",qrcare:""},userInfo:[{name:"name",text:"T\xEAn g\u1ECDi",type:"text",icon:"house",placeholder:""},{name:"phoneNumber",text:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i",type:"text",icon:"house",placeholder:""},{name:"desc",text:"M\xF4 t\u1EA3",type:"text",icon:"house",placeholder:"house"},{name:"meeting",text:"N\u1ED9i dung trao \u0111\u1ED5i",type:"text",icon:"house",placeholder:""},{name:"time",text:"Ng\xE0y g\u1EB7p",type:"date"}],vCard:{photo:"",firstName:"",middleName:"",lastName:"",organization:"",title:"",note:"",nickname:"",namePrefix:"",nameSuffix:"",gender:"",workPhone:"",homePhone:"",cellPhone:"",email:"",workEmail:"",socialUrls:"",facebook:"",zalo:"",linkedIn:"",twitter:"",momo:""},person:{label:"",firstName:"",lastName:"",email:"",phone:"",address:"",profileUrl:""},company:{enable:!1,name:"",shortName:"",address:"",personTitle:"",title:"",category:"",introduction:{enable:!1,title:"",content:""}}};const bc={emits:["updateData"],props:{data:{type:Object,default(e){return{}}},view:{type:Boolean,default:!1}},data(){return{model:[{name:"name",text:"T\xEAn c\u1EE7a kh\xE1ch h\xE0ng",type:"text",icon:"house",placeholder:"anh/ch\u1ECB ..."},{name:"phoneNumber",text:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i",type:"text",icon:"phone",placeholder:""},{name:"meeting",text:"Ghi ch\xFA v\u1EC1 kh\xE1ch h\xE0ng",type:"text",icon:"square_pencil",placeholder:""}],isView:!0}},watch:{data(e){e&&e.name?this.isView=!0:this.isView=!1}},methods:{enableEdit(){this.isView=!1},updateData(){this.$emit("updateData",this.data),this.isView=!0}}},Ec={class:"block"},Cc=a("div",{class:"block-title",style:{"text-align":"center"}},"M\xF4 t\u1EA3 kh\xE1ch h\xE0ng",-1),yc={key:0,class:"list no-hairlines-md"},kc={class:"item-media"},wc={class:"f7-icons size-40"},Dc={class:"item-inner"},Ac={class:"item-title"},Tc={key:1,class:"list no-hairlines-md"},Ic={class:"item-media"},$c={class:"f7-icons size-40"},Uc={class:"item-inner"},Rc={class:"item-title item-label"},Sc={class:"item-input-wrap"},xc=["type","placeholder","onUpdate:modelValue"],Nc=a("span",{class:"input-clear-button"},null,-1),qc={class:"row",style:{"padding-top":"20px","padding-bottom":"20px"}},Pc=a("div",{class:"col-20"},null,-1),Bc={class:"col"},Qc=a("div",{class:"col-20"},null,-1);function Lc(e,t,d,h,o,c){return l(),b("div",Ec,[Cc,o.isView?(l(),b("div",yc,[a("ul",null,[(l(!0),b(x,null,L(o.model,f=>(l(),b("li",{class:"item-content item-input",key:f.name},[a("div",kc,[a("i",wc,u(f.icon),1)]),a("div",Dc,[a("div",Ac,u(d.data[f.name]),1)])]))),128))])])):(l(),b("div",Tc,[a("ul",null,[(l(!0),b(x,null,L(o.model,f=>(l(),b("li",{class:"item-content item-input",key:f.name},[a("div",Ic,[a("i",$c,u(f.icon),1)]),a("div",Uc,[a("div",Rc,u(f.text),1),a("div",Sc,[F(a("input",{type:f.type,placeholder:f.placeholder,"onUpdate:modelValue":C=>d.data[f.name]=C},null,8,xc),[[Fe,d.data[f.name]]]),Nc])])]))),128))])])),a("div",qc,[Pc,a("div",Bc,[o.isView?(l(),b("button",{key:0,class:"button button-large button-round button-fill",onClick:t[0]||(t[0]=f=>c.enableEdit())},"Edit")):(l(),b("button",{key:1,class:"button button-large button-round button-fill",onClick:t[1]||(t[1]=f=>c.updateData())},"Save"))]),Qc])])}var Re=q(bc,[["render",Lc]]);const Fc={components:{UserInfo:Re},props:{qrid:Number,privateCode:String},emits:["selected"],data(){return{isLoading:!1,items:[],selectedId:0,item:{},actionHistory:[],userInfo:{},popupOpened:!1,filters:{},searchQuery:""}},computed:{filteredRepositories(){},repositoriesMatchingSearchQuery(){}},watch:{qrid:"loadData"},methods:{closeItem(){this.popupOpened=!1},selected(e){console.log("a",e),this.selectedId=e,this.loadDetail(),this.popupOpened=!0},async loadDetail(){this.userInfo={},this.item=await this.$api.UserDeviceAction(this.qrid,this.privateCode,this.selectedId),this.actionHistory=this.item.actionHistory,this.item.userInfo&&(this.userInfo=this.item.userInfo)},async updateUserInfo(e){console.log("updateUserInfo",e),e&&e.name&&await this.$api.updateUserInfo(this.qrid,this.privateCode,this.item.id,e)&&N.dialog.alert("Success Update")},async refreshData(){this.items=[],await this.loadData()},async loadData(){this.qrid>0&&(this.isLoading=!0,this.items=await this.$api.UserActionHistory(this.qrid,this.privateCode),this.isLoading=!1)},logoOS(e){if(e&&e.deviceInfo){let t=e.deviceInfo.os;return this.$utils.getLogoOS(t)}},actionInfo(e){if(e){let t="";return e.os&&(t+=e.os),e.osVersion&&(t+=" "+e.osVersion),t}},content(e){if(e)return e.title+`
`+e.content},addNote(){N.dialog.alert("Li\xEAn h\u1EC7 \u0111\u1EC3 \u0111\u01B0\u1EE3c t\u01B0 v\u1EA5n v\xE0 k\xEDch ho\u1EA1t s\u1EED d\u1EE5ng","T\xEDnh n\u0103ng cho Doanh nghi\u1EC7p")}},async mounted(){await this.loadData()}},Oc=r(" L\u1ECBch s\u1EED t\u01B0\u01A1ng t\xE1c"),Vc=r(" L\xE0 nh\u1EEFng h\xE0nh \u0111\u1ED9ng c\u1EE7a kh\xE1ch h\xE0ng nh\u01B0 ch\u1EA1m NFC, qu\xE9t qrcode, l\u01B0u danh b\u1EA1, click v\xE0o link,... "),Mc={class:"row"},Hc=a("div",{class:"col-20"},null,-1),Kc={class:"col"},zc=a("div",{class:"col-20"},null,-1),jc={class:"list media-list"},Yc=["onClick"],Gc={class:"item-media"},Wc={class:"f7-icons",style:{"font-size":"35px"}},Zc={class:"item-inner"},Xc={class:"item-title-row"},Jc={class:"item-header"},eu={class:"item-after"},tu={key:0,class:"item-title"},nu={class:"item-text"},iu=r(" Thi\u1EBFt b\u1ECB "),au=r("Close"),ou={class:"card"},su={class:"card-header bg-color-blue"},lu={class:"f7-icons",style:{"font-size":"35px: padding-right:40px"}},ru={class:"card-content"},du={class:"card"},cu=r("T\u01B0\u01A1ng t\xE1c g\u1EA7n \u0111\xE2y "),uu=r(" C\xE0ng nhi\u1EC1u t\u01B0\u01A1ng t\xE1c, k\xE9o d\xE0i trong nhi\u1EC1u ng\xE0y c\xE0ng th\u1EC3 hi\u1EC7n s\u1EF1 quan t\xE2m c\u1EE7a Kh\xE1ch h\xE0ng "),hu={class:"card-content"},pu={class:"list media-list"},mu={class:"item-content"},_u={class:"item-media"},fu=["src"],gu={key:1,class:"f7-icons",style:{"font-size":"40px"}},vu={class:"item-inner"},bu={class:"item-title-row"},Eu={class:"item-header"},Cu={class:"item-subtitle"},yu={class:"item-text"};function ku(e,t,d,h,o,c){const f=s("f7-card-header"),C=s("f7-block-header"),v=s("f7-card"),m=s("f7-link"),E=s("f7-nav-right"),g=s("f7-navbar"),y=s("user-info"),k=s("f7-page"),A=s("f7-popup");return l(),b(x,null,[n(v,null,{default:i(()=>[n(f,{"bg-color":"blue"},{default:i(()=>[Oc]),_:1}),n(C,null,{default:i(()=>[Vc]),_:1}),a("div",Mc,[Hc,a("div",Kc,[a("button",{class:"button button-large button-round button-fill color-green",onClick:t[0]||(t[0]=_=>c.refreshData())},"Refresh")]),zc]),a("div",jc,[a("ul",null,[(l(!0),b(x,null,L(o.items,_=>(l(),b("li",{key:_.id},[a("a",{onClick:U=>c.selected(_.id),class:"item-link item-content chevron-center"},[a("div",Gc,[a("i",Wc,u(c.logoOS(_)),1)]),a("div",Zc,[a("div",Xc,[a("div",Jc,u(e.$utils.actionMessage(_.lastAction.type,_.lastAction.time)),1),a("div",eu,u(_.lastAction.totalActions),1)]),_.userInfo?(l(),b("div",tu,u(_.userInfo.name),1)):w("",!0),a("div",nu,[iu,a("span",null,u(_.deviceCode),1),r(" \u0111\xE3 t\u01B0\u01A1ng t\xE1c "+u(_.lastAction.totalActions)+" l\u1EA7n, "+u(c.actionInfo(_.deviceInfo)),1)])])],8,Yc)]))),128))])])]),_:1}),n(A,{opened:o.popupOpened,"tablet-fullscreen":!0},{default:i(()=>[n(k,null,{default:i(()=>[n(g,null,{default:i(()=>[n(E,null,{default:i(()=>[n(m,{onClick:t[1]||(t[1]=_=>c.closeItem())},{default:i(()=>[au]),_:1})]),_:1})]),_:1}),a("div",ou,[a("div",su,[a("i",lu,u(c.logoOS(o.item)),1),r("M\xE3 thi\u1EBFt b\u1ECB: "+u(o.item.deviceCode),1)]),a("div",ru,[n(y,{data:o.userInfo,onUpdateData:c.updateUserInfo},null,8,["data","onUpdateData"])])]),a("div",du,[n(f,{"bg-color":"blue"},{default:i(()=>[cu]),_:1}),n(C,null,{default:i(()=>[uu]),_:1}),a("div",hu,[a("div",pu,[a("ul",null,[(l(!0),b(x,null,L(o.actionHistory,_=>(l(),b("li",{key:_.id},[a("div",mu,[a("div",_u,[_.type=="NFC"||_.type=="CLICK"?(l(),b("img",{key:0,src:e.$utils.actionIcon(_.type),width:"40"},null,8,fu)):(l(),b("i",gu,u(e.$utils.actionIcon(_.type)),1))]),a("div",vu,[a("div",bu,[a("div",Eu,u(e.$utils.actionMessage(_.type,_.time)),1)]),a("div",Cu,u(_.data?_.data.content:""),1),a("div",yu,u(c.actionInfo(_.data)),1)])])]))),128))])])])])]),_:1})]),_:1},8,["opened"])],64)}var wu=q(Fc,[["render",ku]]);const Du={props:{src:String,icon:Boolean,cropper:Boolean,cancelText:{type:String,default:"Cancel"},doneText:{type:String,default:"Done"},viewportType:{type:String,default:"circle"},viewportWidth:{type:Number,default:320},viewportHeight:{type:Number,default:320},cropWidth:{type:Number,default:320},cropHeight:{type:Number,default:320}},emits:["file"],setup(e,{emit:t}){const d=de(null),h=({file:c,fileContent:f})=>{let C;function v(){C.setZoom(C._currentZoom)}const m=N.popup.create({backdrop:N.$(d.value).parents(".popup").length===0,content:`
            <div class="popup popup-avatar-picker popup-tablet-fullscreen theme-dark">
              <div class="view view-init">
                <div class="page">
                  <div class="popup-avatar-picker-image-crop"></div>
                  <div class="popup-avatar-picker-toolbar toolbar tabbar toolbar-bottom no-hairline no-shadow">
                    <div class="toolbar-inner">
                      <a href="#" class="link popup-close" data-popup=".popup-avatar-picker">${e.cancelText}</a>
                      <a href="#" class="link popup-avatar-picker-crop-image">${e.doneText}</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          `.trim(),on:{open(){const E=fe.Croppie||fe;C=new E(m.$el.find(".popup-avatar-picker-image-crop")[0],{enableZoom:!0,enforceBoundary:!0,showZoomer:!0,enableExif:!0,viewport:{width:e.viewportWidth,height:e.viewportHeight,type:e.viewportType}}),C.bind({url:f,zoom:0}),m.$el.find("a.popup-avatar-picker-crop-image").on("click",()=>{C.result({type:"base64",size:{width:e.cropWidth,height:e.cropHeight},format:"png"}).then(g=>{t("file",{file:c,fileContent:g})}),m.close()}),N.on("resize",v)},closed(){N.off("resize",v),setTimeout(()=>{m.destroy(),C.destroy()},100)}}});m.open()};return{elRef:d,onFileChange:c=>{const f=c.target,C=f.files[0];if(C.type.indexOf("image")===0){const v=new window.FileReader;v.onload=m=>{e.cropper?(h({file:C,fileContent:m.target.result}),f.value=null):t("file",{file:C,fileContent:m.target.result})},v.readAsDataURL(C)}}}}},Au=["src"],Tu=a("i",{class:"icon f7-icons if-not-md"},"camera_fill",-1),Iu=a("i",{class:"icon f7-icons if-md"},"camera",-1);function $u(e,t,d,h,o,c){return l(),b("div",{class:"avatar-picker",ref:h.elRef},[d.src?(l(),b("img",{key:0,src:d.src},null,8,Au)):w("",!0),a("label",null,[a("input",{type:"file",accept:"image/png,image/gif,image/jpeg",onChange:t[0]||(t[0]=(...f)=>h.onFileChange&&h.onFileChange(...f))},null,32),d.icon?(l(),b(x,{key:0},[Tu,Iu],64)):w("",!0)]),_e(e.$slots,"default")],512)}var Uu=q(Du,[["render",$u]]);const Ru={props:{src:String},computed:{imageUrl(){return this.src||""}}},Su={class:"avatar-picker"},xu=["src"];function Nu(e,t,d,h,o,c){return l(),b("div",Su,[a("img",{src:d.src},null,8,xu),_e(e.$slots,"default")])}var Se=q(Ru,[["render",Nu]]);const qu={name:"QRSALE",components:{ListPeople:Te,Slide:Ue,UserActions:wu,AvatarPicker:Uu,Avatar:Se},props:{f7route:Object,f7router:Object,id:Number,privateCode:String,isPopup:Boolean},emits:["closeItem"],setup(){},data(){let e={photo:"",firstName:"",middleName:"",lastName:"",organization:"",title:"",note:"",nickname:"",namePrefix:"",nameSuffix:"",gender:"",workPhone:"",homePhone:"",cellPhone:"",email:"",workEmail:"",facebook:"",zalo:"",linkedIn:"",twitter:"",momo:""},t={id:0,title:"Th\u1EBB Thi\u1EBFt l\u1EADp",cardType:"CARD_TYPE.COMPANY_NAMECARD",imageUrls:[],productId:0,supportId:111,ownerOrganizationId:0,status:"NOT_GENERATED",metadata:{vCard:e,company:{enable:!1,title:"",name:"",address:"",role:""},introduction:{enable:!1,title:"Gi\u1EDBi thi\u1EC7u v\u1EC1 s\u1EA3n ph\u1EA9m, d\u1ECBch v\u1EE5",content:"N\u1ED9i dung"},qrcall:{enable:!0,title:"G\u1ECDi l\u1EA1i cho t\xF4i",name:"Quang",phoneNumber:"02800224088",workTime:"gi\u1EDD h\xE0nh ch\xEDnh"}}},d={title:"Danh thi\u1EBFp c\xF4ng ty 4.0",desc:"\xC1p d\u1EE5ng c\xF4ng ngh\u1EC7 4.0 \xE1p d\u1EE5ng cho Danh thi\u1EBFp, n\xE2ng t\u1EA7m Th\u01B0\u01A1ng hi\u1EC7u v\xE0 nhi\u1EC1u gi\xE1 tr\u1ECB c\u1ED1t l\xF5i c\u1EE7a Doanh nghi\u1EC7p",imageUrl:"",icon:"",features:[{title:"Ni\u1EC1m tin t\u1EEB kh\xE1ch h\xE0ng"},{title:"Chuy\xEAn nghi\u1EC7p trong Kinh doanh"},{title:"Uy t\xEDn c\u1EE7a nh\xE2n vi\xEAn"}]},h=W.socialUrls,o=W.props;return{item:t,vCard:e,payments:[],ecommerce:[],banks:[],bank:{tenNganHang:"",tenTaikhoan:"",soTaiKhoan:"",chinhanh:""},imageUrl:"",slide:d,actions:[],src:"http://apps.vinaas.com/file/tgs5EFo1O",urls:h,props:o,listPayments:W.payments,listEcommerce:W.ecommerce}},computed:{isActive(){return this.item.status=="QRID_STATUS.ACTIVE"||this.item.status=="ACTIVE"},getNFCUrl(){if(this.id>0&&this.privateCode.length>4)return`https://www.qrcare.vn/nfc/${this.id}/p/${this.privateCode.slice(0,4)}`},discount(){return this.metadata&&this.metadata.discount?this.metadata.discount:{enable:!1}},isDemo(){return this.item.supportId==111||this.item.supportId=="888"},textChucDanh(){return this.isDemo?"m\u1ED9t ng\u01B0\u1EDDi b\u1EA1n...":"gi\xE1m \u0111\u1ED1c, ch\u1EE7 t\u1ECBch, tr\u01B0\u1EDFng ph\xF2ng,..."}},watch:{id:"getDeviceData"},methods:{copyNFC(){console.log("socialUrls",W.props),navigator.clipboard.writeText(this.getNFCUrl),N.dialog.alert("Success to clipboard")},async onFile(e){const{file:t,fileContent:d}=e;console.log("bao"),console.log({file:t,fileContent:d});var h=this.dataURItoBlob(d);const o=new FormData;o.append("canvasImage",h);try{let c="https://media.vinaas.com/upload/qrcare-vn";const{data:f}=await this.$axios.post(c,o,{headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"}});if(f&&f.id){const C="https://apps.vinaas.com/file/"+f.id;this.imageUrl=C,this.item.imageUrls[0]=C}}catch(c){console.log("err",c)}finally{}},dataURItoBlob(e){var t;e.split(",")[0].indexOf("base64")>=0?t=atob(e.split(",")[1]):t=unescape(e.split(",")[1]);for(var d=e.split(",")[0].split(":")[1].split(";")[0],h=new Uint8Array(t.length),o=0;o<t.length;o++)h[o]=t.charCodeAt(o);return new Blob([h],{type:d})},closeItem(){this.$emit("closeItem")},async getDeviceData(){if(this.id<=0)return;let e=await this.$api.getQRID(this.id,this.privateCode);e&&(console.log("rs",e),this.item=e,this.item.metadata&&(this.vCard=this.item.metadata.vcard||{},this.payments=this.item.metadata.payments||{},this.ecommerce=this.item.metadata.ecommerce||{}),this.item.metadata||(this.item.metadata={}),this.item.metadata.introduction||(this.item.metadata.introduction={enable:!1,title:"",content:""}),this.item.imageUrls&&this.item.imageUrls[0]?this.imageUrl=this.item.imageUrls[0]:this.imageUrl="https://apps.vinaas.com/file/tgs5EFo1O",this.isPopup||this.$api.OwnerAction(this.id,this.privateCode))},syncData(){this.item.ownerName=this.vCard.lastName+" "+this.vCard.firstName,this.item.ownerPhoneNumber=this.vCard.homePhone},async updateData(){if(this.item.status=="NOT_GENERATED")return await this.initData();this.item.status="QRID_STATUS.ACTIVE",this.item.metadata.vcard=this.vCard,this.item.metadata.payments=this.payments,this.item.metadata.ecommerce=this.ecommerce,this.syncData(),await this.$api.updateQRSaleInfo(this.id,this.item,this.privateCode),N.dialog.alert("SUCCESS updateData()");var e=await this.$api.getVcard(this.id,this.privateCode.substring(0,2));console.log("vCard",this.id,this.privateCode.substring(0,2),e)},async initData(){console.log("initData()",this.id,this.privateCode,this.item);let e=await this.$api.initCard(this.id,this.privateCode,this.item);e&&(N.dialog.alert("Kh\u1EDFi t\u1EA1o th\xE0nh c\xF4ng"),this.item=e)},updateItem(e){}},async mounted(){await this.getDeviceData()}},se=e=>(le("data-v-148e6317"),e=e(),re(),e),Pu=r("Th\u1EBB Thi\u1EBFt l\u1EADp c\xE1 nh\xE2n"),Bu=r("Close"),Qu={class:"page-content"},Lu=se(()=>a("div",{style:{"text-align":"center"}},"H\xECnh \u0111\u1EA1i di\u1EC7n",-1)),Fu=r("Th\xF4ng tin c\xE1 nh\xE2n"),Ou=r("Li\xEAn k\u1EBFt c\xE1 nh\xE2n"),Vu={class:"list no-hairlines-md"},Mu={key:0,class:"item-media"},Hu=["src"],Ku={key:1,class:"item-media"},zu={class:"f7-icons size-40"},ju={class:"item-inner"},Yu={class:"item-title item-label"},Gu={class:"item-input-wrap"},Wu=["placeholder","onUpdate:modelValue"],Zu=se(()=>a("span",{class:"input-clear-button"},null,-1)),Xu=r("Thanh to\xE1n c\xE1 nh\xE2n"),Ju={class:"list no-hairlines-md"},eh={key:0,class:"item-media"},th=["src"],nh={key:1,class:"item-media"},ih={class:"f7-icons size-40"},ah={class:"item-inner"},oh={class:"item-title item-label"},sh={class:"item-input-wrap"},lh=["placeholder","onUpdate:modelValue"],rh=se(()=>a("span",{class:"input-clear-button"},null,-1)),dh=r("Th\xEAm Ng\xE2n h\xE0ng"),ch=r("B\xE1n h\xE0ng c\xE1 nh\xE2n"),uh={class:"list no-hairlines-md"},hh={key:0,class:"item-media"},ph=["src"],mh={key:1,class:"item-media"},_h={class:"f7-icons size-40"},fh={class:"item-inner"},gh={class:"item-title item-label"},vh={class:"item-input-wrap"},bh=["placeholder","onUpdate:modelValue"],Eh=se(()=>a("span",{class:"input-clear-button"},null,-1)),Ch=r("Hi\u1EC3n th\u1ECB N\u01A1i l\xE0m vi\u1EC7c"),yh=r("Gi\u1EDBi thi\u1EC7u b\u1EA3n th\xE2n "),kh=r("Gi\u1EDBi thi\u1EC7u v\u1EC1 c\xF4ng vi\u1EC7c, s\u1EA3n ph\u1EA9m d\u1ECBch v\u1EE5 \u0111ang kinh doanh, d\u1EF1 \xE1n \u0111ang tham gia,... "),wh=r("C\u1EADp nh\u1EADt"),Dh=r("Kh\u1EDFi t\u1EA1o"),Ah=r("Copy NFC");function Th(e,t,d,h,o,c){const f=s("f7-nav-title"),C=s("f7-link"),v=s("f7-nav-right"),m=s("f7-navbar"),E=s("avatar-picker"),g=s("f7-block"),y=s("f7-card-header"),k=s("f7-list-input"),A=s("f7-list"),_=s("f7-block-title"),U=s("f7-button"),B=s("f7-card"),T=s("f7-toggle"),D=s("f7-card-content"),P=s("f7-block-header"),Q=s("f7-text-editor"),R=s("f7-col"),Y=s("f7-row"),z=s("user-actions"),K=s("slide"),j=s("f7-page");return l(),p(j,null,{default:i(()=>[n(m,{sliding:!1},{default:i(()=>[n(f,{sliding:""},{default:i(()=>[Pu]),_:1}),d.isPopup?(l(),p(v,{key:0},{default:i(()=>[n(C,{onClick:t[0]||(t[0]=$=>c.closeItem())},{default:i(()=>[Bu]),_:1})]),_:1})):w("",!0)]),_:1}),a("div",Qu,[n(g,null,{default:i(()=>[n(E,{class:"avatar-center",src:o.imageUrl,icon:"",cropper:"",onFile:c.onFile},null,8,["src","onFile"]),Lu]),_:1}),n(B,null,{default:i(()=>[n(y,{"bg-color":"green"},{default:i(()=>[Fu]),_:1}),n(A,{"no-hairlines-md":""},{default:i(()=>[a("li",null,[n(k,{type:"text",outline:"",label:"T\xEAn","floating-label":"",maxlength:"50",required:"","clear-button":"",value:o.vCard.firstName,"onUpdate:value":t[1]||(t[1]=$=>o.vCard.firstName=$)},null,8,["value"]),n(k,{type:"text",outline:"",label:"H\u1ECD (tu\u1EF3 ch\u1ECDn)","floating-label":"",info:"kh\xF4ng nh\u1EADp c\u0169ng \u0111\u01B0\u1EE3c",maxlength:"50","clear-button":"",value:o.vCard.lastName,"onUpdate:value":t[2]||(t[2]=$=>o.vCard.lastName=$)},null,8,["value"])]),n(k,{outline:"",type:"text",label:"Chuy\xEAn m\xF4n | Ch\u1EE9c danh (t\u1EF1 phong)","floating-label":"",resizable:"",placeholder:"m\u1ED9t ng\u01B0\u1EDDi b\u1EA1n",info:c.textChucDanh,maxlength:"50","clear-button":"",value:o.vCard.title,"onUpdate:value":t[3]||(t[3]=$=>o.vCard.title=$)},null,8,["info","value"]),n(k,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i c\xE1 nh\xE2n","floating-label":"",type:"text",placeholder:"",pattern:"[0-9]*","clear-button":"",value:o.vCard.homePhone,"onUpdate:value":t[4]||(t[4]=$=>o.vCard.homePhone=$)},null,8,["value"])]),_:1}),n(_,null,{default:i(()=>[Ou]),_:1}),a("div",Vu,[a("ul",null,[(l(!0),b(x,null,L(o.props,$=>(l(),b("li",{class:"item-content item-input",key:$.name},[$.icon.includes(".")?(l(),b("div",Mu,[a("img",{src:$.icon,width:"30"},null,8,Hu)])):(l(),b("div",Ku,[a("i",zu,u($.icon),1)])),a("div",ju,[a("div",Yu,u($.name),1),a("div",Gu,[F(a("input",{type:"text",placeholder:$.placeholder,"onUpdate:modelValue":M=>o.vCard[$.name]=M},null,8,Wu),[[J,o.vCard[$.name]]]),Zu])])]))),128))])]),n(_,null,{default:i(()=>[Xu]),_:1}),a("div",Ju,[a("ul",null,[(l(!0),b(x,null,L(o.listPayments,$=>(l(),b("li",{class:"item-content item-input",key:$.name},[$.icon.includes(".")?(l(),b("div",eh,[a("img",{src:$.icon,width:"30"},null,8,th)])):(l(),b("div",nh,[a("i",ih,u($.icon),1)])),a("div",ah,[a("div",oh,u($.name),1),a("div",sh,[F(a("input",{type:"text",placeholder:$.placeholder,"onUpdate:modelValue":M=>o.payments[$.name]=M},null,8,lh),[[J,o.payments[$.name]]]),rh])])]))),128))])]),n(U,{round:"",onClick:t[5]||(t[5]=$=>e.addBank())},{default:i(()=>[dh]),_:1}),n(_,null,{default:i(()=>[ch]),_:1}),a("div",uh,[a("ul",null,[(l(!0),b(x,null,L(o.listEcommerce,$=>(l(),b("li",{class:"item-content item-input",key:$.name},[$.icon.includes(".")?(l(),b("div",hh,[a("img",{src:$.icon,width:"30"},null,8,ph)])):(l(),b("div",mh,[a("i",_h,u($.icon),1)])),a("div",fh,[a("div",gh,u($.name),1),a("div",vh,[F(a("input",{type:"text",placeholder:$.placeholder,"onUpdate:modelValue":M=>o.ecommerce[$.name]=M},null,8,bh),[[J,o.ecommerce[$.name]]]),Eh])])]))),128))])])]),_:1}),e.$utils.isOrganization(o.item)?(l(),p(B,{key:0},{default:i(()=>[n(y,{"bg-color":"blue"},{default:i(()=>[Ch,n(T,{checked:o.item.metadata.company.enable,"onUpdate:checked":t[6]||(t[6]=$=>o.item.metadata.company.enable=$)},null,8,["checked"])]),_:1}),n(D,null,{default:i(()=>[F(n(A,{"no-hairlines-md":""},{default:i(()=>[n(k,{outline:"",type:"text",label:"T\xEAn c\xF4ng ty","floating-label":"",resizable:"",maxlength:"100","clear-button":"",value:o.item.metadata.company.name,"onUpdate:value":t[7]||(t[7]=$=>o.item.metadata.company.name=$)},null,8,["value"]),n(k,{outline:"",type:"text",label:"\u0110\u1ECBa ch\u1EC9 l\xE0m vi\u1EC7c","floating-label":"",resizable:"",maxlength:"200","clear-button":"",value:o.item.metadata.company.address,"onUpdate:value":t[8]||(t[8]=$=>o.item.metadata.company.address=$)},null,8,["value"]),n(k,{outline:"",type:"text",label:"Ch\u1EE9c danh","floating-label":"",resizable:"",maxlength:"100","clear-button":"",value:o.item.metadata.company.title,"onUpdate:value":t[9]||(t[9]=$=>o.item.metadata.company.title=$)},null,8,["value"]),n(k,{outline:"",type:"email",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i c\xF4ng ty ","floating-label":"",resizable:"",maxlength:"100","clear-button":"",value:o.vCard.workPhone,"onUpdate:value":t[10]||(t[10]=$=>o.vCard.workPhone=$)},null,8,["value"]),n(k,{outline:"",type:"email",label:"Email c\xF4ng ty ","floating-label":"",resizable:"",maxlength:"100","clear-button":"",value:o.vCard.workEmail,"onUpdate:value":t[11]||(t[11]=$=>o.vCard.workEmail=$)},null,8,["value"])]),_:1},512),[[H,o.item.metadata.company.enable]])]),_:1})]),_:1})):w("",!0),n(B,null,{default:i(()=>[n(y,{"bg-color":"blue"},{default:i(()=>[yh,n(T,{checked:o.item.metadata.introduction.enable,"onUpdate:checked":t[12]||(t[12]=$=>o.item.metadata.introduction.enable=$)},null,8,["checked"])]),_:1}),n(D,null,{default:i(()=>[F(n(A,{"no-hairlines-md":""},{default:i(()=>[n(k,{outline:"",type:"text",label:"C\xF4ng vi\u1EC7c hi\u1EC7n t\u1EA1i","floating-label":"",resizable:"",maxlength:"50","clear-button":"",value:o.item.metadata.introduction.title,"onUpdate:value":t[13]||(t[13]=$=>o.item.metadata.introduction.title=$)},null,8,["value"]),n(P,null,{default:i(()=>[kh]),_:1}),n(Q,{placeholder:"Enter text...",buttons:[["bold","italic","underline"],["orderedList","unorderedList"],["paragraph","h3","h4"],["link","image"]],value:o.item.metadata.introduction.content,"onTexteditor:change":t[14]||(t[14]=$=>o.item.metadata.introduction.content=$)},null,8,["value"])]),_:1},512),[[H,o.item.metadata.introduction.enable]])]),_:1})]),_:1}),n(g,null,{default:i(()=>[n(Y,null,{default:i(()=>[n(R,{width:"100"},{default:i(()=>[c.isActive?(l(),p(U,{key:0,fill:"",round:"",large:"",onClick:t[15]||(t[15]=$=>c.updateData())},{default:i(()=>[wh]),_:1})):(l(),p(U,{key:1,fill:"",round:"",large:"",onClick:t[16]||(t[16]=$=>c.updateData())},{default:i(()=>[Dh]),_:1}))]),_:1})]),_:1}),c.getNFCUrl?(l(),p(U,{key:0,large:"",onClick:t[17]||(t[17]=$=>c.copyNFC())},{default:i(()=>[Ah]),_:1})):w("",!0)]),_:1}),c.isActive?(l(),p(z,{key:1,qrid:d.id,privateCode:d.privateCode},null,8,["qrid","privateCode"])):w("",!0),n(K,{id:100010010960005,privateCode:122131,initInfo:o.slide},null,8,["initInfo"])])]),_:1})}var xe=q(qu,[["render",Th],["__scopeId","data-v-148e6317"]]);const Ih=V({emits:["closeItem"],props:{f7route:Object,f7router:Object,id:Number,privateCode:String},setup(){},data(){return{qrid:{}}},watch:{id:"getDeviceData"},methods:{closeItem(){console.log("demo close()"),this.$emit("closeItem")},async getDeviceData(){this.id>0&&(console.log("demo-watch()"),this.qrid=await this.$api.getQRID(this.id,this.privateCode))}},async mounted(){console.log("demo-mounted()"),await this.getDeviceData()}}),$h=r("X");function Uh(e,t,d,h,o,c){const f=s("f7-link"),C=s("f7-nav-right"),v=s("f7-navbar"),m=s("f7-page-content"),E=s("f7-page");return l(),p(E,null,{default:i(()=>[n(v,{title:"Popup"},{default:i(()=>[n(C,null,{default:i(()=>[n(f,{onClick:t[0]||(t[0]=g=>e.closeItem())},{default:i(()=>[$h]),_:1})]),_:1})]),_:1}),n(m,null,{default:i(()=>[a("div",null,u(e.id),1),a("div",null,u(e.privateCode),1),a("div",null,u(e.qrid.metadata),1),a("a",{onClick:t[1]||(t[1]=g=>e.closeItem())},"Close ")]),_:1})]),_:1})}var Ne=q(Ih,[["render",Uh]]);const Rh=V({components:{EditCard:xe,DemoPage:Ne},props:{f7route:Object,f7router:Object},data(){return{name:"Th\u1EBB Thi\u1EBFt l\u1EADp C\xF4ng ty",id:parseInt(this.f7route.params.id),privateCode:this.f7route.params.privateCode,selectedId:0,selectedCode:this.f7route.params.privateCode,data:{title:"",cardType:"CARD_TYPE.COMPANY_NAMECARD",status:"",ownerOrganizationId:0,metadata:{}},project:{},namecards:[],popupOpened:!1}},setup(){},computed:{isActive(){return this.data.status=="QRID_STATUS.ACTIVE"||this.data.status}},methods:{async showItem(e){console.log("click showItem()",e,e.id,e.private),this.selectedId=e.id,this.selectedCode=e.private.toString(),this.popupOpened=!0},closeItem(){console.log("setup close"),this.popupOpened=!1},async loadData(){this.$utils.is_setup(this.id)||(N.dialog.alert("Kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp!"),this.f7router.navigate("/"));try{let e=await this.$api.verifyCard(this.id,this.privateCode);e&&(console.log(e.status),e.status=="INVALID_PRIVATE"?this.f7router.navigate("/"):e.status=="NOT_GENERATED"?this.data=e:(this.data=await this.$api.getQRID(this.id,this.privateCode),this.namecards=await this.$api.getQRIDsOfSetup(this.id,this.privateCode)))}catch(e){N.dialog.alert("Kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp!")}},async updateData(){if(this.data.status=="NOT_GENERATED"){N.dialog.alert("Th\u1EBB ch\u01B0a \u0111\u01B0\u1EE3c kh\u1EDFi t\u1EA1o");return}this.data.status=="QRID_STATUS.GENERATED"&&(this.data.activatedDate=new Date,this.data.status="QRID_STATUS.ACTIVE"),await this.$api.updateQRSaleInfo(this.id,this.data,this.privateCode)&&N.dialog.alert("SUCCESS updateData()")},async initData(){console.log("initData()",this.id,this.privateCode,this.data);let e=await this.$api.initCard(this.id,this.privateCode,this.data);e&&(N.dialog.alert("Kh\u1EDFi t\u1EA1o th\xE0nh c\xF4ng"),this.data=e)}},async mounted(){await this.loadData()}}),Sh=r("Close"),xh={key:0,class:"content"},Nh=r("Th\xF4ng tin qu\u1EA3n l\xFD"),qh=r("Kh\u1EDFi t\u1EA1o"),Ph={key:1,class:"content"},Bh=r("Th\xF4ng tin qu\u1EA3n l\xFD"),Qh=r("C\u1EADp nh\u1EADt"),Lh=r("Danh thi\u1EBFp \u0111ang qu\u1EA3n l\xFD");function Fh(e,t,d,h,o,c){const f=s("f7-nav-title"),C=s("f7-link"),v=s("f7-nav-right"),m=s("f7-navbar"),E=s("f7-card-header"),g=s("f7-list-input"),y=s("f7-button"),k=s("f7-list-item"),A=s("f7-list"),_=s("f7-card"),U=s("f7-card-content"),B=s("f7-page"),T=s("edit-card"),D=s("f7-popup");return l(),b(x,null,[n(B,null,{default:i(()=>[n(m,{sliding:!1},{default:i(()=>[n(f,{sliding:""},{default:i(()=>[r(u(e.name),1)]),_:1}),e.isPopup?(l(),p(v,{key:0},{default:i(()=>[n(C,{onClick:t[0]||(t[0]=P=>e.closeItem())},{default:i(()=>[Sh]),_:1})]),_:1})):w("",!0)]),_:1}),e.data.status=="NOT_GENERATED"?(l(),b("div",xh,[n(_,null,{default:i(()=>[n(E,{"bg-color":"green"},{default:i(()=>[Nh]),_:1}),n(A,{"no-hairlines-md":""},{default:i(()=>[n(g,{outline:"",label:"CardType","floating-label":"",type:"text",disabled:"",value:e.data.cardType,"onUpdate:value":t[1]||(t[1]=P=>e.data.cardType=P)},null,8,["value"]),n(g,{outline:"",label:"Tr\u1EA1ng th\xE1i","floating-label":"",type:"text",disabled:"",value:e.data.status,"onUpdate:value":t[2]||(t[2]=P=>e.data.status=P)},null,8,["value"]),n(g,{type:"text",outline:"",label:"T\xEAn ","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"100","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:e.data.ownerName,"onUpdate:value":t[3]||(t[3]=P=>e.data.ownerName=P)},null,8,["value"]),n(g,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1 cu\u1ED1i",pattern:"[0-9]*","clear-button":"",value:e.data.ownerPhoneNumber,"onUpdate:value":t[4]||(t[4]=P=>e.data.ownerPhoneNumber=P)},null,8,["value"]),n(g,{outline:"",label:"ID c\xF4ng ty","floating-label":"",type:"number",pattern:"[0-9]*","clear-button":"",value:e.data.ownerOrganizationId,"onUpdate:value":t[5]||(t[5]=P=>e.data.ownerOrganizationId=P)},null,8,["value"]),n(g,{outline:"",type:"textarea",label:"\u0110\u1ECBa ch\u1EC9","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:e.data.ownerAddress,"onUpdate:value":t[6]||(t[6]=P=>e.data.ownerAddress=P)},null,8,["value"]),n(k,null,{default:i(()=>[n(y,{fill:"",large:"",outline:"",onClick:t[7]||(t[7]=P=>e.initData())},{default:i(()=>[qh]),_:1})]),_:1})]),_:1})]),_:1})])):(l(),b("div",Ph,[n(_,null,{default:i(()=>[n(E,{"bg-color":"green"},{default:i(()=>[Bh]),_:1}),n(A,{"no-hairlines-md":""},{default:i(()=>[n(g,{type:"text",outline:"",label:"T\xEAn ","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"100","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:e.data.ownerName,"onUpdate:value":t[8]||(t[8]=P=>e.data.ownerName=P)},null,8,["value"]),n(g,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1 cu\u1ED1i",pattern:"[0-9]*","clear-button":"",value:e.data.ownerPhoneNumber,"onUpdate:value":t[9]||(t[9]=P=>e.data.ownerPhoneNumber=P)},null,8,["value"]),n(g,{outline:"",type:"textarea",label:"\u0110\u1ECBa ch\u1EC9","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:e.data.ownerAddress,"onUpdate:value":t[10]||(t[10]=P=>e.data.ownerAddress=P)},null,8,["value"]),n(k,null,{default:i(()=>[n(y,{fill:"",large:"",outline:"",onClick:t[11]||(t[11]=P=>e.updateData())},{default:i(()=>[Qh]),_:1})]),_:1})]),_:1})]),_:1}),n(_,null,{default:i(()=>[n(E,{"bg-color":"blue"},{default:i(()=>[Lh]),_:1}),n(U,null,{default:i(()=>[n(A,{"media-list":""},{default:i(()=>[(l(!0),b(x,null,L(e.namecards,P=>(l(),p(k,{key:P.id,onClick:Q=>e.showItem(P),header:P.status,title:P.ownerName,subtitle:e.$utils.formatQRID(P.id),text:"Kh\u1EDFi t\u1EA1o: "+e.$utils.formatDate(P.activatedDate)},null,8,["onClick","header","title","subtitle","text"]))),128))]),_:1})]),_:1})]),_:1})]))]),_:1}),n(D,{opened:e.popupOpened,"tablet-fullscreen":!0},{default:i(()=>[n(T,{id:e.selectedId,privateCode:e.selectedCode,isPopup:!0,onCloseItem:e.closeItem},null,8,["id","privateCode","onCloseItem"])]),_:1},8,["opened"])],64)}var Oh=q(Rh,[["render",Fh]]);const Vh={name:"QRNAMECARD",components:{Slide:Ue,Avatar:Se},props:{f7route:Object,f7router:Object,accessType:String,id:Number,privateCode:String,index:Number},setup(){},data(){let e={facebook:"https://",tiktok:"",skype:"https://",linkedIn:"https://",twitter:"https://",momo:"https://",qrcare:"https://"};return{item:{title:"",imageUrls:["https://apps.vinaas.com/file/tgs5EFo1O"],ownerName:"",ownerPhoneNumber:"",supportId:111,status:"GENERATED",metadata:{company:{enable:!1,title:"",address:"",name:"",role:""},introduction:{enable:!1,title:"",content:""}}},vCard:{photo:"",firstName:"",middleName:"",lastName:"",organization:"",title:"",note:"",nickname:"",namePrefix:"",nameSuffix:"",gender:"",workPhone:"",homePhone:"",cellPhone:"",email:"",workEmail:"",socialUrls:e,facebook:"",zalo:"",linkedIn:"",twitter:"",momo:""},socialUrls:e,namecard40:{title:"Danh thi\u1EBFp T\u01B0\u01A1ng t\xE1c 4.0",desc:"Mang s\u1EF1 tr\xE2n tr\u1ECDng v\xE0 chuy\xEAn nghi\u1EC7p, nh\u1EEFng gi\xE1 tr\u1ECB v\u1ED1n c\xF3 c\u1EE7a bi\u1EC3u t\u01B0\u1EE3ng Danh thi\u1EBFp",imageUrl:"",icon:"",features:[{title:"\u0110\u01A1n gi\u1EA3n m\xE0 Chuy\xEAn nghi\u1EC7p"},{title:"Ch\u1EA1m \u0111\u1EC3 k\u1EBFt n\u1ED1i, t\u01B0\u01A1ng t\xE1c"},{title:"D\u1EC5 d\xE0ng chia s\u1EBB qua zalo, facebook,..."}]},vCardFile:"",metadata:{vcard:{},payments:{},ecommerce:{}}}},computed:{background(){if(this.item.imageUrls)return this.item.imageUrls[0]||"https://apps.vinaas.com/file/tgs5EFo1O"},address(){if(this.metadata&&this.metadata.vcard)return this.metadata.vcard.address||""},vcardButtons(){let e=[],t=W.props;for(var d in t){let h=t[d].name;h!="address"&&this.metadata.vcard&&this.metadata.vcard[h]&&e.push({name:h,icon:t[d].icon,value:this.metadata.vcard[h]})}return e},paymentsButtons(){let e=[],t=W.payments;for(var d in t){let h=t[d].name;this.metadata.payments&&this.metadata.payments[h]&&e.push({name:h,icon:t[d].icon,value:this.metadata.payments[h]})}return e},ecommerceButtons(){let e=[],t=W.ecommerce;for(var d in t){let h=t[d].name;this.metadata.ecommerce&&this.metadata.ecommerce[h]&&e.push({name:h,icon:t[d].icon,value:this.metadata.ecommerce[h]})}return e}},methods:{async clickAddContact(){this.$api.PersonAction(this.id,this.privateCode,"CONTACT",this.index,{title:"clickAddContact",content:"Them vao danh ba"})},clickCall(e){console.log("clickCall",e),this.$api.PersonAction(this.id,this.privateCode,"CALL",this.index,{title:"clickCall",content:"tel:"+e}),e&&(window.location="tel:"+e)},clickLink(e,t){let d=t;if(e=="zalo"&&!t.includes("zalo")&&(d="https://zalo.me/"+t),e=="email"){this.clickMail(d);return}this.$api.PersonAction(this.id,this.privateCode,"CLICK",this.index,{title:"click "+e,content:d}),window.open(d)},clickMail(e){console.log("mailto",e),this.$api.PersonAction(this.id,this.privateCode,"EMAIL",this.index,{title:"clickMail",content:"mailto: "+e}),e&&(window.location="mailto:"+e)},async getDeviceData(){let e=await this.$api.getQRID(this.id,this.privateCode);if(e){this.item=e,e.metadata&&e.metadata.vcard&&(this.metadata=e.metadata,this.vCard=e.metadata.vcard),this.item.metadata.company||(this.item.metadata.company={enable:!1,title:"",address:"",name:"",role:""}),this.item.metadata.introduction||(this.item.metadata.introduction={enable:!1,title:"",content:""}),this.item.metadata.qrcall||(this.item.metadata.qrcall={enable:!1,title:"G\u1ECDi l\u1EA1i cho t\xF4i",name:"Quang",phoneNumber:"",workTime:""});const t="vcard_"+this.id+"-"+this.privateCode.substring(0,2)+".vcf";this.vCardFile=`https://api.qrcare.net/api/Containers/vcard/download/${t}`,this.accessType&&this.$api.PersonAction(this.id,this.privateCode,this.accessType,this.index)}else console.log(e),N.dialog.alert("Danh thi\u1EBFp ch\u01B0a k\xEDch ho\u1EA1t"),this.f7router.navigate("/")},updateItem(e){}},async mounted(){await this.getDeviceData()}},Mh={class:"fab fab-extended fab-center-bottom color-green"},Hh=["href"],Kh=a("i",{class:"icon f7-icons if-not-md"},"plus",-1),zh=a("i",{class:"icon material-icons md-only"},"add",-1),jh=a("div",{class:"fab-text"},"Danh B\u1EA1",-1),Yh=[Kh,zh,jh],Gh={class:"page-content",style:{"padding-bottom":"100px"}},Wh=r("Th\xF4ng tin c\xE1 nh\xE2n"),Zh={key:0,class:"row"},Xh=["onClick"],Jh=["src"],ep={key:1,class:"f7-icons size-28"},tp=r("Thanh to\xE1n c\xE1 nh\xE2n"),np={key:2,class:"row"},ip=["onClick"],ap=["src"],op={key:1,class:"f7-icons size-28"},sp=r("B\xE1n h\xE0ng Online"),lp={key:4,class:"row"},rp=["onClick"],dp=["src"],cp={key:1,class:"f7-icons size-28"},up=["innerHTML"];function hp(e,t,d,h,o,c){const f=s("f7-icon"),C=s("f7-fab"),v=s("avatar"),m=s("f7-block-title"),E=s("f7-block"),g=s("f7-card-header"),y=s("f7-card-content"),k=s("f7-card"),A=s("f7-page");return l(),p(A,{"no-navbar":!0},{default:i(()=>[a("div",Mh,[a("a",{class:"external",href:o.vCardFile,onClick:t[0]||(t[0]=_=>c.clickAddContact())},Yh,8,Hh)]),n(C,{position:"right-bottom",color:"red",text:"",onClick:t[1]||(t[1]=_=>c.clickCall(o.item.ownerPhoneNumber))},{default:i(()=>[n(f,{f7:"phone_fill"})]),_:1}),a("div",Gh,[n(E,null,{default:i(()=>[n(v,{src:c.background,style:{margin:"auto",width:"50%",height:"50%"}},null,8,["src"]),n(m,{style:{"text-align":"center",margin:"10px"},large:""},{default:i(()=>[r(u(o.vCard.lastName+" "+o.vCard.firstName),1)]),_:1}),o.vCard.title?(l(),p(m,{key:0,style:{"text-align":"center",margin:"10px"},medium:""},{default:i(()=>[r(u(o.vCard.title),1)]),_:1})):w("",!0)]),_:1}),n(k,null,{default:i(()=>[n(g,{"bg-color":"green"},{default:i(()=>[Wh]),_:1}),n(y,null,{default:i(()=>[c.vcardButtons.length>0?(l(),b("div",Zh,[(l(!0),b(x,null,L(c.vcardButtons,_=>(l(),b("a",{key:_.name,class:"col-50 button button-round",onClick:U=>c.clickLink(_.name,_.value)},[_.icon.includes(".")?(l(),b("img",{key:0,src:_.icon,width:"30",style:{width:"30px",margin:"5px",display:"inline-block","vertical-align":"top"}},null,8,Jh)):(l(),b("i",ep,u(_.icon),1)),a("span",null,u(_.name),1)],8,Xh))),128))])):w("",!0),c.paymentsButtons.length>0?(l(),p(m,{key:1},{default:i(()=>[tp]),_:1})):w("",!0),c.paymentsButtons.length>0?(l(),b("div",np,[(l(!0),b(x,null,L(c.paymentsButtons,_=>(l(),b("a",{key:_.name,class:"col-50 button button-round",onClick:U=>c.clickLink(_.name,_.value)},[_.icon.includes(".")?(l(),b("img",{key:0,src:_.icon,width:"30",style:{width:"30px",margin:"5px",display:"inline-block","vertical-align":"top"}},null,8,ap)):(l(),b("i",op,u(_.icon),1)),a("span",null,u(_.name),1)],8,ip))),128))])):w("",!0),c.ecommerceButtons.length>0?(l(),p(m,{key:3},{default:i(()=>[sp]),_:1})):w("",!0),c.ecommerceButtons.length>0?(l(),b("div",lp,[(l(!0),b(x,null,L(c.ecommerceButtons,_=>(l(),b("a",{key:_.name,class:"col-50 button button-round",onClick:U=>c.clickLink(_.name,_.value)},[_.icon.includes(".")?(l(),b("img",{key:0,src:_.icon,width:"30",style:{width:"30px",margin:"5px",display:"inline-block","vertical-align":"top"}},null,8,dp)):(l(),b("i",cp,u(_.icon),1)),a("span",null,u(_.name),1)],8,rp))),128))])):w("",!0)]),_:1})]),_:1}),o.item.metadata.introduction.enable?(l(),p(k,{key:0},{default:i(()=>[n(g,{"bg-color":"blue",innerHTML:o.item.metadata.introduction.title},null,8,["innerHTML"]),n(y,null,{default:i(()=>[a("div",{innerHTML:o.item.metadata.introduction.content},null,8,up)]),_:1})]),_:1})):w("",!0),o.item.metadata.company.enable?(l(),p(k,{key:1},{default:i(()=>[n(g,{"bg-color":"blue"},{default:i(()=>[r(u(o.item.metadata.company.title),1)]),_:1}),n(y,null,{default:i(()=>[n(E,{strong:""},{default:i(()=>[n(m,null,{default:i(()=>[r(u(o.item.metadata.company.name),1)]),_:1}),a("div",null," \u0110\u1ECBa ch\u1EC9: "+u(o.item.metadata.company.address),1)]),_:1})]),_:1})]),_:1})):w("",!0),n(E,null,{default:i(()=>[n(m,{style:{"text-align":"center"}},{default:i(()=>[r(" ID: "+u(d.id)+", PrivateCode: "+u(d.privateCode),1)]),_:1})]),_:1})])]),_:1})}var ee=q(Vh,[["render",hp]]);const pp={props:{f7route:Object,f7router:Object,accessType:String,id:Number,privateCode:String,index:Number},data(){return{data:{status:"",metadata:{}}}},computed:{isActive(){return this.data.status=="QRID_STATUS.ACTIVE"}},methods:{redirectTo(){let e=this.data.metadata.redirectUrl||"";window.location=e},async getDeviceData(){let e=await this.$api.getIDocument(this.id,this.index,this.privateCode);e&&(this.data=e,this.accessType&&await this.$api.PersonAction(this.id,this.privateCode,this.accessType,this.index),this.redirectTo())}},async mounted(){await this.getDeviceData()}},mp=r("Goto "),_p=r("Copy NFC");function fp(e,t,d,h,o,c){const f=s("f7-button"),C=s("f7-col"),v=s("f7-row"),m=s("f7-block"),E=s("f7-page");return l(),p(E,null,{default:i(()=>[n(m,null,{default:i(()=>[n(v,null,{default:i(()=>[n(C,{width:"100"},{default:i(()=>[c.isActive?(l(),p(f,{key:0,fill:"",round:"",large:"",onClick:t[0]||(t[0]=g=>c.redirectTo())},{default:i(()=>[mp]),_:1})):w("",!0)]),_:1})]),_:1}),e.getNFCUrl?(l(),p(f,{key:0,large:"",onClick:t[1]||(t[1]=g=>e.copyNFC())},{default:i(()=>[_p]),_:1})):w("",!0)]),_:1}),a("h3",null,u(`${d.id} : ${d.index} : ${d.privateCode}`),1)]),_:1})}var qe=q(pp,[["render",fp]]);const gp={components:{UserInfo:Re},props:{qrid:Number,privateCode:String},emits:["selected"],data(){return{isLoading:!1,items:[],selectedId:0,item:{},actionHistory:[],userInfo:{},popupOpened:!1,filters:{},searchQuery:""}},computed:{filteredRepositories(){},repositoriesMatchingSearchQuery(){}},watch:{qrid:"loadData"},methods:{closeItem(){this.popupOpened=!1},selected(e){console.log("a",e),this.selectedId=e,this.loadDetail(),this.popupOpened=!0},async loadDetail(){this.userInfo={},this.item=await this.$api.UserDeviceAction(this.qrid,this.privateCode,this.selectedId),this.actionHistory=this.item.actionHistory,this.item.userInfo&&(this.userInfo=this.item.userInfo)},async updateUserInfo(e){console.log("updateUserInfo",e),e&&e.name&&await this.$api.updateUserInfo(this.qrid,this.privateCode,this.item.id,e)&&N.dialog.alert("Success Update")},async refreshData(){this.items=[],await this.loadData()},async loadData(){this.qrid>0&&(this.isLoading=!0,this.items=await this.$api.UserActionHistory(this.qrid,this.privateCode),this.isLoading=!1)},idTaiLieu(e,t){let d="ID: ";return e&&(d+=e.substring(8)+"."),t&&(d+=t.toString().padStart(4,"0")),d},logoOS(e){if(e&&e.deviceInfo){let t=e.deviceInfo.os;return this.$utils.getLogoOS(t)}},actionInfo(e){if(e){let t="";return e.os&&(t+=e.os),e.osVersion&&(t+=" "+e.osVersion),t}},content(e){if(e)return e.title+`
`+e.content},addNote(){N.dialog.alert("Li\xEAn h\u1EC7 \u0111\u1EC3 \u0111\u01B0\u1EE3c t\u01B0 v\u1EA5n v\xE0 k\xEDch ho\u1EA1t s\u1EED d\u1EE5ng","T\xEDnh n\u0103ng cho Doanh nghi\u1EC7p")}},async mounted(){await this.loadData()}},vp=r(" L\u1ECBch s\u1EED truy c\u1EADp iDoc"),bp=r(" Khi ng\u01B0\u1EDDi xem ch\u1EA1m NFC, qu\xE9t qrcode l\xEAn tem iDoc d\xE1n tr\xEAn t\xE0i li\u1EC7u "),Ep={class:"row"},Cp=a("div",{class:"col-20"},null,-1),yp={class:"col"},kp=a("div",{class:"col-20"},null,-1),wp={class:"list media-list"},Dp=["onClick"],Ap={class:"item-media"},Tp={class:"f7-icons",style:{"font-size":"35px"}},Ip={class:"item-inner"},$p={class:"item-title-row"},Up={class:"item-header"},Rp={class:"item-after"},Sp={key:0,class:"item-title"},xp={class:"item-subtitle"},Np={class:"item-text"},qp=r(" Thi\u1EBFt b\u1ECB "),Pp=r("Close"),Bp={class:"card"},Qp={class:"card-header bg-color-blue"},Lp={class:"f7-icons",style:{"font-size":"35px: padding-right:40px"}},Fp={class:"card-content"},Op={class:"card"},Vp=r("T\u01B0\u01A1ng t\xE1c g\u1EA7n \u0111\xE2y "),Mp=r(" C\xE0ng nhi\u1EC1u t\u01B0\u01A1ng t\xE1c, k\xE9o d\xE0i trong nhi\u1EC1u ng\xE0y c\xE0ng th\u1EC3 hi\u1EC7n s\u1EF1 quan t\xE2m c\u1EE7a Kh\xE1ch h\xE0ng "),Hp={class:"card-content"},Kp={class:"list media-list"},zp={class:"item-content"},jp={class:"item-media"},Yp=["src"],Gp={key:1,class:"f7-icons",style:{"font-size":"40px"}},Wp={class:"item-inner"},Zp={class:"item-title-row"},Xp={class:"item-header"},Jp={class:"item-subtitle"},em={class:"item-text"};function tm(e,t,d,h,o,c){const f=s("f7-card-header"),C=s("f7-block-header"),v=s("f7-card"),m=s("f7-link"),E=s("f7-nav-right"),g=s("f7-navbar"),y=s("user-info"),k=s("f7-page"),A=s("f7-popup");return l(),b(x,null,[n(v,null,{default:i(()=>[n(f,{"bg-color":"blue"},{default:i(()=>[vp]),_:1}),n(C,null,{default:i(()=>[bp]),_:1}),a("div",Ep,[Cp,a("div",yp,[a("button",{class:"button button-large button-round button-fill color-green",onClick:t[0]||(t[0]=_=>c.refreshData())},"Refresh")]),kp]),a("div",wp,[a("ul",null,[(l(!0),b(x,null,L(o.items,_=>(l(),b("li",{key:_.id},[a("a",{onClick:U=>c.selected(_.id),class:"item-link item-content chevron-center"},[a("div",Ap,[a("i",Tp,u(c.logoOS(_)),1)]),a("div",Ip,[a("div",$p,[a("div",Up,u(e.$utils.actionMessage(_.lastAction.type,_.lastAction.time)),1),a("div",Rp,u(_.lastAction.totalActions),1)]),_.userInfo?(l(),b("div",Sp,u(_.userInfo.name),1)):w("",!0),a("div",xp,u(c.idTaiLieu(_.qrid,_.userIndex)),1),a("div",Np,[qp,a("span",null,u(_.deviceCode),1),r(" \u0111\xE3 t\u01B0\u01A1ng t\xE1c "+u(_.lastAction.totalActions)+" l\u1EA7n, b\u1EB1ng "+u(c.actionInfo(_.deviceInfo)),1)])])],8,Dp)]))),128))])])]),_:1}),n(A,{opened:o.popupOpened,"tablet-fullscreen":!0},{default:i(()=>[n(k,null,{default:i(()=>[n(g,null,{default:i(()=>[n(E,null,{default:i(()=>[n(m,{onClick:t[1]||(t[1]=_=>c.closeItem())},{default:i(()=>[Pp]),_:1})]),_:1})]),_:1}),a("div",Bp,[a("div",Qp,[a("i",Lp,u(c.logoOS(o.item)),1),r("M\xE3 thi\u1EBFt b\u1ECB: "+u(o.item.deviceCode),1)]),a("div",Fp,[n(y,{data:o.userInfo,onUpdateData:c.updateUserInfo},null,8,["data","onUpdateData"])])]),a("div",Op,[n(f,{"bg-color":"blue"},{default:i(()=>[Vp]),_:1}),n(C,null,{default:i(()=>[Mp]),_:1}),a("div",Hp,[a("div",Kp,[a("ul",null,[(l(!0),b(x,null,L(o.actionHistory,_=>(l(),b("li",{key:_.id},[a("div",zp,[a("div",jp,[_.type=="NFC"||_.type=="CLICK"?(l(),b("img",{key:0,src:e.$utils.actionIcon(_.type),width:"40"},null,8,Yp)):(l(),b("i",Gp,u(e.$utils.actionIcon(_.type)),1))]),a("div",Wp,[a("div",Zp,[a("div",Xp,u(e.$utils.actionMessage(_.type,_.time)),1)]),a("div",Jp,u(_.data?_.data.content:""),1),a("div",em,u(c.actionInfo(_.data)),1)])])]))),128))])])])])]),_:1})]),_:1},8,["opened"])],64)}var nm=q(gp,[["render",tm]]);const im={components:{UserActions:nm},props:{f7route:Object,f7router:Object,id:String,privateCode:String},data(){return{item:{status:"",metadata:{}},data:{redirectUrl:"",redirectTime:-1}}},computed:{isActive(){return this.item.status=="QRID_STATUS.ACTIVE"},getNFCUrl(){if(this.id>0&&this.privateCode.length>4)return`https://www.qrcare.vn/nfc/${this.id}/p/${this.privateCode.slice(0,4)}`},redirectUrl(){const e=this.item.deviceMetadata;let t="";return e&&e.redirectUrl&&(t=e.redirectUrl),t.includes("http")||t.includes("https")?t:""},enableRedirect(){}},methods:{async updateData(){if(this.item.status=="NOT_GENERATED")return await this.initData();this.item.status="QRID_STATUS.ACTIVE",await this.$api.updateQRSaleInfo(this.id,this.item,this.privateCode),N.dialog.alert("SUCCESS updateData()")},async initData(){console.log("initData()",this.id,this.privateCode,this.item);let e=await this.$api.initCard(this.id,this.privateCode,this.item);e&&(N.dialog.alert("Kh\u1EDFi t\u1EA1o th\xE0nh c\xF4ng"),this.item=e)},async getDeviceData(){let e=await this.$api.getQRID(this.id,this.privateCode);e&&(this.item=e,this.item.metadata?this.item.metadata.redirectTime=this.item.metadata.redirectTime||-1:this.item.metadata={redirectUrl:"",redirectTime:-1})}},async mounted(){await this.getDeviceData()}},am=r("Th\u1EBB Thi\u1EBFt l\u1EADp iDoc v1.0"),om=r("Th\xF4ng tin c\u1EA7n thi\u1EBFt l\u1EADp"),sm={class:"list no-hairlines-md"},lm={class:"item-content item-input"},rm={class:"item-inner"},dm=a("div",{class:"item-title item-label"},"T\xEAn t\xE0i li\u1EC7u",-1),cm={class:"item-input-wrap"},um=a("span",{class:"input-clear-button"},null,-1),hm={class:"item-content item-input"},pm={class:"item-inner"},mm=a("div",{class:"item-title item-label"},"Redirect Url",-1),_m={class:"item-input-wrap"},fm=a("span",{class:"input-clear-button"},null,-1),gm={class:"item-content item-input"},vm={class:"item-inner"},bm=a("div",{class:"item-title item-label"},"Redirect Delay Time (seconds)",-1),Em={class:"item-input-wrap"},Cm=a("span",{class:"input-clear-button"},null,-1),ym=r("C\u1EADp nh\u1EADt"),km=r("Kh\u1EDFi t\u1EA1o"),wm=r("Copy NFC");function Dm(e,t,d,h,o,c){const f=s("f7-nav-title"),C=s("f7-navbar"),v=s("f7-block-header"),m=s("f7-block"),E=s("f7-button"),g=s("f7-col"),y=s("f7-row"),k=s("user-actions"),A=s("f7-page");return l(),p(A,null,{default:i(()=>[n(C,{sliding:!1},{default:i(()=>[n(f,{sliding:""},{default:i(()=>[am]),_:1})]),_:1}),n(m,null,{default:i(()=>[n(v,null,{default:i(()=>[om]),_:1}),a("div",sm,[a("ul",null,[a("li",lm,[a("div",rm,[dm,a("div",cm,[F(a("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=_=>o.item.metadata.title=_)},null,512),[[J,o.item.metadata.title]]),um])])]),a("li",hm,[a("div",pm,[mm,a("div",_m,[F(a("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=_=>o.item.metadata.redirectUrl=_)},null,512),[[J,o.item.metadata.redirectUrl]]),fm])])]),a("li",gm,[a("div",vm,[bm,a("div",Em,[F(a("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=_=>o.item.metadata.redirectTime=_)},null,512),[[J,o.item.metadata.redirectTime]]),Cm])])])])])]),_:1}),n(m,null,{default:i(()=>[n(y,null,{default:i(()=>[n(g,{width:"100"},{default:i(()=>[c.isActive?(l(),p(E,{key:0,fill:"",round:"",large:"",onClick:t[3]||(t[3]=_=>c.updateData())},{default:i(()=>[ym]),_:1})):(l(),p(E,{key:1,fill:"",round:"",large:"",onClick:t[4]||(t[4]=_=>c.updateData())},{default:i(()=>[km]),_:1}))]),_:1})]),_:1}),c.getNFCUrl?(l(),p(E,{key:0,large:"",onClick:t[5]||(t[5]=_=>e.copyNFC())},{default:i(()=>[wm]),_:1})):w("",!0)]),_:1}),c.isActive?(l(),p(k,{key:0,qrid:d.id,privateCode:d.privateCode},null,8,["qrid","privateCode"])):w("",!0)]),_:1})}var Am=q(im,[["render",Dm]]),Tm=[{path:"/",component:nt},{path:"/u/:id/t/:access_token",component:ns},{path:"/sale/:id/p/:privateCode",component:nr},{path:"/op/:id/p/:privateCode",component:hc},{path:"/qrmemberscan",component:$e},{path:"/setup/:id/p/:privateCode",component:Nr},{path:"/admin/:id/p/:privateCode",component:Kd},{path:"/pack/:packageId/p/:privateCode",component:Ed},{path:"/m/:id/i/:index/p/:privateCode",component:Hl},{path:"/setup-card/:id/p/:privateCode",component:Oh},{path:"/demo/:id/p/:privateCode",component:Ne},{path:"/edit-card/:id/p/:privateCode",component:xe},{path:"/n/:id/p/:privateCode",component:ee,options:{props:{accessType:"SCAN",index:0}}},{path:"/n/:id/p/:privateCode/i/:index",component:ee,options:{props:{accessType:"SCAN",index:0}}},{path:"/nfc/:id/p/:privateCode",component:ee,options:{props:{accessType:"NFC"}}},{path:"/url/:id/p/:privateCode",component:ee,options:{props:{accessType:"URL"}}},{path:"/link/:id/p/:privateCode",component:ee,options:{props:{accessType:"LINK"}}},{path:"/nfc/:id/p/:privateCode",component:ee,options:{props:{accessType:"NFC"}}},{path:"/id/:id/i/:index/p/:privateCode",component:qe,options:{props:{accessType:"NFC"}}},{path:"/idoc/:id/i/:index/p/:privateCode",component:qe,options:{props:{accessType:"NFC"}}},{path:"/id-edit/:id/p/:privateCode",component:Am},{path:"/d/:id/p/:privateCode",component:ci},{path:"/l/:id/p/:privateCode",component:lo},{path:"/p/:id/p/:privateCode",component:uo},{path:"/pb/:id/p/:privateCode",component:_o},{path:"/a/:id/p/:privateCode",component:Qo},{path:"/login/",component:ts},{path:"(.*)",component:_t}];const Im={setup(){const e={name:"QRCare.vn",theme:"auto",version:"1.2.3",view:{browserHistory:!0},store:G,routes:Tm},t=de(""),d=de(""),h=()=>{N.dialog.alert("Username: "+t.value+"<br>Password: "+d.value,()=>{N.loginScreen.close()})};return Oe(()=>{Ve(()=>{})}),{f7params:e,username:t,password:d,alertLoginData:h}}},$m=r("Right panel content goes here"),Um=r("Close"),Rm=a("p",null,"Popup content goes here.",-1),Sm=r("Login"),xm=r("quet"),Nm=r(" Some text about login information."),qm=a("br",null,null,-1),Pm=r('Click "Sign In" to close Login Screen ');function Bm(e,t,d,h,o,c){const f=s("f7-navbar"),C=s("f7-block"),v=s("f7-page"),m=s("f7-view"),E=s("f7-panel"),g=s("f7-link"),y=s("f7-nav-right"),k=s("f7-popup"),A=s("f7-login-screen-title"),_=s("f7-button"),U=s("f7-list-input"),B=s("f7-list"),T=s("f7-list-button"),D=s("f7-block-footer"),P=s("f7-login-screen"),Q=s("f7-app");return l(),p(Q,Me(He(h.f7params)),{default:i(()=>[n(E,{right:"",reveal:"","theme-dark":""},{default:i(()=>[n(m,null,{default:i(()=>[n(v,null,{default:i(()=>[n(f,{title:"Right Panel"}),n(C,null,{default:i(()=>[$m]),_:1})]),_:1})]),_:1})]),_:1}),n(m,{main:"",class:"safe-areas",url:"/"}),n(k,{id:"my-popup"},{default:i(()=>[n(m,null,{default:i(()=>[n(v,null,{default:i(()=>[n(f,{title:"Popup"},{default:i(()=>[n(y,null,{default:i(()=>[n(g,{"popup-close":""},{default:i(()=>[Um]),_:1})]),_:1})]),_:1}),n(C,null,{default:i(()=>[Rm]),_:1})]),_:1})]),_:1})]),_:1}),n(P,{id:"my-login-screen"},{default:i(()=>[n(m,null,{default:i(()=>[n(v,{"login-screen":""},{default:i(()=>[n(A,null,{default:i(()=>[Sm]),_:1}),n(_,{href:"/login/"},{default:i(()=>[xm]),_:1}),n(B,{form:""},{default:i(()=>[n(U,{type:"text",name:"username",placeholder:"Your username",value:h.username,"onUpdate:value":t[0]||(t[0]=R=>h.username=R)},null,8,["value"]),n(U,{type:"password",name:"password",placeholder:"Your password",value:h.password,"onUpdate:value":t[1]||(t[1]=R=>h.password=R)},null,8,["value"])]),_:1}),n(B,null,{default:i(()=>[n(T,{title:"Sign In",onClick:h.alertLoginData},null,8,["onClick"]),n(D,null,{default:i(()=>[Nm,qm,Pm]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},16)}var Qm=q(Im,[["render",Bm]]);let ie={getDeviceId(){let e=localStorage.getItem("qrcareId");return e||(e=N.utils.id(),localStorage.setItem("qrcareId",e)),e},getDeviceOS(){let e=pe();return{os:e.os,osVersion:e.osVersion||"1.0"}},getAction(e,t,d="QRCODE",h=""){return{qrid:e,privateCode:t,type:d,time:new Date().toISOString(),deviceId:this.getDeviceId(),deviceInfo:this.getDeviceOS(),note:h}},getFilename(e){if(e){var t=e.toString().match(/.*\/(.+?)\./);if(t&&t.length>1)return t[1]}return""},getIcon(e){let t={facebook:"logo_facebook",tiktok:"link_circle",skype:"link_circle",linkedIn:"logo_linkedin",twitter:"link_circle",momo:"link_circle",qrcare:"link_circle"};for(const d in t)if(d==e)return t[d];return""},blobCreationFromURL(e){const t=e.split(","),d=t[0].indexOf("base64")>=0?atob(t[1]):decodeURI(t[1]),h=t[0].split(":")[1].split(";")[0],o=new Uint8Array(d.length);for(let c=0;c<d.length;c++)o[c]=d.charCodeAt(c);return new Blob([o],{type:h})},getActivityName(e){let t="";return e.type==="ACTIVITY.QR_REQUEST"&&(t+="Y\xEAu c\u1EA7u",e.status=="CREATED"&&(t+=" \u0111\xE3 g\u1EEDi")),e.type==="ACTIVITY.QRTASK"&&(t+="C\xF4ng vi\u1EC7c",e.status=="CREATED"&&(t+=" \u0111\xE3 g\u1EEDi"),e.status=="CONFIRMED"&&(t="Kh\xE1ch h\xE0ng x\xE1c nh\u1EADn"),e.status=="REJECTED"&&(t="Kh\xE1ch h\xE0ng t\u1EEB ch\u1ED1i")),e.type==="ACTIVITY.QRNOTE"&&(t+="Ghi ch\xFA",e.status=="CREATED"&&(t+=" \u0111\xE3 g\u1EEDi")),e.type==="ACTIVITY.QRDelivery"&&(t+="B\xE0n giao",e.status=="CREATED"&&(t+=" \u0111\xE3 g\u1EEDi"),e.status=="CONFIRMED"&&(t+="Kh\xE1ch h\xE0ng x\xE1c nh\u1EADn"),e.status=="REJECTED"&&(t+="Kh\xE1ch h\xE0ng t\u1EEB ch\u1ED1i")),t},getActivityColor(e){if(e.type==="ACTIVITY.QR_REQUEST")return"item-title text-color-orange";if(e.type==="ACTIVITY.QRTASK"){if(e.status==="CONFIRMED")return"item-title text-color-green";if(e.status==="CREATED")return"item-title text-color-blue"}return e.type==="ACTIVITY.QRNOTE"?"item-title text-color-blue":"item-title text-color-black"},firstImage(e){return e[0]?e[0]:"https://apps.vinaas.com/file/sBsN149Dh"},getFilter(e=null){return e||{skip:0,limit:10}},list_qrid(e,t,d){let h=[];if(t>=0&&d>0){for(var o=t;o<=d;o++)if(!(o>=1e4)){var c=e*1e4+o;h.push(c)}}return h},qrid_index(e){try{let d=e.toString().slice(11);var t=parseInt(d);return t}catch(d){return-1}},qrid_package(e){try{let d=e.toString().slice(0,11);var t=parseInt(d);return t}catch(d){return-1}},qrid_setup(e){return e>0?this.qrid_package(e)*1e4+9901:0},is_setup(e){if(e>0)return e%1e4>9900},formatQRID(e){return e.toString().slice(0,11)+"."+e.toString().slice(11)},formatDate(e){if(e)return ce(new Date(e),"dd-MM-yyyy")},formatDistanceToNow(e){if(e)return ge(new Date(e),{includeSeconds:!0,addSuffix:!0,locale:ue})},formatDistance(e,t){if(e&&t)return Ke(new Date(e),new Date(t),{includeSeconds:!0,locale:ue})},formatDateTime(e){return e?ce(new Date(e),"dd-MM-yyyy hh:mm"):""},formatMoney(e){return e>0?new Intl.NumberFormat("de-DE",{style:"currency",currency:"VND"}).format(e):""},clickCall(e){console.log("clickCall",e),e&&(window.location="tel:"+e)},clickLink(e){console.log("link",e),window.open(e)},clickMail(e){console.log("mailto",e),e&&(window.location="mailto:"+e)},actionText(e){return e=="SCAN"?"Qu\xE9t QRCode":e=="NFC"?"Ch\u1EA1m NFC":e=="CALL"?"B\u1EA5m g\u1ECDi \u0111i\u1EC7n":e=="EMAIL"?"Click Email":e=="CONTACT"?"L\u01B0u danh b\u1EA1":e=="PAID"?"\u0110\xE3 mua":e=="CONFIRMED"?"\u0110\xE3 x\xE1c nh\u1EADn":e=="ACTIVE"?"\u0110\xE3 k\xEDch ho\u1EA1t":e},actionIcon(e){if(e=="SCAN")return"qrcode";if(e=="NFC")return"/assets/nfc.png";if(e=="CLICK")return"/assets/touch.png";if(e=="LINK"||e=="URI")return"link_circle";if(e=="CALL")return"phone_arrow_down_left";if(e=="EMAIL")return"envelope";if(e=="CONTACT")return"person_crop_circle"},getLogoOS(e){return e=="macos"?"device_desktop":e=="ios"?"logo_apple":e=="android"?"logo_android":e=="windows"?"logo_windows":e},actionMessage(e,t){const d=ge(new Date(t),{includeSeconds:!0,addSuffix:!0,locale:ue});return`${this.actionText(e)} ${d}, l\xFAc ${ce(new Date(t),"hh:mm:ss.aaa")}`},isOrganization(e){return e.ownerOrganizationId>0},notGenerated(e){return e=="NOT_GENERATED"}};var S=ve.create({baseURL:O.BASE_URL,headers:{"content-type":"application/json"}});let Lm={async confirmQRTask(e){e.status="CONFIRMED",e.modified=new Date().toISOString(),!!e.id},async confirmQRDelivery(e){},async createQRFeedback(e){return e.type="ACTIVITY.QR_FEEDBACK",await this.createRequest(e)},async createQRRequest(e){return e.type="ACTIVITY.QR_REQUEST",await this.createRequest(e)},async createSupplierRequest(e){return e.type="ACTIVITY.SUPPLIER_REQUEST",await this.createRequest(e)},async createQRcareRequest(e){return e.type="ACTIVITY.QRCARE_REQUEST",await this.createRequest(e)},async createQRCall(e){return e.type="ACTIVITY.QRCALL",await this.createRequest(e)},async createNote(e){},async createRequest(e){return e.created=new Date().toUTCString(),e.status="CREATED",S.defaults.baseURL=O.BASE_URL,(await S.post("/QRActivities",e)).data||{}},async getCardActivity(e){return(await S.get("/QRActivities/"+e)).data||{}},async getVcard(e,t){return(await S.get(`/QRIDs/vCard?qrid=${e}&privateCode=${t}`)).data||{}},async activeQRMember(e,t){try{S.defaults.baseURL=O.BASE_URL,t.status="QRID_STATUS.ACTIVE",t.modified=new Date;var d=await S.patch("/QRIDs/"+e,t);return!0}catch(h){return!1}},async activeQRLoyalty(e,t){try{S.defaults.baseURL=O.BASE_URL,t.status="ACTIVE",t.modified=new Date;var d=await S.patch("/QRIDs/"+e,t);return!0}catch(h){return!1}},async getQRID(e,t){try{S.defaults.baseURL=O.BASE_URL;var d=await S.get("QRIDs/"+e);return d.data}catch(h){console.log("error",h)}},async getIDocument(e,t,d){try{S.defaults.baseURL=O.BASE_URL;var h=await S.get("QRIDs/iDocument",{params:{id:parseInt(e),index:t,privateCode:d}});return h.data}catch(o){console.log("error",o)}},async verifyCard(e,t){try{S.defaults.baseURL=O.BASE_URL;var d=await S.get(`QRIDs/verify?id=${e}&privateCode=${t}`);return d.data}catch(h){console.log("error",h)}},async initCard(e,t,d){try{let o=parseInt(e);S.defaults.baseURL=O.BASE_URL;var h=await S.post("QRIDs/initCard",{id:o,privateCode:t,data:d});return h.data}catch(o){console.log("error",o)}},async updateCard(e,t,d){try{S.defaults.baseURL=O.BASE_URL,d.modified=new Date().toISOString();var h=await S.patch("QRIDs/"+e,d);return h.data}catch(o){console.log("error",o)}},async activeCard(e,t,d){try{S.defaults.baseURL=O.BASE_URL;var h=await S.post("QRIDs/activeCard",{id:e,privateCode:t,data:d});return h.data}catch(o){return!1}},async getCardHistory(e,t,d={limit:10}){try{S.defaults.baseURL=O.BASE_URL;var h=await S.get("QRIDs/"+e+"/history",{params:{filter:d}});return h.data}catch(o){console.log("error",o)}},async getRecentActivity(e,t,d={limit:10}){try{S.defaults.baseURL=O.BASE_URL;var h=await S.get(`/QRIDs/recentActivity?qrid=${e}&privateCode=${t}`);return h.data}catch(o){console.log("error",o)}},async getQRCustomerBySale(e,t){try{S.defaults.baseURL=O.BASE_URL;var d=await S.get(`QRIDs/getQRCustomers?qrid=${e}&privateCode=${t}`);return console.log("getQRCustomerBySale",e,d.data),d.data}catch(h){console.log("error",h)}},async getQRCustomers(e,t){try{S.defaults.baseURL=O.BASE_URL;var d=await S.get("People",{params:{filter:{where:{qrid:e},fields:["qrUrl","name","info","qrid","status","modified"],limit:20,order:"modified desc"}}});return console.log("getQRCustomerBySale",e,d.data),d.data}catch(h){console.log("error",h)}},async scanQRCustomer(e,t,d){try{S.defaults.baseURL=O.BASE_URL;var h=await S.get(`People/scanQRCustomer?qrid=${e}&index=${t}&privateCode=${d}`);return h.data}catch(o){console.log("error",o)}},async PersonAction(e,t,d="SCAN",h=-1,o=null){let c=ie.getDeviceId(),f=ie.getDeviceOS();o?(o.os=f.os,o.osVersion=f.osVersion):o=f;let C=parseInt(e),v=parseInt(h),m={qrid:C,privateCode:t,deviceCode:c,type:d,userIndex:v,data:o};try{console.log("record",m),S.defaults.baseURL=O.BASE_URL;var E=await S.post("UserActions/addAction",m);return console.log(E.data),E.data}catch(g){console.log("error",g)}},async UserActionHistory(e,t){let d=parseInt(e);try{S.defaults.baseURL=O.BASE_URL;var h=await S.get("UserActions/actionHistory/",{params:{qrid:d,privateCode:t}});return h.data}catch(o){return console.log("error",o),null}},async UserDeviceAction(e,t,d){let h=parseInt(e);try{S.defaults.baseURL=O.BASE_URL;var o=await S.get("UserActions/actionDevice/",{params:{qrid:h,privateCode:t,deviceId:d}});return console.log(o.data),o.data}catch(c){return console.log("error",c),null}},async updateUserInfo(e,t,d,h){try{S.defaults.baseURL=O.BASE_URL;let c=parseInt(e);var o=await S.post("UserActions/updateUserInfo",{qrid:c,privateCode:t,deviceId:d,userInfo:h});return o.data}catch(c){return console.log("error",c),null}},async OwnerAction(e,t,d="CHECK_SCAN",h=null,o=0){let c=ie.getDeviceId();h||(h=ie.getDeviceOS());let C={qrid:parseInt(e),privateCode:t,deviceCode:c,type:d,data:h};try{S.defaults.baseURL=O.BASE_URL;var v=await S.post("QRIDs/addAction",C);return console.log(v.data),v.data}catch(m){console.log("error",m)}},async getQRIDsOfSetup(e,t){try{let h=parseInt(e);S.defaults.baseURL=O.BASE_URL;var d=await S.get("QRIDs/manageQRIDs",{params:{qrid:h,privateCode:t}});return d.data}catch(h){return console.log("error",h),null}},async getQRCustomer(e){try{S.defaults.baseURL=O.BASE_URL;var t=await S.get(`People/${e}`);return t.data}catch(d){return console.log("error",d),null}},async updateQRCustomer(e,t){try{S.defaults.baseURL=O.BASE_URL;var d=await S.patch(`People/${e}`,t);return d.data}catch(h){console.log("error",h)}},async updateQRSaleInfo(e,t,d){try{S.defaults.baseURL=O.BASE_URL,t.modified=new Date().toISOString(),console.log("patchQRSale()",e,t);var h=await S.patch("QRIDs/"+e,t);return h.data}catch(o){console.log("error",o)}},async getLifecycle(e,t){try{let h=parseInt(e);S.defaults.baseURL=O.BASE_URL;var d=await S.get("QRIDs/getLifecycle",{params:{qrid:h,privateCode:t}});return d.data}catch(h){console.log("error",h)}},async getProjectSummary(e,t){try{S.defaults.baseURL=O.BASE_URL;var d=await S.get("QRPackages/summary",{params:{packageId:e,privateCode:t}});return d.data}catch(h){console.log("error",h)}},async getQRList(e,t){try{S.defaults.baseURL=O.BASE_URL;var d=await S.get(`QRPackages/${e}/qridlist`,{params:{filter:{where:{status:"QRID_STATUS.ACTIVE"},order:"id desc"}}});return d.data}catch(h){console.log("error",h)}}};ze.use(je);const te=Ye(Qm);te.config.globalProperties.$axios=ve;te.config.globalProperties.$utils=ie;te.config.globalProperties.$api=Lm;te.config.globalProperties.$mode=location.host;Ge(te);te.mount("#app");
