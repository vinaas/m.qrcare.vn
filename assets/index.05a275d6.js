var Ke=Object.defineProperty;var Ce=Object.getOwnPropertySymbols;var je=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable;var ye=(e,t,l)=>t in e?Ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,he=(e,t)=>{for(var l in t||(t={}))je.call(t,l)&&ye(e,l,t[l]);if(Ce)for(var l of Ce(t))Ye.call(t,l)&&ye(e,l,t[l]);return e};import{c as Ge,u as oe,r as s,o as r,a as f,w as i,b as n,d as c,t as p,e as o,f as U,g as L,v as V,h as b,n as J,i as w,j as M,F as P,k as F,l as de,p as ee,m as te,q as Ee,s as ke,x as we,y as Ae,z as We,A as ce,B as _e,C as ue,D as Y,E as Ze,G as Xe,H as Je,I as et,J as tt,K as De,L as me,M as Te,N as fe,O as nt,P as it,Q as ot,R as at,S as st}from"./vendor.bacdd1bc.js";const lt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))u(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&u(h)}).observe(document,{childList:!0,subtree:!0});function l(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerpolicy&&(d.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?d.credentials="include":a.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function u(a){if(a.ep)return;a.ep=!0;const d=l(a);fetch(a.href,d)}};lt();const Z=Ge({state:{user:{},accessToken:"",userId:0,orgId:0,org:{},supporter:{},isAuthen:!1,isDemoCard:!1,qrUrl:""},getters:{isDemoCard({state:e}){return e.isDemoCard},userInfo({state:e}){return e.user},orgInfo({state:e}){return e.org},isAuthen({state:e}){return e.isAuthen},qrUrl({state:e}){return e.qrUrl},supporter({state:e}){return e.supporter},isLogged({state:e}){return e.user&&e.user.id&&e.user.id>0?e.isAuthen=!0:e.isAuthen=!1,e.isAuthen},isBoss({state:e}){return e.user.roleCode=="BOSS"},isSale({state:e}){return e.user.roleCode=="SALE"},isWorker({state:e}){return e.user.roleCode=="WORKER"}},actions:{logout({state:e}){e.user={},e.isAuthen=!1},login({state:e},t){e.user=t,e.userId=t.id,localStorage.setItem("user",JSON.stringify(t)),e.isAuthen=!0},ACCESS_TOKEN_SET({state:e},t){localStorage.setItem("access_token",t),axios.defaults.headers.Authorization=t,e.accessToken=t},ACCESS_TOKEN_CLEAR(e){localStorage.removeItem("access_token"),localStorage.removeItem("user"),e.accessToken="",axios.defaults.headers.Authorization=""},updateDemoCard({state:e},t){e.isDemoCard=t},scanQRCode({state:e},t){e.qrUrl=t}}});var N=(e,t)=>{for(const[l,u]of t)e[l]=u;return e};const rt={props:{f7route:Object,f7router:Object},setup(){return{isAuthen:oe("isAuthen"),login:()=>{Z.dispatch("login")},logout:()=>{Z.dispatch("logout")}}},methods:{changeStatus(){this.isAuthen?this.logout():this.login()},gotoHome(){window.location="https://qrcare.vn"}},async created(){}},dt=o("h3",null,"C\u1EA3m \u01A1n c\xE1c b\u1EA1n \u0111\xE3 s\u1EED d\u1EE5ng gi\u1EA3i ph\xE1p QRCare",-1),ct=o("p",null,"\u0110\u1EC3 bi\u1EBFt th\xEAm chi ti\u1EBFt c\u0169ng nh\u01B0 li\xEAn h\u1EC7 v\u1EDBi ch\xFAng t\xF4i",-1),ut=c("V\u1EC1 trang ch\u1EE7");function pt(e,t,l,u,a,d){const h=s("f7-nav-title"),g=s("f7-navbar"),v=s("f7-button"),_=s("f7-block"),E=s("f7-page");return r(),f(E,{name:"home"},{default:i(()=>[n(g,{sliding:!1},{default:i(()=>[n(h,{sliding:""},{default:i(()=>[c("QRCare Vi\u1EC7t Nam v"+p(l.f7router.app.version),1)]),_:1})]),_:1}),n(_,{strong:""},{default:i(()=>[dt,ct,n(v,{onClick:t[0]||(t[0]=m=>d.gotoHome()),class:"fill large"},{default:i(()=>[ut]),_:1})]),_:1})]),_:1})}var ht=N(rt,[["render",pt]]);const _t={props:["countImages","maxImages"],emits:["uploaded","toggleCamera"],data(){return{isCameraOpen:!1,isPhotoTaken:!1,isShotPhoto:!1,isLoading:!1,imageUrls:[],video:"",photoTaken:"",photoTakenCtx:"",width:0,height:0,log:"",dataUrl:""}},methods:{doLoad(){this.video=document.getElementById("camera-video"),this.photoTaken=document.getElementById("photoTaken"),this.photoTakenCtx=this.photoTaken.getContext("2d");let e=this;this.video.addEventListener("play",function(){e.width=e.video.videoWidth,e.height=e.video.videoHeight},!1)},computeFrame(){const e=this.video.videoWidth,t=this.video.videoHeight,l=t/4*3,u=(e-l)/2,a=0;this.photoTaken.width=l,this.photoTaken.height=t,this.log="Video:Crop:("+this.photoTaken.width+","+this.photoTaken.height+"("+e+","+t+")",this.photoTakenCtx.drawImage(this.video,u,a,l,t,0,0,l,t)},toggleCamera(){this.isCameraOpen?(this.isCameraOpen=!1,this.$emit("toggleCamera",this.isCameraOpen),this.isPhotoTaken=!1,this.isShotPhoto=!1,this.stopCameraStream()):(this.isCameraOpen=!0,this.$emit("toggleCamera",this.isCameraOpen),this.createCameraElement())},createCameraElement(){console.log("createCameraElement()",this.isCameraOpen);try{this.isLoading=!0,U.preloader.show();var e={video:{facingMode:"environment"}};navigator.mediaDevices.getUserMedia(e).then(t=>{this.isLoading=!1,U.preloader.hide(),this.$refs.camera.srcObject=t,this.doLoad()}).catch(t=>{this.isLoading=!1,U.preloader.hide(),alert("May the browser didn't support or there is some errors.")})}catch(t){console.log("createCameraElement()",t)}},stopCameraStream(){console.log("stopCameraStream()",this.isCameraOpen),this.$refs.camera.srcObject.getTracks().forEach(t=>{t.stop()})},async takePhoto(){if(console.log("takePhoto",this.countImages,this.maxImages),this.countImages>=this.maxImages){U.dialog.alert("B\u1EA1n \u0111\xE3 ch\u1EE5p t\u1EDBi gi\u1EDBi h\u1EA1n l\xE0 "+this.countImages+" t\u1EA5m!");return}this.isPhotoTaken||(this.isShotPhoto=!0,setTimeout(()=>{this.isShotPhoto=!1},50)),this.computeFrame(),this.isPhotoTaken=!this.isPhotoTaken,this.dataUrl=this.photoTaken.toDataURL(),await this.uploadImage()},async uploadImage(){const e=this.photoTaken.toDataURL("image/jpeg",.9);var t=this.dataURItoBlob(e);const l=new FormData;l.append("canvasImage",t);try{let u="https://media.vinaas.com/upload/qrcare-vn";const{data:a}=await this.$axios.post(u,l,{headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"}});if(a&&a.id){const d="https://apps.vinaas.com/file/"+a.id;this.imageUrls.push(d),this.$emit("uploaded",d)}}catch(u){console.log("err",u)}finally{}this.isPhotoTaken=!this.isPhotoTaken},dataURItoBlob(e){var t;e.split(",")[0].indexOf("base64")>=0?t=atob(e.split(",")[1]):t=unescape(e.split(",")[1]);for(var l=e.split(",")[0].split(":")[1].split(";")[0],u=new Uint8Array(t.length),a=0;a<t.length;a++)u[a]=t.charCodeAt(a);return new Blob([u],{type:l})}}},mt={class:"web-camera-container"},ft=["width","height"],gt=["src","width","height"],vt={id:"photoTaken"},bt=c(" Ch\u1EE5p h\xECnh"),Ct=c("Close");function yt(e,t,l,u,a,d){const h=s("f7-icon"),g=s("f7-button"),v=s("f7-col"),_=s("f7-row"),E=s("f7-block");return r(),f(E,null,{default:i(()=>[o("div",mt,[a.isCameraOpen?L((r(),b("div",{key:0,class:J(["camera-box",{flash:a.isShotPhoto}])},[o("div",{class:J(["camera-shutter",{flash:a.isShotPhoto}])},null,2),L(o("video",{id:"camera-video",ref:"camera",width:a.width/2,height:a.height/2,autoplay:"",muted:"",playsinline:""},null,8,ft),[[V,!a.isPhotoTaken]]),L(o("img",{src:a.dataUrl,id:"showPhotoTaken",width:a.height/8*3,height:a.height/2},null,8,gt),[[V,a.isPhotoTaken]]),L(o("canvas",vt,null,512),[[V,!1]])],2)),[[V,!a.isLoading]]):w("",!0)]),a.isCameraOpen?(r(),f(_,{key:1},{default:i(()=>[n(v,{width:"30"},{default:i(()=>[a.isCameraOpen?(r(),f(g,{key:0,raised:"",round:"",large:"",color:"gray",onClick:d.toggleCamera},{default:i(()=>[Ct]),_:1},8,["onClick"])):w("",!0)]),_:1}),n(v,{width:"10"}),n(v,{width:"60"},{default:i(()=>[a.isCameraOpen?(r(),f(g,{key:0,raised:"",outline:"",round:"",large:"",onClick:d.takePhoto},{default:i(()=>[n(h,{f7:"camera"})]),_:1},8,["onClick"])):w("",!0)]),_:1})]),_:1})):(r(),f(_,{key:0},{default:i(()=>[n(v,{width:"100"},{default:i(()=>[n(g,{raised:"",outline:"",round:"",large:"",onClick:d.toggleCamera},{default:i(()=>[n(h,{f7:"camera"}),bt]),_:1},8,["onClick"])]),_:1})]),_:1}))]),_:1})}var Ie=N(_t,[["render",yt],["__scopeId","data-v-01ed4286"]]);const Et={},kt=o("p",null,"Sorry",-1),wt=o("p",null,"Requested content not found.",-1);function At(e,t,l,u,a,d){const h=s("f7-navbar"),g=s("f7-block"),v=s("f7-page");return r(),f(v,null,{default:i(()=>[n(h,{title:"Not found","back-link":"Back"}),n(g,{strong:""},{default:i(()=>[kt,wt]),_:1})]),_:1})}var Dt=N(Et,[["render",At]]);const O={BASE_URL:"https://api.qrcare.net/api/"},Tt=M({setup(){return{supporter:oe("supporter")}},data(){return{status:"FREE"}},computed:{waitingTime(){if(this.status=="FREE")return 1;if(this.status=="WAITING")return 5}},methods:{updateSupplierStatus(){}},mounted(){this.updateSupplierStatus()}}),It=c("Close"),$t={style:{height:"100%"},class:"display-flex justify-content-center align-items-center"},Ut=c("G\u1ECDi l\u1EA1i theo s\u1ED1 (xxx022)"),xt=c("Nh\u1EADp s\u1ED1");function St(e,t,l,u,a,d){const h=s("f7-link"),g=s("f7-nav-right"),v=s("f7-navbar"),_=s("f7-list-item"),E=s("f7-list"),m=s("f7-page");return r(),f(m,null,{default:i(()=>[n(v,{title:"Simple QRCall"},{default:i(()=>[n(g,null,{default:i(()=>[n(h,{"popup-close":""},{default:i(()=>[It]),_:1})]),_:1})]),_:1}),o("div",$t,[n(E,null,{default:i(()=>[n(_,null,{default:i(()=>[Ut]),_:1}),n(_,null,{default:i(()=>[xt]),_:1}),n(_,null,{default:i(()=>[c("ch\xFAng t\xF4i s\u1EBD g\u1ECDi l\u1EA1i trong v\xF2ng "+p(e.waitingTime)+" ph\xFAt",1)]),_:1})]),_:1})])]),_:1})}var Rt=N(Tt,[["render",St]]);const Pt=M({props:{orgId:Number,userId:Number},components:{SimpleCall:Rt},computed:{item(){let e={id:111,name:"QRCare Vi\u1EC7t Nam",staffName:"Qu\xE2n",address:"11 \u0110\u1EB7ng Th\u1EBF Phong",phoneNumber:"+84xxxxxx4088"};return this.orgId>1e3,e}},mounted(){}}),Nt={key:0,class:"one-step-qrcall"},qt=c("G\u1ECDi l\u1EA1i cho t\xF4i"),Bt=o("div",{style:{height:"50px"}},null,-1),Lt=c("Close"),Qt={style:{height:"100%"},class:"display-flex justify-content-center align-items-center"},Ft=c("Vui l\xF2ng \u0111\u1EC3 l\u1EA1i s\u1ED1 \u0111i\u1EC7n tho\u1EA1i");function Ot(e,t,l,u,a,d){const h=s("f7-card-header"),g=s("f7-button"),v=s("f7-card-content"),_=s("f7-card"),E=s("f7-link"),m=s("f7-nav-right"),y=s("f7-navbar"),C=s("f7-list-item"),A=s("f7-list"),k=s("f7-page"),$=s("f7-popup");return r(),b(P,null,[n(_,null,{default:i(()=>[n(h,null,{default:i(()=>[c("C\u1EA7n h\u1ED7 tr\u1EE3, "+p(e.item.name)+" s\u1EBD ph\u1EE5c v\u1EE5",1)]),_:1}),n(v,null,{default:i(()=>[(r(),b("div",Nt,[n(g,{fill:"","popup-open":".demo-popup-swipe"},{default:i(()=>[qt]),_:1})]))]),_:1})]),_:1}),Bt,n($,{class:"demo-popup-swipe","swipe-to-close":""},{default:i(()=>[n(k,null,{default:i(()=>[n(y,{title:"QRCall: Ch\xFAng t\xF4i s\u1EBD g\u1ECDi l\u1EA1i"},{default:i(()=>[n(m,null,{default:i(()=>[n(E,{"popup-close":""},{default:i(()=>[Lt]),_:1})]),_:1})]),_:1}),o("div",Qt,[n(A,null,{default:i(()=>[n(C,null,{default:i(()=>[Ft]),_:1}),n(C,null,{default:i(()=>[c("B\u1EA1n "+p(e.item.staffName)+" ("+p(e.item.phoneNumber)+") s\u1EBD g\u1ECDi l\u1EA1i trong v\xF2ng 1 ph\xFAt",1)]),_:1})]),_:1})])]),_:1})]),_:1})],64)}var $e=N(Pt,[["render",Ot]]);const Vt={components:{ImageUpload:Ie,Supporter:$e},props:{f7route:Object,f7router:Object},setup(){const e=oe("isAuthen"),t=oe("userInfo");return{isAuthen:e,userInfo:t}},data(){return{activityImages:0,maxActivityImages:2,deviceImages:0,maxDeviceImages:4,isCameraOpen:!1,isCameraOpen2:!1,enablePopup:{editDevice:!1,editUser:!1,activeUsing:!1,sendRequest:!1,addNote:!1,submitTask:!1,confirmTask:!1,activity:!1},listSupplier:[],qrid:{},history:[],supporter:{},supplier:{},activity:{},view_activity:{},ACT_POPUP:{nar_bar_title:"G\u1EEDi y\xEAu c\u1EA7u"},isSellProduct:!0}},computed:{isEdit(){return this.isAuthen},isActive(){return this.qrid.status?this.qrid.status=="QRID_STATUS.ACTIVE":!0},hasData(){return this.qrid.title&&this.qrid.ownerName},listHistory(){return this.history}},methods:{formatDate(e){return this.$utils.formatDate(e)},formatDateTime(e){return this.$utils.formatDateTime(e)},formatMoney(e){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"VND"}).format(e)},clickLogin(){this.f7router.navigate("/login/")},clickLogout(){Z.dispatch("logout")},clickEditDevice(){if(this.deviceImages=0,this.qrid.imageUrls.length>0){const e=this.maxDeviceImages-this.qrid.imageUrls.length;console.log("diff",e),e>0?this.deviceImages=this.qrid.imageUrls.length:this.deviceImages=this.maxDeviceImages}console.log("clickEditDevice()",this.deviceImages,this.qrid.imageUrls,this.qrid.imageUrls.length),this.enablePopup.editDevice=!0},getActivityName(e){let t="";return e.type==="ACTIVITY.QR_REQUEST"&&(t+="Y\xEAu c\u1EA7u",e.status=="CREATED"&&(t+=" \u0111\xE3 g\u1EEDi")),e.type==="ACTIVITY.QRTASK"&&(t+="C\xF4ng vi\u1EC7c",e.status=="CREATED"&&(t+=" \u0111\xE3 g\u1EEDi"),e.status=="CONFIRMED"&&(t="Kh\xE1ch h\xE0ng x\xE1c nh\u1EADn"),e.status=="REJECTED"&&(t="Kh\xE1ch h\xE0ng t\u1EEB ch\u1ED1i")),e.type==="ACTIVITY.QRNOTE"&&(t+="Ghi ch\xFA",e.status=="CREATED"&&(t+=" \u0111\xE3 g\u1EEDi")),e.type==="ACTIVITY.QRDelivery"&&(t+="B\xE0n giao",e.status=="CREATED"&&(t+=" \u0111\xE3 g\u1EEDi"),e.status=="CONFIRMED"&&(t+="Kh\xE1ch h\xE0ng x\xE1c nh\u1EADn"),e.status=="REJECTED"&&(t+="Kh\xE1ch h\xE0ng t\u1EEB ch\u1ED1i")),t},getActivityColor(e){if(e.type==="ACTIVITY.QR_REQUEST")return"item-title text-color-orange";if(e.type==="ACTIVITY.QRTASK"){if(e.status==="CONFIRMED")return"item-title text-color-green";if(e.status==="CREATED")return"item-title text-color-blue"}return e.type==="ACTIVITY.QRNOTE"?"item-title text-color-blue":"item-title text-color-black"},toggleCamera(e){console.log("toggleCamera()",e),this.isCameraOpen=e},toggleCamera2(e){console.log("toggleCamera2()",e),this.isCameraOpen2=e},async addImageDevices(e){this.qrid.imageUrls||(this.qrid.imageUrls=[]),this.qrid.imageUrls.push(e),this.deviceImages++},async addImageActivity(e){this.activity.imageUrls||(this.activity.imageUrls=[]),this.activity.imageUrls.push(e),this.activityImages++},cancelEditDevice(){this.stopCameraImageUpload(),this.enablePopup.editDevice=!1},stopCameraImageUpload(){this.isCameraOpen&&this.$refs.deviceImages.toggleCamera(),this.isCameraOpen2&&this.$refs.activityImages.toggleCamera()},async processEditDevice(){this.isActive||(this.qrid.status="QRID_STATUS.EDITED",this.qrid.modified=new Date,this.qrid.modifiedBy=this.userInfo.id,this.isSellProduct?(this.qrid.sellerId=this.supporter.id,this.qrid.sellerName=this.supporter.name,this.qrid.sellerAddress=this.supporter.address):this.qrid.sellerId==this.supporter.id&&(this.qrid.sellerId=0,this.qrid.sellerName="",this.qrid.sellerAddress=""),await this.$axios.patch("/QRIDs/"+this.qrid.id,this.qrid),console.log("editDevice()",this.qrid)),this.stopCameraImageUpload(),this.enablePopup.editDevice=!1},async editUser(){this.isActive||(this.qrid.status="QRID_STATUS.EDITED",this.qrid.modified=new Date,this.qrid.modifiedBy=this.userInfo.id),await this.$axios.patch("/QRIDs/"+this.qrid.id,this.qrid),console.log("editUser()",this.qrid),this.enablePopup.editUser=!1},clickActive(){this.enablePopup.activeUsing=!0},async activeUsing(){this.isActive||(this.qrid.status="QRID_STATUS.ACTIVE",this.qrid.modified=new Date,this.qrid.modifiedBy=this.userInfo.id,this.qrid.activatedDate=new Date),await this.$axios.patch("/QRIDs/"+this.qrid.id,this.qrid),console.log("activeUsing()",this.qrid),this.enablePopup.activeUsing=!1},clickSendRequest(e){e.type="ACTIVITY.QR_REQUEST",this.activity=e,this.ACT_POPUP={nar_bar_title:"Y\xEAu c\u1EA7u m\u1EDBi nh\u1EADn",content:"N\u1ED9i dung y\xEAu c\u1EA7u",sender:"Kh\xE1ch h\xE0ng g\u1EEDi",receiver:"B\xEAn ti\u1EBFp nh\u1EADn",action:"G\u1EEDi y\xEAu c\u1EA7u",action_footer:"Sau khi nh\u1EADn y\xEAu c\u1EA7u, ch\xFAng t\xF4i s\u1EBD g\u1ECDi l\u1EA1i cho qu\xFD kh\xE1ch."},console.log(this.activity),console.log(this.activityImages),this.activityImages=0,this.enablePopup.activity=!0},clickAddNote(e){e.type="ACTIVITY.QRNOTE",e.supplierOrganizationId=0,this.activity=e,this.ACT_POPUP={nar_bar_title:"N\u1ED9i dung ghi ch\xFA",content:"N\u1ED9i dung",sender:"Ng\u01B0\u1EDDi ghi ch\xFA",receiver:"",action:"L\u01B0u Ghi ch\xFA",action_footer:"Ghi ch\xFA n\xE0y ch\u1EC9 \u0111\u01B0\u1EE3c th\u1EA5y khi qu\xE9t Th\u1EBB"},console.log(this.activity),console.log(this.activityImages),this.activityImages=0,this.enablePopup.activity=!0},async clickViewActivity(e){if(this.view_activity=e,this.view_activity.supplierOrganizationId||(this.view_activity.supplierOrganizationId=111),this.view_activity.supplierOrganizationId==this.supporter.id)this.supplier=this.supporter;else{var t=await this.$axios.get("/Organizations/"+this.view_activity.supplierOrganizationId);t&&t.data&&(this.supplier=t.data)}this.view_activity.type=="ACTIVITY.QRTASK"&&(this.view_activity.status=="CREATED"&&(this.ACT_POPUP={nar_bar_title:"Ch\u1EDD x\xE1c nh\u1EADn",content:"N\u1ED9i dung \u0111\xE3 th\u1EF1c hi\u1EC7n",sender:"Kh\xE1ch h\xE0ng x\xE1c nh\u1EADn",receiver:"B\xEAn th\u1EF1c hi\u1EC7n",action:"X\xE1c nh\u1EADn",action_footer:"Sau khi x\xE1c nh\u1EADn, c\xF4ng vi\u1EC7c \u0111\xE3 k\u1EBFt th\xFAc."}),this.view_activity.status=="CONFIRMED"&&(this.ACT_POPUP={nar_bar_title:"C\xF4ng vi\u1EC7c \u0111\u01B0\u1EE3c x\xE1c nh\u1EADn",content:"N\u1ED9i dung \u0111\xE3 th\u1EF1c hi\u1EC7n",sender:"Kh\xE1ch h\xE0ng x\xE1c nh\u1EADn",receiver:"B\xEAn th\u1EF1c hi\u1EC7n",action:"X\xE1c nh\u1EADn",action_footer:"C\xF4ng vi\u1EC7c \u0111\xE3 k\u1EBFt th\xFAc, c\u1EA3m \u01A1n qu\xFD kh\xE1ch \u0111\xE3 l\u1EF1a ch\u1ECDn!"}),this.view_activity.status=="REJECTED"&&(this.ACT_POPUP={nar_bar_title:"C\xF4ng vi\u1EC7c b\u1ECB t\u1EEB ch\u1ED1i",content:"N\u1ED9i dung \u0111\xE3 th\u1EF1c hi\u1EC7n",sender:"Kh\xE1ch h\xE0ng t\u1EEB ch\u1ED1i",receiver:"B\xEAn th\u1EF1c hi\u1EC7n",action:"T\u1EEB ch\u1ED1i",action_footer:""})),this.view_activity.type=="ACTIVITY.QR_REQUEST"&&(this.ACT_POPUP={nar_bar_title:"Y\xEAu c\u1EA7u \u0111\xE3 g\u1EEDi",content:"N\u1ED9i dung y\xEAu c\u1EA7u",sender:"Kh\xE1ch h\xE0ng g\u1EEDi",receiver:"B\xEAn ti\u1EBFp nh\u1EADn",action_footer:"Ch\xFAng t\xF4i \u0111\xE3 ti\u1EBFp nh\u1EADn, s\u1EBD g\u1ECDi l\u1EA1i cho qu\xFD kh\xE1ch."}),this.view_activity.type=="ACTIVITY.QRNOTE"&&(this.ACT_POPUP={nar_bar_title:"Ghi ch\xFA \u0111\xE3 l\u01B0u",content:"N\u1ED9i dung",sender:"Ng\u01B0\u1EDDi ghi ch\xFA",receiver:"",action_footer:"Ch\xFAng t\xF4i \u0111\xE3 ti\u1EBFp nh\u1EADn, s\u1EBD g\u1ECDi l\u1EA1i cho qu\xFD kh\xE1ch."}),console.log("clickViewActivity()",this.view_activity),this.enablePopup.view_activity=!0},async confirmQRTask(){let e={id:this.view_activity.id,qrid:this.activity.qrid,userComment:this.view_activity.userComment,status:"CONFIRMED",modified:new Date};await this.patchActivity(e)},async rejectQRTask(){let e={id:this.view_activity.id,userComment:this.view_activity.userComment,status:"REJECTED",modified:new Date};await this.patchActivity(e)},clickNewActivity(e){const t=this.supporter;let l={qrid:this.qrid.id,title:"",description:"",imageUrls:[],customerName:this.qrid.ownerName,customerPhoneNumber:this.qrid.ownerPhoneNumber,customerAddress:this.qrid.ownerAddress,supplierOrganizationId:t.id,status:"CREATED",created:new Date};this.supplier=t,console.log("clickNewActivity()",l,this.supplier),e=="SEND_REQUEST"&&this.clickSendRequest(l),e=="ADD_NOTE"&&this.clickAddNote(l),e=="SUBMIT_TASK"&&this.clickSubmitTask(l)},clickSubmitTask(e){e.type="ACTIVITY.QRTASK",e.supplierStaffId=this.userInfo.id,this.activity=e,this.ACT_POPUP={nar_bar_title:"C\xF4ng vi\u1EC7c \u0111\xE3 th\u1EF1c hi\u1EC7n",content:"Chi ti\u1EBFt c\xF4ng vi\u1EC7c",sender:"Kh\xE1ch h\xE0ng x\xE1c nh\u1EADn",receiver:"",action:"G\u1EEDi k\u1EBFt qu\u1EA3",action_footer:"Sau khi nh\u1EADn y\xEAu c\u1EA7u, ch\xFAng t\xF4i s\u1EBD g\u1ECDi l\u1EA1i cho qu\xFD kh\xE1ch."},console.log(this.activity),console.log(this.activityImages),this.activityImages=0,this.enablePopup.activity=!0},async closeNewActivity(){this.stopCameraImageUpload(),this.enablePopup.activity=!1},async postActivity(){let e=await this.$axios.post("/QRActivities",this.activity);if(console.log("rs",e),e.data){let t=parseInt(e.data.id),l=await this.$axios.post("/QRActivities/notify",{activityId:t});console.log("notify",l)}this.history.unshift(e.data),this.stopCameraImageUpload(),this.enablePopup.activity=!1},async patchActivity(e){let t=await this.$axios.patch("/QRActivities/"+e.id,e);if(console.log("rs",t.data),t.data){let u=parseInt(t.data.id);await this.$axios.post("/QRActivities/notify",{activityId:u})}if(t.data){for(var l in this.history)if(this.history[l].id==t.data.id){this.history[l]=t.data;break}}return this.enablePopup.view_activity=!1,t.data},changeDesc(e,t){for(var l in projects)if(projects[l].value==e){projects[l].desc=t;break}},async getDeviceData(){try{var e=this.f7route.params.id,t=this.f7route.params.privateCode;this.$axios.defaults.baseURL=O.BASE_URL;var l=await this.$axios.get("QRIDs/getLifecycle",{params:{qrid:e,privateCode:t}}),u=l.data;console.log(u),u&&u.id&&(this.qrid=u,this.supporter=this.qrid.supporter,this.supporter&&this.supporter.id=="888"?Z.dispatch("updateDemoCard",!0):Z.dispatch("updateDemoCard",!1),this.history=this.qrid.history)}catch(a){console.log("error",a)}}},async created(){await Promise.all([this.getDeviceData()])}},Mt=c("\u0110\u0103ng nh\u1EADp"),Ht=c("\u0110\u0103ng xu\u1EA5t"),zt=c("\u0110\u01A1n v\u1ECB ph\xE1t h\xE0nh Th\u1EBB"),Kt={key:0},jt=c("\u0110\xE3 \u0111\u0103ng nh\u1EADp b\u1EDFi"),Yt=c("V\xF2ng \u0111\u1EDDi thi\u1EBFt b\u1ECB"),Gt={key:0},Wt=c(" Th\xF4ng tin thi\u1EBFt b\u1ECB "),Zt=c("Edit"),Xt={class:"list media-list no-hairlines-between"},Jt={class:"item-content"},en={class:"item-inner"},tn={class:"item-title"},nn={class:"item-content"},on={class:"item-inner"},an=["innerHTML"],sn=["src"],ln={key:0},rn={class:"item-content"},dn={class:"item-inner"},cn={class:"item-title"},un={class:"item-checkbox item-content"},pn={class:"item-inner"},hn=o("div",{class:"item-title-row"},[o("div",{class:"item-title"},"S\u1EA3n ph\u1EA9m c\u1EE7a")],-1),_n={class:"item-subtitle"},mn={class:"item-text"},fn=o("p",null,"Ch\u01B0a c\xF3 th\xF4ng tin",-1),gn=c(" Kh\xE1ch h\xE0ng s\u1EED d\u1EE5ng "),vn=c("Edit"),bn={class:"list media-list no-hairlines-between"},Cn={class:"item-content"},yn=o("div",{class:"item-media"},[o("i",{class:"f7-icons"},"person_fill")],-1),En={class:"item-inner"},kn={class:"item-title"},wn={key:0},An={class:"item-content"},Dn=o("div",{class:"item-media"},[o("i",{class:"f7-icons"},"device_phone_portrait")],-1),Tn={class:"item-inner"},In={class:"item-subtitle"},$n={class:"item-content"},Un=o("div",{class:"item-media"},[o("i",{class:"f7-icons"},"house")],-1),xn={class:"item-inner"},Sn={class:"item-subtitle"},Rn=o("p",null,"Ch\u01B0a c\xF3 th\xF4ng tin",-1),Pn=c("L\u1ECBch s\u1EED ho\u1EA1t \u0111\u1ED9ng"),Nn={class:"list media-list medium-inset"},qn=["onClick"],Bn={class:"item-media"},Ln=["src"],Qn={class:"item-inner"},Fn={class:"item-header"},On={class:"item-title-row"},Vn=o("div",{class:"item-after"},null,-1),Mn={class:"item-subtitle"},Hn={class:"item-text"},zn={class:"item-footer text-color-red",style:{"font-size":"14px","font-weight":"600"}},Kn=["src"],jn=o("i",{class:"f7-icons"},"xmark_circle",-1),Yn=c("Cancel"),Gn=o("i",{class:"f7-icons"},"cloud_upload",-1),Wn=c("L\u01B0u"),Zn=c("Ng\u01B0\u1EDDi s\u1EDF h\u1EEFu (mua) thi\u1EBFt b\u1ECB"),Xn=o("i",{class:"f7-icons"},"xmark_circle",-1),Jn=c("Cancel"),ei=c("C\u1EADp nh\u1EADt"),ti=c("X\xE1c nh\u1EADn th\xF4ng tin"),ni=c("sau khi k\xEDch ho\u1EA1t, kh\xF4ng th\u1EC3 thay \u0111\u1ED5i th\xF4ng tin c\u1EE7a Th\u1EBB. B\u1EA1n c\xF3 d\xE1m ch\u1EAFc"),ii=o("i",{class:"f7-icons"},"xmark_circle",-1),oi=c("Hu\u1EF7"),ai=o("i",{class:"f7-icons"},"checkmark_circle",-1),si=c(" X\xE1c nh\u1EADn"),li=["src"],ri=o("i",{class:"f7-icons"},"xmark_circle",-1),di=c("Hu\u1EF7"),ci=o("i",{class:"f7-icons"},"checkmark_circle",-1),ui=["src"],pi=c("Nh\u1EADn x\xE9t t\u1EEB kh\xE1ch h\xE0ng"),hi=c("ch\u01B0a c\xF3"),_i=c("Nh\u1EADn x\xE9t t\u1EEB kh\xE1ch h\xE0ng"),mi=c("T\u1EEB ch\u1ED1i"),fi=o("i",{class:"f7-icons"},"checkmark_circle",-1),gi=c("X\xE1c nh\u1EADn"),vi=o("i",{class:"f7-icons"},"xmark_circle",-1),bi=c(" \u0110\xF3ng");function Ci(e,t,l,u,a,d){const h=s("f7-navbar"),g=s("f7-link"),v=s("f7-list"),_=s("f7-block"),E=s("f7-block-title"),m=s("f7-card-header"),y=s("f7-card-content"),C=s("f7-card"),A=s("f7-page"),k=s("f7-view"),$=s("f7-panel"),x=s("f7-nav-right"),T=s("f7-nav-title"),D=s("f7-button"),B=s("f7-swiper-slide"),Q=s("f7-swiper"),S=s("f7-icon"),G=s("f7-fab"),K=s("f7-list-input"),H=s("image-upload"),j=s("f7-col"),q=s("f7-row"),z=s("f7-list-item"),le=s("f7-popup"),ze=s("f7-card-footer"),be=s("f7-block-footer");return r(),f(A,null,{default:i(()=>[n($,{left:"",cover:"","theme-dark":""},{default:i(()=>[n(k,null,{default:i(()=>[n(A,null,{default:i(()=>[n(h,{title:l.f7router.app.name+" v"+l.f7router.app.version},null,8,["title"]),n(_,null,{default:i(()=>[n(v,null,{default:i(()=>[d.isEdit?w("",!0):(r(),f(g,{key:0,onClick:t[0]||(t[0]=I=>d.clickLogin()),"data-view":".view-main",class:"item-content item-link panel-close"},{default:i(()=>[Mt]),_:1})),d.isEdit?(r(),f(g,{key:1,onClick:t[1]||(t[1]=I=>d.clickLogout()),"data-view":".view-main",class:"item-content item-link panel-close"},{default:i(()=>[Ht]),_:1})):w("",!0)]),_:1})]),_:1}),n(E,null,{default:i(()=>[zt]),_:1}),n(C,null,{default:i(()=>[n(m,null,{default:i(()=>[c(p(a.supporter.name),1)]),_:1}),n(y,null,{default:i(()=>[o("p",null,p(a.supporter.address),1),o("p",null,"Ng\xE0y ph\xE1t h\xE0nh "+p(d.formatDate(a.qrid.created)),1),d.isActive?(r(),b("p",Kt," Ng\xE0y k\xEDch ho\u1EA1t "+p(d.formatDate(a.qrid.activatedDate)),1)):w("",!0)]),_:1})]),_:1}),u.userInfo.id?(r(),f(C,{key:0},{default:i(()=>[n(m,null,{default:i(()=>[jt]),_:1}),n(y,null,{default:i(()=>[c(p(u.userInfo.username)+", vai tr\xF2: "+p(u.userInfo.roleCode)+", id: "+p(u.userInfo.id),1)]),_:1})]),_:1})):w("",!0)]),_:1})]),_:1})]),_:1}),n(h,{sliding:!1},{default:i(()=>[n(x,null,{default:i(()=>[n(g,{"icon-ios":"f7:menu","icon-aurora":"f7:menu","icon-md":"material:menu","panel-open":"left"})]),_:1}),n(T,{sliding:""},{default:i(()=>[Yt]),_:1})]),_:1}),n(C,{"bg-color":d.isActive?"blue":"red"},{default:i(()=>[n(m,null,{default:i(()=>[c("ID: "+p(l.f7route.params.id),1),d.isActive?w("",!0):(r(),b("span",Gt,"ch\u01B0a k\xEDch ho\u1EA1t"))]),_:1})]),_:1},8,["bg-color"]),n(C,null,{default:i(()=>[n(m,{"bg-color":"green"},{default:i(()=>[Wt,!d.isActive&&d.isEdit?(r(),f(D,{key:0,onClick:d.clickEditDevice},{default:i(()=>[Zt]),_:1},8,["onClick"])):w("",!0)]),_:1}),a.qrid.title?(r(),f(y,{key:0},{default:i(()=>[o("div",Xt,[o("ul",null,[o("li",null,[o("div",Jt,[o("div",en,[o("div",tn,p(a.qrid.title),1)])])]),o("li",null,[o("div",nn,[o("div",on,[o("div",{class:"item-text",innerHTML:a.qrid.description},null,8,an)])])]),o("li",null,[n(Q,{speed:500,slidesPerView:2,spaceBetween:10},{default:i(()=>[(r(!0),b(P,null,F(a.qrid.imageUrls,I=>(r(),f(B,{key:I},{default:i(()=>[o("img",{class:"small",src:I},null,8,sn)]),_:2},1024))),128))]),_:1})]),d.isActive?(r(),b("li",ln,[o("div",rn,[o("div",dn,[o("div",cn," Ng\xE0y k\xEDch ho\u1EA1t: "+p(d.formatDate(a.qrid.activatedDate)),1)])])])):w("",!0),o("li",null,[o("label",un,[o("div",pn,[hn,o("div",_n,p(a.qrid.sellerName),1),o("div",mn,p(a.qrid.sellerAddress),1)])])])])])]),_:1})):(r(),f(y,{key:1},{default:i(()=>[fn]),_:1}))]),_:1}),n(C,null,{default:i(()=>[n(m,{"bg-color":"green"},{default:i(()=>[gn,!d.isActive&&d.isEdit?(r(),f(D,{key:0,"popup-open":"#edit-user"},{default:i(()=>[vn]),_:1})):w("",!0)]),_:1}),a.qrid.ownerName?(r(),f(y,{key:0},{default:i(()=>[o("div",bn,[o("ul",null,[o("li",null,[o("div",Cn,[yn,o("div",En,[o("div",kn,p(a.qrid.ownerName),1)])])]),a.qrid.ownerPhoneNumber?(r(),b("li",wn,[o("div",An,[Dn,o("div",Tn,[o("div",In,p(a.qrid.ownerPhoneNumber),1)])])])):w("",!0),o("li",null,[o("div",$n,[Un,o("div",xn,[o("div",Sn,p(a.qrid.ownerAddress),1)])])])])])]),_:1})):(r(),f(y,{key:1},{default:i(()=>[Rn]),_:1}))]),_:1}),d.isActive?(r(),f(E,{key:0},{default:i(()=>[Pn]),_:1})):w("",!0),o("div",Nn,[o("ul",null,[(r(!0),b(P,null,F(a.history,I=>(r(),b("li",{key:I.id},[o("a",{onClick:R1=>d.clickViewActivity(I),class:"item-link item-content chevron-center"},[o("div",Bn,[o("img",{style:{border:"1px solid #ccc"},src:I.imageUrls&&I.imageUrls[0]?I.imageUrls[0]:"https://apps.vinaas.com/file/sBsN149Dh",width:"80"},null,8,Ln)]),o("div",Qn,[o("div",Fn,p(d.formatDateTime(I.modified)),1),o("div",On,[o("div",{class:J(d.getActivityColor(I)),style:{"font-size":"16px"}},p(d.getActivityName(I)),3),Vn]),o("div",Mn,p(I.title),1),o("div",Hn,p(I.description),1),o("div",zn,p(I.money>0?d.formatMoney(I.money):" "),1)])],8,qn)]))),128))])]),!d.isActive&&!d.isEdit?(r(),f(G,{key:1,position:"center-bottom",text:"\u0110\u0103ng nh\u1EADp",color:"red",onClick:t[2]||(t[2]=I=>d.clickLogin())},{default:i(()=>[n(S,{ios:"f7:lock_open",aurora:"f7:lock_open",md:"material:lock_open"})]),_:1})):w("",!0),!d.isActive&&d.isEdit&&d.hasData?(r(),f(G,{key:2,position:"center-bottom",text:"K\xEDch ho\u1EA1t",color:"red",onClick:t[3]||(t[3]=I=>d.clickActive())},{default:i(()=>[n(S,{ios:"f7:house",aurora:"f7:house",md:"material:house"})]),_:1})):w("",!0),d.isActive&&d.isEdit?(r(),f(G,{key:3,position:"center-bottom",text:"C\xF4ng vi\u1EC7c",color:"blue",onClick:t[4]||(t[4]=I=>d.clickNewActivity("SUBMIT_TASK"))},{default:i(()=>[n(S,{f7:"bell_fill"})]),_:1})):w("",!0),d.isActive&&!d.isEdit?(r(),f(G,{key:4,position:"left-bottom",text:"Ghi ch\xFA",color:"green",onClick:t[5]||(t[5]=I=>d.clickNewActivity("ADD_NOTE"))},{default:i(()=>[n(S,{f7:"pencil_ellipsis_rectangle"})]),_:1})):w("",!0),d.isActive&&!d.isEdit?(r(),f(G,{key:5,position:"right-bottom",text:"Y\xEAu c\u1EA7u",color:"blue",onClick:t[6]||(t[6]=I=>d.clickNewActivity("SEND_REQUEST"))},{default:i(()=>[n(S,{f7:"paperplane_fill"})]),_:1})):w("",!0),n(le,{id:"edit-device",opened:a.enablePopup.editDevice,"onUpdate:opened":t[10]||(t[10]=I=>a.enablePopup.editDevice=I)},{default:i(()=>[n(A,null,{default:i(()=>[n(h,{title:"C\u1EADp nh\u1EADt thi\u1EBFt b\u1ECB"}),n(_,null,{default:i(()=>[n(v,null,{default:i(()=>[n(K,{type:"text",placeholder:"nh\u1EADp ng\u1EAFn g\u1ECDn",outline:"",label:"T\xEAn thi\u1EBFt b\u1ECB","floating-label":"",maxlength:"25","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng",required:"","clear-button":"",value:a.qrid.title,"onUpdate:value":t[7]||(t[7]=I=>a.qrid.title=I)},null,8,["value"])]),_:1})]),_:1}),n(_,null,{default:i(()=>[n(H,{ref:"deviceImages",countImages:a.deviceImages,maxImages:a.maxDeviceImages,onToggleCamera:d.toggleCamera,onUploaded:d.addImageDevices},null,8,["countImages","maxImages","onToggleCamera","onUploaded"]),n(q,{"no-gap":""},{default:i(()=>[(r(!0),b(P,null,F(a.qrid.imageUrls,I=>(r(),f(j,{width:"50",key:I},{default:i(()=>[o("img",{width:"100",src:I},null,8,Kn)]),_:2},1024))),128))]),_:1}),n(v,null,{default:i(()=>[n(K,{outline:"",label:"M\xF4 t\u1EA3","floating-label":"",type:"textarea",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:a.qrid.description,"onUpdate:value":t[8]||(t[8]=I=>a.qrid.description=I)},null,8,["value"])]),_:1}),n(v,{"media-list":""},{default:i(()=>[n(z,{checkbox:"",checked:"","onUpdate:checked":t[9]||(t[9]=I=>a.isSellProduct=I),title:"S\u1EA3n ph\u1EA9m c\u1EE7a",after:"",subtitle:a.supporter.name,text:a.supporter.address},null,8,["checked","subtitle","text"])]),_:1})]),_:1}),n(q,null,{default:i(()=>[n(j,{width:"40"},{default:i(()=>[n(D,{round:"",large:"",color:"gray",onClick:d.cancelEditDevice},{default:i(()=>[jn,Yn]),_:1},8,["onClick"])]),_:1}),n(j,{width:"60"},{default:i(()=>[n(D,{fill:"",round:"",large:"",onClick:d.processEditDevice},{default:i(()=>[Gn,Wn]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["opened"]),n(le,{id:"edit-user",opened:a.enablePopup.editUser,"onUpdate:opened":t[14]||(t[14]=I=>a.enablePopup.editUser=I)},{default:i(()=>[n(A,null,{default:i(()=>[n(h,{title:"Th\xF4ng tin ng\u01B0\u1EDDi s\u1EED d\u1EE5ng"}),n(_,null,{default:i(()=>[n(E,null,{default:i(()=>[Zn]),_:1}),n(v,{"no-hairlines-md":""},{default:i(()=>[n(K,{type:"text",outline:"",label:"T\xEAn g\u1ECDi","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"20","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:a.qrid.ownerName,"onUpdate:value":t[11]||(t[11]=I=>a.qrid.ownerName=I)},null,8,["value"]),n(K,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp \u0111\u1EC3 ti\u1EC7n li\xEAn h\u1EC7","error-message":"h\xE3y nh\u1EADp \u0111\u1EE7 10 s\u1ED1!",minlength:"10",maxlength:"11",validate:"",pattern:"[0-9]*","clear-button":"",value:a.qrid.ownerPhoneNumber,"onUpdate:value":t[12]||(t[12]=I=>a.qrid.ownerPhoneNumber=I)},null,8,["value"]),n(K,{outline:"",type:"textarea",label:"\u0110\u1ECBa ch\u1EC9","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:a.qrid.ownerAddress,"onUpdate:value":t[13]||(t[13]=I=>a.qrid.ownerAddress=I)},null,8,["value"])]),_:1})]),_:1}),n(q,null,{default:i(()=>[n(j,{width:"40"},{default:i(()=>[n(D,{round:"",large:"",color:"gray","popup-close":""},{default:i(()=>[Xn,Jn]),_:1})]),_:1}),n(j,{width:"60"},{default:i(()=>[n(D,{fill:"",round:"",large:"",onClick:d.editUser},{default:i(()=>[ei]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["opened"]),n(le,{id:"active-using",opened:a.enablePopup.activeUsing,"onUpdate:opened":t[15]||(t[15]=I=>a.enablePopup.activeUsing=I)},{default:i(()=>[n(A,null,{default:i(()=>[n(h,{title:"C\u1EA3nh b\xE1o"}),n(C,{strong:""},{default:i(()=>[n(m,null,{default:i(()=>[ti]),_:1}),n(y,null,{default:i(()=>[ni]),_:1}),n(ze,null,{default:i(()=>[n(j,null,{default:i(()=>[n(D,{"popup-close":""},{default:i(()=>[ii,oi]),_:1})]),_:1}),n(j,null,{default:i(()=>[n(D,{fill:"",onClick:d.activeUsing},{default:i(()=>[ai,si]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["opened"]),n(le,{id:"new-activity",opened:a.enablePopup.activity,"onUpdate:opened":t[22]||(t[22]=I=>a.enablePopup.activity=I)},{default:i(()=>[n(A,null,{default:i(()=>[n(h,{title:a.ACT_POPUP.nar_bar_title},null,8,["title"]),n(C,null,{default:i(()=>[n(m,{"bg-color":"green"},{default:i(()=>[c(p(a.ACT_POPUP.content),1)]),_:1}),n(y,null,{default:i(()=>[n(v,null,{default:i(()=>[n(K,{type:"text",placeholder:"nh\u1EADp ng\u1EAFn g\u1ECDn",outline:"",label:"Ti\xEAu \u0111\u1EC1","floating-label":"",maxlength:"25","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng",required:"","clear-button":"",value:a.activity.title,"onUpdate:value":t[16]||(t[16]=I=>a.activity.title=I)},null,8,["value"]),n(K,{outline:"",label:"M\xF4 t\u1EA3","floating-label":"",type:"textarea",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:a.activity.description,"onUpdate:value":t[17]||(t[17]=I=>a.activity.description=I)},null,8,["value"]),a.activity.type=="ACTIVITY.QRTASK"?(r(),f(K,{key:0,outline:"",type:"number",label:"Ti\u1EC1n \u0111\xE3 thu","floating-label":"",placeholder:"","clear-button":"",value:a.activity.money,"onUpdate:value":t[18]||(t[18]=I=>a.activity.money=I)},null,8,["value"])):w("",!0),a.activity.type=="ACTIVITY.QRTASK"?(r(),f(z,{key:1},{default:i(()=>[c("V\xE0o l\xFAc : "+p(d.formatDateTime(a.activity.created)),1)]),_:1})):w("",!0)]),_:1})]),_:1})]),_:1}),n(_,null,{default:i(()=>[n(H,{ref:"activityImages",countImages:a.activityImages,maxImages:a.maxActivityImages,onToggleCamera:d.toggleCamera2,onUploaded:d.addImageActivity},null,8,["countImages","maxImages","onToggleCamera","onUploaded"]),n(q,{"no-gap":""},{default:i(()=>[(r(!0),b(P,null,F(a.activity.imageUrls,I=>(r(),f(j,{width:"50",key:I},{default:i(()=>[o("img",{width:"100",src:I},null,8,li)]),_:2},1024))),128))]),_:1})]),_:1}),n(C,null,{default:i(()=>[n(m,{"bg-color":"green"},{default:i(()=>[c(p(a.ACT_POPUP.sender),1)]),_:1}),n(y,null,{default:i(()=>[n(v,{"no-hairlines-md":""},{default:i(()=>[n(K,{type:"text",outline:"",label:"T\xEAn g\u1ECDi","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"20","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:a.activity.customerName,"onUpdate:value":t[19]||(t[19]=I=>a.activity.customerName=I)},null,8,["value"]),a.activity.type=="ACTIVITY.QR_REQUEST"?(r(),f(K,{key:0,outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i \u0111\u1EC3 li\xEAn h\u1EC7","floating-label":"",type:"text",placeholder:"nh\u1EADp \u0111\u1EC3 ti\u1EC7n li\xEAn h\u1EC7","error-message":"h\xE3y nh\u1EADp \u0111\u1EE7 10 s\u1ED1!",minlength:"10",maxlength:"11",validate:"",pattern:"[0-9]*","clear-button":"",value:a.activity.customerPhoneNumber,"onUpdate:value":t[20]||(t[20]=I=>a.activity.customerPhoneNumber=I)},null,8,["value"])):w("",!0),n(K,{outline:"",type:"textarea",label:"\u0110\u1ECBa ch\u1EC9","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:a.activity.customerAddress,"onUpdate:value":t[21]||(t[21]=I=>a.activity.customerAddress=I)},null,8,["value"])]),_:1})]),_:1})]),_:1}),a.activity.type=="ACTIVITY.QR_REQUEST"?(r(),f(C,{key:0},{default:i(()=>[n(m,{"bg-color":"blue"},{default:i(()=>[c(p(a.ACT_POPUP.receiver),1)]),_:1}),n(y,null,{default:i(()=>[n(m,null,{default:i(()=>[c(p(a.supplier.name),1)]),_:1}),n(y,null,{default:i(()=>[c(p(a.supplier.address),1)]),_:1})]),_:1})]),_:1})):w("",!0),n(_,null,{default:i(()=>[n(q,null,{default:i(()=>[n(j,{width:"30"},{default:i(()=>[n(D,{raised:"",round:"",large:"",color:"gray",onClick:d.closeNewActivity},{default:i(()=>[ri,di]),_:1},8,["onClick"])]),_:1}),n(j,{width:"60"},{default:i(()=>[n(D,{raised:"",round:"",fill:"",large:"",onClick:d.postActivity},{default:i(()=>[ci,c(p(a.ACT_POPUP.action),1)]),_:1},8,["onClick"])]),_:1})]),_:1}),n(be,null,{default:i(()=>[c(p(a.ACT_POPUP.action_footer),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["opened"]),n(le,{id:"view-activity",opened:a.enablePopup.view_activity,"onUpdate:opened":t[26]||(t[26]=I=>a.enablePopup.view_activity=I)},{default:i(()=>[n(A,null,{default:i(()=>[n(h,{title:a.ACT_POPUP.nar_bar_title},null,8,["title"]),n(C,null,{default:i(()=>[n(m,{"bg-color":"green"},{default:i(()=>[c(p(a.ACT_POPUP.content),1)]),_:1}),n(y,null,{default:i(()=>[n(v,{"no-hairlines-md":""},{default:i(()=>[n(z,null,{default:i(()=>[c(p(a.view_activity.title),1)]),_:1}),n(z,null,{default:i(()=>[c(p(a.view_activity.description),1)]),_:1}),a.view_activity.type=="ACTIVITY.QRTASK"?(r(),f(z,{key:0},{default:i(()=>[c("\u0110\xE3 thu: "+p(d.formatMoney(a.view_activity.money)),1)]),_:1})):w("",!0),a.view_activity.type=="ACTIVITY.QRTASK"?(r(),f(z,{key:1},{default:i(()=>[c("Th\u1EF1c hi\u1EC7n l\xFAc: "+p(d.formatDateTime(a.view_activity.created)),1)]),_:1})):(r(),f(z,{key:2},{default:i(()=>[c("G\u1EEDi l\xFAc: "+p(d.formatDateTime(a.view_activity.created)),1)]),_:1})),n(_,null,{default:i(()=>[n(q,{"no-gap":""},{default:i(()=>[(r(!0),b(P,null,F(a.view_activity.imageUrls,I=>(r(),f(j,{width:"50",key:I},{default:i(()=>[o("img",{width:"100",src:I},null,8,ui)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n(C,null,{default:i(()=>[n(m,{"bg-color":"green"},{default:i(()=>[c(p(a.ACT_POPUP.sender),1)]),_:1}),n(y,null,{default:i(()=>[n(v,{"no-hairlines-md":""},{default:i(()=>[n(z,null,{default:i(()=>[c(p(a.view_activity.customerName),1)]),_:1}),n(z,null,{default:i(()=>[c(p(a.view_activity.customerPhoneNumber),1)]),_:1}),n(z,null,{default:i(()=>[c(p(a.view_activity.customerAddress),1)]),_:1}),a.view_activity.type=="ACTIVITY.QRTASK"&&a.view_activity.status=="CONFIRMED"?(r(),f(z,{key:0},{default:i(()=>[c("X\xE1c nh\u1EADn l\xFAc "+p(d.formatDateTime(a.view_activity.modified)),1)]),_:1})):w("",!0),a.view_activity.type=="ACTIVITY.QRTASK"&&a.view_activity.status=="REJECTED"?(r(),f(z,{key:1},{default:i(()=>[c("T\u1EEB ch\u1ED1i l\xFAc "+p(d.formatDateTime(a.view_activity.modified)),1)]),_:1})):w("",!0)]),_:1})]),_:1})]),_:1}),a.view_activity.type=="ACTIVITY.QRTASK"&&(a.view_activity.status=="CONFIRMED"||a.view_activity.status=="REJECTED")?(r(),f(C,{key:0},{default:i(()=>[n(m,{"bg-color":"green"},{default:i(()=>[pi]),_:1}),n(y,null,{default:i(()=>[a.view_activity.userComment?(r(),f(v,{key:0},{default:i(()=>[n(z,null,{default:i(()=>[c(p(a.view_activity.userComment),1)]),_:1})]),_:1})):(r(),f(v,{key:1},{default:i(()=>[n(z,null,{default:i(()=>[hi]),_:1})]),_:1}))]),_:1})]),_:1})):w("",!0),a.view_activity.type=="ACTIVITY.QR_REQUEST"||a.view_activity.type=="ACTIVITY.QRTASK"?(r(),f(C,{key:1},{default:i(()=>[n(m,{"bg-color":"blue"},{default:i(()=>[c(p(a.ACT_POPUP.receiver)+" ",1),n(S,{f7:a.supplier.status=="ACTIVE"?"star_circle":"star_slash"},null,8,["f7"])]),_:1}),n(y,null,{default:i(()=>[n(v,null,{default:i(()=>[n(z,null,{default:i(()=>[c(p(a.supplier.name),1)]),_:1}),n(z,null,{default:i(()=>[c(p(a.supplier.address),1)]),_:1})]),_:1})]),_:1})]),_:1})):w("",!0),a.view_activity.type=="ACTIVITY.QRTASK"&&a.view_activity.status=="CREATED"?(r(),f(C,{key:2},{default:i(()=>[n(m,{"bg-color":"green"},{default:i(()=>[_i]),_:1}),n(y,null,{default:i(()=>[n(v,null,{default:i(()=>[n(K,{type:"textarea",outline:"",label:"Nh\u1EADn x\xE9t","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","error-message":"b\u1EA1n \u0111\xE3 nh\u1EADp qu\xE1 d\xE0i!","clear-button":"",value:a.view_activity.userComment,"onUpdate:value":t[23]||(t[23]=I=>a.view_activity.userComment=I)},null,8,["value"])]),_:1})]),_:1})]),_:1})):w("",!0),n(_,null,{default:i(()=>[a.view_activity.type=="ACTIVITY.QRTASK"&&a.view_activity.status=="CREATED"?(r(),f(q,{key:0},{default:i(()=>[n(j,{width:"40"},{default:i(()=>[n(D,{raised:"",round:"",large:"",color:"gray",onClick:t[24]||(t[24]=I=>d.rejectQRTask())},{default:i(()=>[mi]),_:1})]),_:1}),n(j,{width:"60"},{default:i(()=>[n(D,{fill:"",large:"",onClick:t[25]||(t[25]=I=>d.confirmQRTask())},{default:i(()=>[fi,gi]),_:1})]),_:1})]),_:1})):(r(),f(q,{key:1},{default:i(()=>[n(j,{width:"100"},{default:i(()=>[n(D,{fill:"",round:"",large:"","popup-close":""},{default:i(()=>[vi,bi]),_:1})]),_:1})]),_:1})),n(be,null,{default:i(()=>[c(p(a.ACT_POPUP.action_footer),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1})}var yi=N(Vt,[["render",Ci]]);const Ei={props:["maxImages","enableCamera"],emits:["save"],data(){return{isCameraOpen:!1,isPhotoTaken:!1,isShotPhoto:!1,isLoading:!1,imageUrls:[],video:"",photoTaken:"",photoTakenCtx:"",width:0,height:0,log:"",dataUrl:""}},computed:{textSaveButton(){return this.imageUrls.length>0?`Save(${this.imageUrls.length})`:"Save"}},methods:{close(e=!0){console.log("closeCamera",e),this.toggleCamera(),e?this.$emit("save",this.imageUrls):this.$emit("save",null)},closeCamera(){this.isCameraOpen=!1,this.isPhotoTaken=!1,this.isShotPhoto=!1,this.stopCameraStream()},openCamera(){this.imageUrls=[],this.toggleCamera()},doLoad(){this.video=document.getElementById("camera-video"),this.photoTaken=document.getElementById("photoTaken"),this.photoTakenCtx=this.photoTaken.getContext("2d");let e=this;this.video.addEventListener("play",function(){e.width=e.video.videoWidth,e.height=e.video.videoHeight},!1)},computeFrame(){const e=this.video.videoWidth,t=this.video.videoHeight,l=t/4*3,u=(e-l)/2,a=0;this.photoTaken.width=l,this.photoTaken.height=t,this.log="Video:Crop:("+this.photoTaken.width+","+this.photoTaken.height+"("+e+","+t+")",this.photoTakenCtx.drawImage(this.video,u,a,l,t,0,0,l,t)},toggleCamera(){console.log("toggleCamera()",this.isCameraOpen),this.isCameraOpen?(this.isCameraOpen=!1,this.isPhotoTaken=!1,this.isShotPhoto=!1,this.stopCameraStream()):(this.isCameraOpen=!0,this.createCameraElement())},createCameraElement(){console.log("createCameraElement()",this.isCameraOpen);try{this.isLoading=!0,U.preloader.show();var e={video:{facingMode:"environment"}};navigator.mediaDevices.getUserMedia(e).then(t=>{this.isLoading=!1,U.preloader.hide(),this.$refs.camera.srcObject=t,this.doLoad()}).catch(t=>{this.isLoading=!1,U.preloader.hide(),alert("May the browser didn't support or there is some errors.")})}catch(t){console.log("createCameraElement()",t)}},stopCameraStream(){console.log("stopCameraStream()",this.isCameraOpen),this.$refs.camera.srcObject.getTracks().forEach(t=>{t.stop()})},async takePhoto(){if(this.imageUrls.length>=this.maxImages){U.dialog.alert("B\u1EA1n \u0111\xE3 ch\u1EE5p qu\xE1 "+this.maxImages+" t\u1EA5m!");return}this.isPhotoTaken||(this.isShotPhoto=!0,setTimeout(()=>{this.isShotPhoto=!1},50)),this.computeFrame(),this.isPhotoTaken=!this.isPhotoTaken,this.dataUrl=this.photoTaken.toDataURL(),await this.uploadImage()},async uploadImage(){const e=this.photoTaken.toDataURL("image/jpeg",.9);var t=this.dataURItoBlob(e);const l=new FormData;l.append("canvasImage",t);try{let u="https://media.vinaas.com/upload/qrcare-vn";const{data:a}=await this.$axios.post(u,l,{headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"}});if(a&&a.id){const d="https://apps.vinaas.com/file/"+a.id;this.imageUrls.push(d)}}catch(u){console.log("err",u)}finally{}this.isPhotoTaken=!this.isPhotoTaken},dataURItoBlob(e){var t;e.split(",")[0].indexOf("base64")>=0?t=atob(e.split(",")[1]):t=unescape(e.split(",")[1]);for(var l=e.split(",")[0].split(":")[1].split(";")[0],u=new Uint8Array(t.length),a=0;a<t.length;a++)u[a]=t.charCodeAt(a);return new Blob([u],{type:l})}}},ki={class:"web-camera-container"},wi=["width","height"],Ai=["src","width","height"],Di={id:"photoTaken"},Ti=["src"];function Ii(e,t,l,u,a,d){const h=s("f7-row"),g=s("f7-col"),v=s("f7-block"),_=s("f7-icon"),E=s("f7-fab"),m=s("f7-page");return r(),f(m,null,{default:i(()=>[o("div",ki,[a.isCameraOpen?L((r(),b("div",{key:0,class:J(["camera-box",{flash:a.isShotPhoto}])},[o("div",{class:J(["camera-shutter",{flash:a.isShotPhoto}])},null,2),L(o("video",{id:"camera-video",ref:"camera",width:a.width/2,height:a.height/2,autoplay:"",muted:"",playsinline:""},null,8,wi),[[V,!a.isPhotoTaken]]),L(o("img",{src:a.dataUrl,id:"showPhotoTaken",width:a.height/8*3,height:a.height/2},null,8,Ai),[[V,a.isPhotoTaken]]),L(o("canvas",Di,null,512),[[V,!1]])],2)),[[V,!a.isLoading]]):w("",!0)]),n(v,null,{default:i(()=>[n(h,null,{default:i(()=>[c("H\xECnh \u0111\xE3 ch\u1EE5p ("+p(a.imageUrls.length)+" t\u1EA5m)",1)]),_:1}),n(h,null,{default:i(()=>[(r(!0),b(P,null,F(a.imageUrls,y=>(r(),f(g,{width:"50",key:y},{default:i(()=>[o("img",{style:{"max-width":"50%",height:"auto"},src:y},null,8,Ti)]),_:2},1024))),128))]),_:1})]),_:1}),n(E,{position:"center-bottom",onClick:d.takePhoto,text:"",color:"red"},{default:i(()=>[n(_,{f7:"camera"})]),_:1},8,["onClick"]),n(E,{position:"right-bottom",color:"blue",onClick:t[0]||(t[0]=y=>d.close(!0)),text:d.textSaveButton},null,8,["text"]),n(E,{position:"left-bottom",color:"gray",onClick:t[1]||(t[1]=y=>d.close(!1)),text:"X"})]),_:1})}var Ue=N(Ei,[["render",Ii],["__scopeId","data-v-b151db60"]]);const $i=M({props:{isView:Boolean,id:Number,status:String},emits:["updated"],components:{ImageUpload:Ue},data(){return{locationName:"M\xF4 t\u1EA3 \u0111\u1ECBa \u0111i\u1EC3m",adminCardTitle:"Nh\xE2n s\u1EF1 ti\u1EBFp nh\u1EADn",isLoading:!1,enablePopup:!1,isCameraOpen:!1,imageUrls:[],data:{imageUrls:[],sellerName:null}}},watch:{id:"loadData",status:"loadData"},computed:{isActive(){return this.status!=="QRID_STATUS.ACTIVE"?this.isView:!0}},methods:{async loadData(){this.id>0&&(this.isLoading=!0,this.data=await this.$api.getQRID(this.id,"111"),this.isLoading=!1)},async updateData(){this.id&&await this.$api.activeQRMember(this.id,this.data)&&(U.dialog.alert("K\xEDch ho\u1EA1t th\xE0nh c\xF4ng!"),this.$emit("updated","ACTIVE"))},async showCamera(){console.log("click showCamera()"),this.enablePopup=!0,this.$refs.camera.openCamera()},saveImageUrls(e){this.enablePopup=!1,console.log("saveImages",e),e&&(this.data.imageUrls=e)}},async mounted(){await this.loadData()}}),Ui={class:"list media-list no-hairlines-between"},xi={class:"item-content"},Si={class:"item-inner"},Ri={class:"item-title"},Pi={class:"item-content"},Ni={class:"item-inner"},qi=["innerHTML"],Bi=["src"],Li=c("H\xECnh \u1EA3nh minh ho\u1EA1 \u0111\u1ECBa \u0111i\u1EC3m"),Qi=["src"],Fi=c("Ch\u1EE5p"),Oi={class:"list media-list no-hairlines-between"},Vi={class:"item-content"},Mi=o("div",{class:"item-media"},[o("i",{class:"f7-icons"},"person_fill")],-1),Hi={class:"item-inner"},zi={class:"item-title"},Ki={key:0},ji={class:"item-content"},Yi=o("div",{class:"item-media"},[o("i",{class:"f7-icons"},"device_phone_portrait")],-1),Gi={class:"item-inner"},Wi={class:"item-subtitle"},Zi={key:1},Xi={class:"item-checkbox item-content"},Ji={class:"item-inner"},eo=o("div",{class:"item-title-row"},[o("div",{class:"item-title"},"Qu\u1EA3n l\xFD b\u1EDFi")],-1),to={class:"item-subtitle"},no={class:"item-text"},io=c("K\xEDch ho\u1EA1t");function oo(e,t,l,u,a,d){const h=s("f7-preloader"),g=s("f7-card-header"),v=s("f7-swiper-slide"),_=s("f7-swiper"),E=s("f7-card-content"),m=s("f7-card"),y=s("f7-list-input"),C=s("f7-list"),A=s("f7-row"),k=s("f7-col"),$=s("f7-icon"),x=s("f7-button"),T=s("f7-block"),D=s("image-upload"),B=s("f7-popup");return r(),b(P,null,[e.isActive?(r(),f(m,{key:0},{default:i(()=>[n(g,{"bg-color":"green"},{default:i(()=>[c(p(e.locationName)+" ",1),L(n(h,null,null,512),[[V,e.isLoading]])]),_:1}),n(E,null,{default:i(()=>[o("div",Ui,[o("ul",null,[o("li",null,[o("div",xi,[o("div",Si,[o("div",Ri,p(e.data.title),1)])])]),o("li",null,[o("div",Pi,[o("div",Ni,[o("div",{class:"item-text",innerHTML:e.data.description},null,8,qi)])])]),o("li",null,[n(_,{speed:500,slidesPerView:2,spaceBetween:10},{default:i(()=>[(r(!0),b(P,null,F(e.data.imageUrls,Q=>(r(),f(v,{key:Q},{default:i(()=>[o("img",{class:"small",src:Q},null,8,Bi)]),_:2},1024))),128))]),_:1})])])])]),_:1})]),_:1})):(r(),f(m,{key:1},{default:i(()=>[n(g,{"bg-color":"blue"},{default:i(()=>[c(p(e.locationName),1)]),_:1}),n(E,null,{default:i(()=>[n(C,null,{default:i(()=>[n(y,{type:"text",placeholder:"nh\u1EADp ng\u1EAFn g\u1ECDn",outline:"",label:"T\xEAn \u0111\u1ECBa \u0111i\u1EC3m d\xE1n th\u1EBB","floating-label":"","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng",required:"","clear-button":"",value:e.data.title,"onUpdate:value":t[0]||(t[0]=Q=>e.data.title=Q)},null,8,["value"])]),_:1}),n(C,null,{default:i(()=>[n(y,{outline:"",label:"N\u1ED9i dung c\u1EA7n ph\u1EA3n \xE1nh(n\u1EBFu c\xF3)","floating-label":"",type:"textarea",resizable:"",maxlength:"200","clear-button":"",value:e.data.description,"onUpdate:value":t[1]||(t[1]=Q=>e.data.description=Q)},null,8,["value"])]),_:1}),n(T,{style:{"margin-top":"20px","margin-bottom":"10px"}},{default:i(()=>[n(A,null,{default:i(()=>[Li]),_:1}),n(A,null,{default:i(()=>[(r(!0),b(P,null,F(e.data.imageUrls,Q=>(r(),f(k,{width:"50",key:Q},{default:i(()=>[o("img",{style:{"max-width":"100%",height:"auto"},src:Q},null,8,Qi)]),_:2},1024))),128))]),_:1}),n(x,{large:"",round:"",outline:"",onClick:t[2]||(t[2]=Q=>e.showCamera())},{default:i(()=>[n($,{f7:"camera"}),Fi]),_:1})]),_:1})]),_:1})]),_:1})),e.isActive?(r(),f(m,{key:2},{default:i(()=>[n(g,{"bg-color":"green"},{default:i(()=>[c(p(e.adminCardTitle),1)]),_:1}),n(E,null,{default:i(()=>[o("div",Oi,[o("ul",null,[o("li",null,[o("div",Vi,[Mi,o("div",Hi,[o("div",zi,p(e.data.ownerName),1)])])]),e.data.ownerPhoneNumber?(r(),b("li",Ki,[o("div",ji,[Yi,o("div",Gi,[o("div",Wi,p(e.data.ownerPhoneNumber),1)])])])):w("",!0),e.data.sellerName?(r(),b("li",Zi,[o("label",Xi,[o("div",Ji,[eo,o("div",to,p(e.data.sellerName),1),o("div",no,p(e.data.sellerAddress),1)])])])):w("",!0)])])]),_:1})]),_:1})):(r(),f(m,{key:3},{default:i(()=>[n(g,{"bg-color":"blue"},{default:i(()=>[c(p(e.adminCardTitle),1)]),_:1}),n(E,null,{default:i(()=>[n(C,{"no-hairlines-md":""},{default:i(()=>[n(y,{type:"text",outline:"",label:"Nh\xE2n vi\xEAn ph\u1EE5 tr\xE1ch","floating-label":"",placeholder:"",maxlength:"100","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:e.data.ownerName,"onUpdate:value":t[3]||(t[3]=Q=>e.data.ownerName=Q)},null,8,["value"]),n(y,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (khi kh\u1EA9n c\u1EA5p)","floating-label":"",type:"text",placeholder:"nh\u1EADp \u0111\u1EC3 ti\u1EC7n li\xEAn h\u1EC7","error-message":"h\xE3y nh\u1EADp \u0111\u1EE7 10 s\u1ED1!",minlength:"10",maxlength:"11",validate:"",pattern:"[0-9]*","clear-button":"",value:e.data.ownerPhoneNumber,"onUpdate:value":t[4]||(t[4]=Q=>e.data.ownerPhoneNumber=Q)},null,8,["value"])]),_:1})]),_:1})]),_:1})),e.isActive?w("",!0):(r(),f(T,{key:4},{default:i(()=>[n(A,null,{default:i(()=>[n(k,{width:"100"},{default:i(()=>[n(x,{fill:"",round:"",large:"",onClick:t[5]||(t[5]=Q=>e.updateData()),color:"red"},{default:i(()=>[io]),_:1})]),_:1})]),_:1})]),_:1})),n(B,{opened:e.enablePopup,"onUpdate:opened":t[6]||(t[6]=Q=>e.enablePopup=Q)},{default:i(()=>[n(D,{ref:"camera",maxImages:2,onSave:e.saveImageUrls},null,8,["onSave"])]),_:1},8,["opened"])],64)}var xe=N($i,[["render",oo]]);const ao=M({props:{qrid:Number,type:String},emits:["send"],components:{Camera:Ue,ImageUpload:Ie},data(){return{isLoading:!1,enablePopup:!1,isCameraOpen:!1,imageUrls:[],data:{title:"",imageUrls:[],sellerName:null,type:"",qrid:0,userComment:0,status:"CREATED",metadata:{enableSender:!1}}}},methods:{async showCamera(){console.log("click showCamera()"),this.enablePopup=!0,this.$refs.camera.openCamera()},saveImageUrls(e){this.enablePopup=!1,console.log("saveImages",e),e&&(this.data.imageUrls=e)},uploaded(e){console.log("uploaded",e),this.data.imageUrls.push(e)},close(){this.enablePopup=!1,this.$emit("send","CANCEL")},async postActivity(){this.data.qrid=this.qrid,this.data.type=this.type||"ACTIVITY.QR_REQUEST";let e=await this.$api.createQRFeedback(this.data);console.log("rs",e),U.dialog.alert("G\u1EEDi th\xE0nh c\xF4ng, c\u1EA3m \u01A1n b\u1EA1n!"),this.$emit("send","SUCCESS")}}}),so=c("Ph\u1EA3n \xE1nh hi\u1EC7n tr\u01B0\u1EDDng"),lo=c(" Ch\u1EE5p h\xECnh ho\u1EB7c ghi ph\u1EA3n \xE1nh "),ro=["src"],co=c("Ng\u01B0\u1EDDi g\u1EEDi (tu\u1EF3 ch\u1ECDn) "),uo=o("i",{class:"f7-icons"},"xmark_circle",-1),po=c("Hu\u1EF7"),ho=o("i",{class:"f7-icons"},"checkmark_circle",-1),_o=c("G\u1EEDi");function mo(e,t,l,u,a,d){const h=s("f7-nav-title"),g=s("f7-navbar"),v=s("f7-card-header"),_=s("f7-col"),E=s("f7-row"),m=s("image-upload"),y=s("f7-block"),C=s("f7-list-input"),A=s("f7-list");s("f7-icon");const k=s("f7-button"),$=s("f7-card-content"),x=s("f7-card"),T=s("f7-toggle"),D=s("camera"),B=s("f7-popup"),Q=s("f7-page");return r(),f(Q,null,{default:i(()=>[n(g,{sliding:!1},{default:i(()=>[n(h,{sliding:""},{default:i(()=>[so]),_:1})]),_:1}),n(x,null,{default:i(()=>[n(v,{"bg-color":"blue"},{default:i(()=>[lo]),_:1}),n($,null,{default:i(()=>[n(y,null,{default:i(()=>[n(E,null,{default:i(()=>[(r(!0),b(P,null,F(e.data.imageUrls,S=>(r(),f(_,{width:"50",key:S},{default:i(()=>[o("img",{style:{"max-width":"50%",height:"auto"},src:S},null,8,ro)]),_:2},1024))),128))]),_:1}),n(m,{ref:"activityImages",countImages:0,maxImages:4,onUploaded:e.uploaded},null,8,["onUploaded"])]),_:1}),n(A,{style:{"margin-top":"15px"}},{default:i(()=>[n(C,{type:"text",placeholder:"nh\u1EADp ng\u1EAFn g\u1ECDn",outline:"",label:"V\xE0i t\u1EEB ng\u1EAFn g\u1ECDn","floating-label":"","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng",required:"","clear-button":"",value:e.data.title,"onUpdate:value":t[0]||(t[0]=S=>e.data.title=S)},null,8,["value"])]),_:1}),w("",!0)]),_:1})]),_:1}),n(x,null,{default:i(()=>[n(v,{"bg-color":"green"},{default:i(()=>[co,n(T,{checked:e.data.metadata.enableSender,"onUpdate:checked":t[2]||(t[2]=S=>e.data.metadata.enableSender=S)},null,8,["checked"])]),_:1}),n($,null,{default:i(()=>[L(n(A,{"no-hairlines-md":""},{default:i(()=>[n(C,{type:"text",outline:"",label:"T\xEAn g\u1ECDi","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"20","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:e.data.customerName,"onUpdate:value":t[3]||(t[3]=S=>e.data.customerName=S)},null,8,["value"]),n(C,{outline:"",type:"textarea",label:"\u0110\u1ECBa ch\u1EC9 (tu\u1EF3 ch\u1ECDn)","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:e.data.customerAddress,"onUpdate:value":t[4]||(t[4]=S=>e.data.customerAddress=S)},null,8,["value"])]),_:1},512),[[V,e.data.metadata.enableSender]])]),_:1})]),_:1}),n(y,null,{default:i(()=>[n(E,null,{default:i(()=>[n(_,{width:"30"},{default:i(()=>[n(k,{raised:"",round:"",large:"",color:"gray",onClick:t[5]||(t[5]=S=>e.close())},{default:i(()=>[uo,po]),_:1})]),_:1}),n(_,{width:"60"},{default:i(()=>[n(k,{raised:"",round:"",fill:"",large:"",onClick:t[6]||(t[6]=S=>e.postActivity())},{default:i(()=>[ho,_o]),_:1})]),_:1})]),_:1})]),_:1}),n(B,{opened:e.enablePopup,"onUpdate:opened":t[7]||(t[7]=S=>e.enablePopup=S)},{default:i(()=>[n(D,{ref:"camera",maxImages:2,onSave:e.saveImageUrls},null,8,["onSave"])]),_:1},8,["opened"])]),_:1})}var fo=N(ao,[["render",mo]]);const go=M({props:{id:Number,type:String},data(){return{isLoading:!1,filter:{skip:0,limit:10},data:{metadata:{enableSender:!0}},ACT_POPUP:{nar_bar_title:"Chi ti\u1EBFt Ph\u1EA3n \xE1nh",content:"N\u1ED9i dung",sender:"Ng\u01B0\u1EDDi g\u1EEDi",receiver:"B\xEAn th\u1EF1c hi\u1EC7n",action:"X\xE1c nh\u1EADn",action_footer:"C\u1EA3m \u01A1n ph\u1EA3n \xE1nh c\u1EE7a Qu\xFD c\u01B0 d\xE2n!"}}},watch:{id:"loadData"},methods:{async loadData(){this.id>0&&(this.isLoading=!0,this.data=await this.$api.getCardActivity(this.id),this.isLoading=!1)}}}),vo=["src"],bo=o("div",null,"\u0110\xE3 \u1EA9n th\xF4ng tin",-1),Co=c("Nh\u1EADn x\xE9t t\u1EEB kh\xE1ch h\xE0ng"),yo=c("ch\u01B0a c\xF3"),Eo=c("Nh\u1EADn x\xE9t t\u1EEB kh\xE1ch h\xE0ng"),ko=c("T\u1EEB ch\u1ED1i"),wo=o("i",{class:"f7-icons"},"checkmark_circle",-1),Ao=c("X\xE1c nh\u1EADn"),Do=o("i",{class:"f7-icons"},"xmark_circle",-1),To=c(" \u0110\xF3ng");function Io(e,t,l,u,a,d){const h=s("f7-preloader"),g=s("f7-navbar"),v=s("f7-card-header"),_=s("f7-list-item"),E=s("f7-col"),m=s("f7-row"),y=s("f7-block"),C=s("f7-list"),A=s("f7-card-content"),k=s("f7-card"),$=s("f7-icon"),x=s("f7-list-input"),T=s("f7-button"),D=s("f7-block-footer"),B=s("f7-page");return r(),f(B,null,{default:i(()=>[n(g,{title:e.ACT_POPUP.nar_bar_title},{default:i(()=>[L(n(h,null,null,512),[[V,e.isLoading]])]),_:1},8,["title"]),n(k,null,{default:i(()=>[n(v,{"bg-color":"green"},{default:i(()=>[c(p(e.ACT_POPUP.content),1)]),_:1}),n(A,null,{default:i(()=>[n(C,{"no-hairlines-md":""},{default:i(()=>[n(_,null,{default:i(()=>[c(p(e.data.title),1)]),_:1}),n(_,null,{default:i(()=>[c(p(e.data.description),1)]),_:1}),e.data.type=="ACTIVITY.QRTASK"?(r(),f(_,{key:0},{default:i(()=>[c("\u0110\xE3 thu: "+p(e.$utils.formatMoney(e.data.money)),1)]),_:1})):w("",!0),e.data.type=="ACTIVITY.QRTASK"?(r(),f(_,{key:1},{default:i(()=>[c("Th\u1EF1c hi\u1EC7n l\xFAc: "+p(e.$utils.formatDateTime(e.data.created)),1)]),_:1})):(r(),f(_,{key:2},{default:i(()=>[c("G\u1EEDi l\xFAc: "+p(e.$utils.formatDateTime(e.data.created)),1)]),_:1})),n(y,null,{default:i(()=>[n(m,{"no-gap":""},{default:i(()=>[(r(!0),b(P,null,F(e.data.imageUrls,Q=>(r(),f(E,{width:"50",key:Q},{default:i(()=>[o("img",{width:"100",src:Q},null,8,vo)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n(k,null,{default:i(()=>[n(v,{"bg-color":"green"},{default:i(()=>[c(p(e.ACT_POPUP.sender),1)]),_:1}),n(A,null,{default:i(()=>[bo,e.data.metadata.enableSender!=!1?(r(),f(C,{key:0,"no-hairlines-md":""},{default:i(()=>[n(_,null,{default:i(()=>[c(p(e.data.customerName),1)]),_:1}),n(_,null,{default:i(()=>[c(p(e.data.customerPhoneNumber),1)]),_:1}),n(_,null,{default:i(()=>[c(p(e.data.customerAddress),1)]),_:1}),e.data.type=="ACTIVITY.QRTASK"&&e.data.status=="CONFIRMED"?(r(),f(_,{key:0},{default:i(()=>[c("X\xE1c nh\u1EADn l\xFAc "+p(e.$utils.formatDateTime(e.data.modified)),1)]),_:1})):w("",!0),e.data.type=="ACTIVITY.QRTASK"&&e.data.status=="REJECTED"?(r(),f(_,{key:1},{default:i(()=>[c("T\u1EEB ch\u1ED1i l\xFAc "+p(e.$utils.formatDateTime(e.data.modified)),1)]),_:1})):w("",!0)]),_:1})):w("",!0)]),_:1})]),_:1}),e.data.type=="ACTIVITY.QRTASK"&&(e.data.status=="CONFIRMED"||e.data.status=="REJECTED")?(r(),f(k,{key:0},{default:i(()=>[n(v,{"bg-color":"green"},{default:i(()=>[Co]),_:1}),n(A,null,{default:i(()=>[e.data.userComment?(r(),f(C,{key:0},{default:i(()=>[n(_,null,{default:i(()=>[c(p(e.data.userComment),1)]),_:1})]),_:1})):(r(),f(C,{key:1},{default:i(()=>[n(_,null,{default:i(()=>[yo]),_:1})]),_:1}))]),_:1})]),_:1})):w("",!0),e.data.type=="ACTIVITY.QR_REQUEST"||e.data.type=="ACTIVITY.QRTASK"?(r(),f(k,{key:1},{default:i(()=>[n(v,{"bg-color":"blue"},{default:i(()=>[c(p(e.ACT_POPUP.receiver)+" ",1),n($,{f7:e.supplier.status=="ACTIVE"?"star_circle":"star_slash"},null,8,["f7"])]),_:1}),n(A,null,{default:i(()=>[n(C,null,{default:i(()=>[n(_,null,{default:i(()=>[c(p(e.supplier.name),1)]),_:1}),n(_,null,{default:i(()=>[c(p(e.supplier.address),1)]),_:1})]),_:1})]),_:1})]),_:1})):w("",!0),e.data.type=="ACTIVITY.QRTASK"&&e.data.status=="CREATED"?(r(),f(k,{key:2},{default:i(()=>[n(v,{"bg-color":"green"},{default:i(()=>[Eo]),_:1}),n(A,null,{default:i(()=>[n(C,null,{default:i(()=>[n(x,{type:"textarea",outline:"",label:"Nh\u1EADn x\xE9t","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","error-message":"b\u1EA1n \u0111\xE3 nh\u1EADp qu\xE1 d\xE0i!","clear-button":"",value:e.data.userComment,"onUpdate:value":t[0]||(t[0]=Q=>e.data.userComment=Q)},null,8,["value"])]),_:1})]),_:1})]),_:1})):w("",!0),n(y,null,{default:i(()=>[e.data.type=="ACTIVITY.QRTASK"&&e.data.status=="CREATED"?(r(),f(m,{key:0},{default:i(()=>[n(E,{width:"40"},{default:i(()=>[n(T,{raised:"",round:"",large:"",color:"gray",onClick:t[1]||(t[1]=Q=>e.rejectQRTask())},{default:i(()=>[ko]),_:1})]),_:1}),n(E,{width:"60"},{default:i(()=>[n(T,{fill:"",large:"",onClick:t[2]||(t[2]=Q=>e.confirmQRTask())},{default:i(()=>[wo,Ao]),_:1})]),_:1})]),_:1})):(r(),f(m,{key:1},{default:i(()=>[n(E,{width:"100"},{default:i(()=>[n(T,{fill:"",round:"",large:"","popup-close":""},{default:i(()=>[Do,To]),_:1})]),_:1})]),_:1})),n(D,null,{default:i(()=>[c(p(e.ACT_POPUP.action_footer),1)]),_:1})]),_:1})]),_:1})}var Se=N(go,[["render",Io]]);const $o=M({props:{isView:Boolean,id:Number,privateCode:String},components:{Activity:Se},data(){return{isLoading:!1,filter:{skip:0,limit:10},enablePopup:!1,selectedId:0,data:{}}},watch:{id:"loadData"},methods:{clickViewActivity(e){e.id>0&&(this.selectedId=e.id,this.enablePopup=!0)},async loadData(){this.id>0&&(this.isLoading=!0,this.data=await this.$api.getCardHistory(this.id,this.privateCode,this.filter),this.isLoading=!1)}},async mounted(){this.loadData()}}),Uo=c("Ph\u1EA3n \xE1nh g\u1EA7n nh\u1EA5t (10) "),xo={class:"list media-list medium-inset"},So=["onClick"],Ro={class:"item-media"},Po=["src"],No={class:"item-inner"},qo={class:"item-header"},Bo={class:"item-title-row"},Lo=o("div",{class:"item-after"},null,-1),Qo={class:"item-subtitle"},Fo={class:"item-text"},Oo={class:"item-footer text-color-red",style:{"font-size":"14px","font-weight":"600"}};function Vo(e,t,l,u,a,d){const h=s("f7-preloader"),g=s("f7-card-header"),v=s("f7-card"),_=s("activity"),E=s("f7-popup");return r(),b(P,null,[n(v,null,{default:i(()=>[n(g,{"bg-color":"blue"},{default:i(()=>[Uo,L(n(h,null,null,512),[[V,e.isLoading]])]),_:1}),o("div",xo,[o("ul",null,[(r(!0),b(P,null,F(e.data,m=>(r(),b("li",{key:m.id},[o("a",{onClick:y=>e.clickViewActivity(m),class:"item-link item-content chevron-center"},[o("div",Ro,[o("img",{style:{border:"1px solid #ccc"},src:e.$utils.firstImage(m.imageUrls),width:"80"},null,8,Po)]),o("div",No,[o("div",qo,p(e.$utils.formatDateTime(m.modified)),1),o("div",Bo,[o("div",{class:J(e.$utils.getActivityColor(m)),style:{"font-size":"16px"}},p(e.$utils.getActivityName(m)),3),Lo]),o("div",Qo,p(m.title||"kh\xF4ng c\xF3"),1),o("div",Fo,p(m.description),1),o("div",Oo,p(e.$utils.formatMoney(m.money)),1)])],8,So)]))),128))])])]),_:1}),n(E,{id:"view-activity",opened:e.enablePopup,"onUpdate:opened":t[0]||(t[0]=m=>e.enablePopup=m),"tablet-fullscreen":!0},{default:i(()=>[n(_,{id:e.selectedId},null,8,["id"])]),_:1},8,["opened"])],64)}var pe=N($o,[["render",Vo]]);const Mo=M({props:{isView:Boolean,id:Number,privateCode:String},components:{Activity:Se},data(){return{isLoading:!1,filter:{skip:0,limit:10},enablePopup:!1,selectedId:0,data:{}}},watch:{id:"loadData"},methods:{clickViewActivity(e){e.id>0&&(this.selectedId=e.id,this.enablePopup=!0)},async loadData(){this.id>0&&(this.isLoading=!0,this.data=await this.$api.getRecentActivity(this.id,this.privateCode,this.filter),this.isLoading=!1)}},async mounted(){this.loadData()}}),Ho=c("Ph\u1EA3n \xE1nh m\u1EDBi nh\u1EA5t (10) "),zo={class:"list media-list medium-inset"},Ko=["onClick"],jo={class:"item-media"},Yo=["src"],Go={class:"item-inner"},Wo={class:"item-header"},Zo={class:"item-title-row"},Xo=o("div",{class:"item-after"},null,-1),Jo={class:"item-subtitle"},ea={class:"item-text"},ta={class:"item-footer text-color-red",style:{"font-size":"14px","font-weight":"600"}};function na(e,t,l,u,a,d){const h=s("f7-preloader"),g=s("f7-card-header"),v=s("f7-card"),_=s("activity"),E=s("f7-popup");return r(),b(P,null,[n(v,null,{default:i(()=>[n(g,{"bg-color":"green"},{default:i(()=>[Ho,L(n(h,null,null,512),[[V,e.isLoading]])]),_:1}),o("div",zo,[o("ul",null,[(r(!0),b(P,null,F(e.data,m=>(r(),b("li",{key:m.id},[o("a",{onClick:y=>e.clickViewActivity(m),class:"item-link item-content chevron-center"},[o("div",jo,[o("img",{style:{border:"1px solid #ccc"},src:e.$utils.firstImage(m.imageUrls),width:"80"},null,8,Yo)]),o("div",Go,[o("div",Wo,p(e.$utils.formatDateTime(m.modified)),1),o("div",Zo,[o("div",{class:J(e.$utils.getActivityColor(m)),style:{"font-size":"16px"}},p(e.$utils.getActivityName(m)),3),Xo]),o("div",Jo,p(m.title||"kh\xF4ng c\xF3"),1),o("div",ea,p(m.description),1),o("div",ta,p(e.$utils.formatMoney(m.money)),1)])],8,Ko)]))),128))])])]),_:1}),n(E,{id:"view-activity",opened:e.enablePopup,"onUpdate:opened":t[0]||(t[0]=m=>e.enablePopup=m)},{default:i(()=>[n(_,{id:e.selectedId},null,8,["id"])]),_:1},8,["opened"])],64)}var Re=N(Mo,[["render",na]]);const ia=M({props:{id:Number},data(){return{data:{ownerName:"Ban Qu\u1EA3n l\xFD Emerald Precint",ownerAddress:"string",logoUrl:"",status:"ACTIVE"}}},watch:{id:"loadData"},methods:{async loadData(){this.id>0&&(this.data=await this.$api.getQRID(this.id,"111"))}},async mounted(){await this.loadData()}}),oa=c("Ban qu\u1EA3n l\xFD"),aa={class:"list media-list no-hairlines-between"},sa={class:"item-content"},la=o("div",{class:"item-media"},[o("i",{class:"f7-icons"},"person_fill")],-1),ra={class:"item-inner"},da={class:"item-title"},ca={class:"item-content"},ua=o("div",{class:"item-media"},[o("i",{class:"f7-icons"},"house")],-1),pa={class:"item-inner"},ha={class:"item-subtitle"};function _a(e,t,l,u,a,d){const h=s("f7-card-header"),g=s("f7-card-content"),v=s("f7-card");return r(),f(v,null,{default:i(()=>[n(h,{"bg-color":"green"},{default:i(()=>[oa]),_:1}),n(g,null,{default:i(()=>[o("div",aa,[o("ul",null,[o("li",null,[o("div",sa,[la,o("div",ra,[o("div",da,p(e.data.ownerName),1)])])]),o("li",null,[o("div",ca,[ua,o("div",pa,[o("div",ha,p(e.data.ownerAddress),1)])])])])])]),_:1})]),_:1})}var ma=N(ia,[["render",_a]]);const fa={props:{f7route:Object,f7router:Object},components:{Location:xe,History:pe,RecentHistory:Re,Feedback:fo,Company:ma},computed:{isActive(){return this.data.status=="QRID_STATUS.ACTIVE"}},data(){var e=parseInt(this.f7route.params.id),t=this.f7route.params.privateCode;return{title:"Ph\u1EA3n \xE1nh hi\u1EC7n tr\u01B0\u1EDDng",enablePopup:!1,qrid:e,privateCode:t,setupId:0,data:{id:e,packageId:"10001001029",private:"19717042",status:"QRID_STATUS.ACTIVE",cardType:"CARD_TYPE.PUBLIC_LOCATION",ownerPhoneNumber:""}}},methods:{async loadvcard(){var e=await this.$api.getVcard(this.data.id);window.open("data:text/x-vcard;urlencoded,"+e)},async loadData(){console.log("loadData");var e=parseInt(this.f7route.params.id),t=this.f7route.params.privateCode;if(e>0){this.data=await this.$api.getQRID(e,"111"),console.log("loadData",this.data);let l=this.$utils.qrid_setup(e);this.setupId=l,this.isActive&&(this.qrid=e,this.privateCode=t)}},async locationUpdated(e){console.log("locationUpdate",e),e=="ACTIVE"&&await this.loadData()},async clickFeedback(){this.enablePopup=!0},feedbackClose(e){e=="CANCEL"&&console.log("do nothing"),this.enablePopup=!1},async clickCall(e){console.log("clickCall",e),e&&(window.location="tel:"+e)}},async mounted(){await this.loadData()}},ga=c("qrFeedback v.16");function va(e,t,l,u,a,d){const h=s("f7-nav-title"),g=s("f7-navbar"),v=s("location"),_=s("company"),E=s("history"),m=s("f7-card-header"),y=s("f7-card-content"),C=s("f7-card"),A=s("f7-icon"),k=s("f7-fab"),$=s("feedback"),x=s("f7-popup"),T=s("f7-page");return r(),f(T,null,{default:i(()=>[n(g,{sliding:!1},{default:i(()=>[n(h,{sliding:""},{default:i(()=>[c(p(a.title),1)]),_:1})]),_:1}),n(v,{isView:!1,id:a.data.id,status:a.data.status,onUpdated:d.locationUpdated},null,8,["id","status","onUpdated"]),n(_,{id:a.setupId},null,8,["id"]),d.isActive?(r(),f(E,{key:0,id:a.qrid},null,8,["id"])):w("",!0),n(C,null,{default:i(()=>[n(m,null,{default:i(()=>[ga]),_:1}),n(y,null,{default:i(()=>[o("div",null,p(a.data.id),1),o("div",null,p(a.data.status),1)]),_:1})]),_:1}),d.isActive?(r(),f(k,{key:1,position:"center-bottom",onClick:t[0]||(t[0]=D=>d.clickFeedback()),text:"Ph\u1EA3n \xE1nh",color:"green"},{default:i(()=>[n(A,{f7:"camera"})]),_:1})):w("",!0),a.data.ownerPhoneNumber?(r(),f(k,{key:2,position:"right-bottom",onClick:t[1]||(t[1]=D=>d.clickCall(a.data.ownerPhoneNumber)),text:"",color:"red"},{default:i(()=>[n(A,{f7:"phone_fill"})]),_:1})):w("",!0),n(x,{opened:a.enablePopup,"onUpdate:opened":t[2]||(t[2]=D=>a.enablePopup=D),"tablet-fullscreen":!0},{default:i(()=>[n($,{qrid:a.qrid,type:"ACTIVITY.QRFEEDBACK",onSend:d.feedbackClose},null,8,["qrid","onSend"])]),_:1},8,["opened"])]),_:1})}var ba=N(fa,[["render",va]]);const Ca={props:{f7route:Object,f7router:Object}};function ya(e,t,l,u,a,d){const h=s("f7-navbar"),g=s("f7-block"),v=s("f7-page");return r(),f(v,null,{default:i(()=>[n(h,{title:"V\xF2ng \u0111\u1EDDi thi\u1EBFt b\u1ECB","back-link":"Back"}),n(g,null,{default:i(()=>[o("h2",null,p(l.f7route.params.id),1)]),_:1})]),_:1})}var Ea=N(Ca,[["render",ya]]);const ka={},wa={color:"green"};function Aa(e,t,l,u,a,d){const h=s("f7-navbar"),g=s("f7-block"),v=s("f7-page");return r(),f(v,null,{default:i(()=>[n(h,{title:"Th\xF4ng tin Ch\xEDnh h\xE3ng","back-link":"Back"}),n(g,null,{default:i(()=>[o("h2",wa,p(e.f7route.params.id),1)]),_:1})]),_:1})}var Da=N(ka,[["render",Aa]]);const Ta={computed:{isActive(){return!1}}},Ia=c("V\xF2ng \u0111\u1EDDi t\xE0i s\u1EA3n"),$a=o("span",null,"ch\u01B0a k\xEDch ho\u1EA1t",-1),Ua=c(" Th\xF4ng tin t\xE0i s\u1EA3n "),xa={class:"list media-list no-hairlines-between"},Sa={class:"item-content"},Ra={class:"item-inner"},Pa={class:"item-title"},Na={class:"item-content"},qa={class:"item-inner"},Ba=["innerHTML"],La=["src"],Qa={key:0},Fa={class:"item-content"},Oa={class:"item-inner"},Va={class:"item-title"},Ma={class:"item-checkbox item-content"},Ha={class:"item-inner"},za=o("div",{class:"item-title-row"},[o("div",{class:"item-title"},"S\u1EA3n ph\u1EA9m c\u1EE7a")],-1),Ka={class:"item-subtitle"},ja={class:"item-text"};function Ya(e,t,l,u,a,d){const h=s("f7-link"),g=s("f7-nav-right"),v=s("f7-nav-title"),_=s("f7-navbar"),E=s("f7-card-header"),m=s("f7-card"),y=s("f7-swiper-slide"),C=s("f7-swiper"),A=s("f7-card-content"),k=s("f7-page");return r(),f(k,null,{default:i(()=>[n(_,{sliding:!1},{default:i(()=>[n(g,null,{default:i(()=>[n(h,{"icon-ios":"f7:menu","icon-aurora":"f7:menu","icon-md":"material:menu","panel-open":"left"})]),_:1}),n(v,{sliding:""},{default:i(()=>[Ia]),_:1})]),_:1}),d.isActive()?(r(),f(m,{key:0,"bg-color":"blue"},{default:i(()=>[n(E,null,{default:i(()=>[c("ID: "+p(e.f7route.params.id),1)]),_:1})]),_:1})):(r(),f(m,{key:1,"bg-color":"red"},{default:i(()=>[n(E,null,{default:i(()=>[c("ID: "+p(e.f7route.params.id)+" ",1),$a]),_:1})]),_:1})),n(m,null,{default:i(()=>[n(E,{"bg-color":"green"},{default:i(()=>[Ua]),_:1}),n(A,null,{default:i(()=>[o("div",xa,[o("ul",null,[o("li",null,[o("div",Sa,[o("div",Ra,[o("div",Pa,p(e.data.title),1)])])]),o("li",null,[o("div",Na,[o("div",qa,[o("div",{class:"item-text",innerHTML:e.data.description},null,8,Ba)])])]),o("li",null,[n(C,{speed:500,slidesPerView:2,spaceBetween:10},{default:i(()=>[(r(!0),b(P,null,F(e.data.imageUrls,$=>(r(),f(y,{key:$},{default:i(()=>[o("img",{class:"small",src:$},null,8,La)]),_:2},1024))),128))]),_:1})]),d.isActive?(r(),b("li",Qa,[o("div",Fa,[o("div",Oa,[o("div",Va," Ng\xE0y k\xEDch ho\u1EA1t: "+p(e.formatDate(e.data.activatedDate)),1)])])])):w("",!0),o("li",null,[o("label",Ma,[o("div",Ha,[za,o("div",Ka,p(e.data.sellerName),1),o("div",ja,p(e.data.sellerAddress),1)])])])])])]),_:1})]),_:1})]),_:1})}var Ga=N(Ta,[["render",Ya]]);const Wa=M({name:"QrLogin",emits:["detect","warning"],components:{QrStream:de.exports.QrStream,QrCapture:de.exports.QrCapture},data(){return{qrUrl:"",warning:!1}},methods:{async onDecode(e){console.log("onDecode",e),e.includes("backend.qrcare.net/api/ApplicationUsers/")||e.includes("m.qrcare.vn/u/")?(this.qrUrl=e,this.$emit("detect",e)):this.$emit("warning",e)}}}),Za=e=>(ee("data-v-5749cdf0"),e=e(),te(),e),Xa={class:"reader"},Ja={class:"center stream"},es=Za(()=>o("div",{style:{color:"red"},class:"frame"},null,-1)),ts={key:0,"text-color":"red"};function ns(e,t,l,u,a,d){const h=s("qr-stream");return r(),b("div",Xa,[o("div",null,[o("div",Ja,[n(h,{onDecode:e.onDecode,class:"mb"},{default:i(()=>[es]),_:1},8,["onDecode"])])]),e.warning?(r(),b("h3",ts,"M\xE3 QRCode kh\xF4ng \u0111\xFAng.")):w("",!0)])}var is=N(Wa,[["render",ns],["__scopeId","data-v-5749cdf0"]]);const os=M({props:{f7route:Object,f7router:Object},components:{QrScanOne:is},data(){const e=Ee();return e.desktop?console.log("It is desktop"):console.log("It is mobile"),{qrUrl:"",device:e,username:"",password:""}},methods:{detectURl(e){console.log(e),this.qrUrl=e,this.clickLogin()},showWarning(e){U.dialog.alert("qrcode kh\xF4ng h\u1EE3p l\u1EC7!<br>",e)},async clickLogin(){if(this.qrUrl){let e=this.qrUrl;this.qrUrl.includes("backend.qrcare.net")&&(e=this.qrUrl.replace("backend.qrcare.net","api.qrcare.net")),await this.loginByUrl(e)}else await this.loginByAccount()},async loginByUrl(e){let t=await this.$axios.get(e);t&&t.data&&(console.log(t.data),Z.dispatch("login",t.data),this.f7router.back())},async loginByAccount(){var e={username:this.username,password:this.password};let l=(await this.$axios.post(O.BASE_URL+"ApplicationUsers/login",e)).data;if(l.id&&l.userId){console.log("loginAction",l);let u=O.BASE_URL+"ApplicationUsers/"+l.userId+"?access_token="+l.id;await this.loginByUrl(u)}}},mounted(){const e=oe("isDemoCard");console.log("isDemoCard",e),e.value&&(this.username="888.10",this.password="QRcare888.10")}}),as=c("Qu\xE9t Th\u1EBB QRLogin \u0111\u1EC3 t\u1EF1 \u0111\u1ED9ng \u0111\u0103ng nh\u1EADp "),ss=c("Ho\u1EB7c cung c\u1EA5p th\xF4ng tin"),ls=c("\u0110\u0103ng nh\u1EADp"),rs=o("p",null,"Li\xEAn h\u1EC7 v\u1EDBi ch\xFAng t\xF4i \u0111\u1EC3 \u0111\u01B0\u1EE3c c\u1EA5p t\xE0i kho\u1EA3n",-1),ds=o("p",null,"Email: sales@qrcare.net ",-1),cs=o("p",null,"Phone: +84 906 826 807",-1);function us(e,t,l,u,a,d){const h=s("qr-scan-one"),g=s("f7-block-footer"),v=s("f7-block"),_=s("f7-block-title"),E=s("f7-list-input"),m=s("f7-list"),y=s("f7-button"),C=s("f7-page");return r(),f(C,{name:"Login Desktop"},{default:i(()=>[e.device.desktop?w("",!0):(r(),f(v,{key:0},{default:i(()=>[n(h,{onDetect:e.detectURl,onWarning:e.showWarning},null,8,["onDetect","onWarning"]),n(g,{style:{"margin-top":"20px"}},{default:i(()=>[as]),_:1})]),_:1})),n(v,null,{default:i(()=>[n(_,null,{default:i(()=>[ss]),_:1}),n(m,{form:""},{default:i(()=>[n(E,{outline:"",type:"text",label:"username","floating-label":"",placeholder:"username",value:e.username,"onUpdate:value":t[0]||(t[0]=A=>e.username=A)},null,8,["value"]),n(E,{type:"password",name:"password",placeholder:"m\u1EADt kh\u1EA9u",value:e.password,"onUpdate:value":t[1]||(t[1]=A=>e.password=A)},null,8,["value"])]),_:1}),n(y,{fill:"",large:"",round:"",onClick:e.clickLogin},{default:i(()=>[ls]),_:1},8,["onClick"]),n(m,null,{default:i(()=>[n(g,null,{default:i(()=>[rs,ds,cs]),_:1})]),_:1})]),_:1})]),_:1})}var ps=N(os,[["render",us]]);const hs={},_s=M({emits:["updated"],props:{isView:Boolean,data:Object},computed:{isActive(){return!1},isEdit(){return!this.isView&&this.item.id>0}},watch:{data(e){e&&e.id&&(console.log("to update",this.data.ownerName),this.item={id:e.id,ownerName:e.ownerName||"",ownerPhoneNumber:e.ownerPhoneNumber||"",ownerAddress:e.ownerAddress||""})}},data(){return{item:{id:0,ownerName:"",ownerPhoneNumber:"",ownerAddress:""}}},methods:{updateData(){const e=this;this.item,this.$api.activeQRMember(this.item.id,this.item).then(t=>{e.$emit("updated","DONE"),U.dialog.alert("C\u1EADp nh\u1EADt Th\xE0nh c\xF4ng")}).catch(t=>{e.$emit("updated","ERROR"),U.dialog.alert("C\u1EADp nh\u1EADt b\u1ECB l\u1ED7i")})}},mounted(){}}),ms=c(" Th\xE0nh vi\xEAn "),fs=c("Edit"),gs={class:"list media-list no-hairlines-between"},vs={class:"item-content"},bs=o("div",{class:"item-media"},[o("i",{class:"f7-icons"},"person_fill")],-1),Cs={class:"item-inner"},ys={class:"item-title"},Es={key:0},ks={class:"item-content"},ws=o("div",{class:"item-media"},[o("i",{class:"f7-icons"},"device_phone_portrait")],-1),As={class:"item-inner"},Ds={class:"item-subtitle"},Ts=c("K\xEDch ho\u1EA1t"),Is=c("Danh x\u01B0ng"),$s=o("i",{class:"f7-icons"},"xmark_circle",-1),Us=c("Cancel"),xs=c("C\u1EADp nh\u1EADt");function Ss(e,t,l,u,a,d){const h=s("f7-button"),g=s("f7-card-header"),v=s("f7-card-content"),_=s("f7-list-input"),E=s("f7-list"),m=s("f7-card"),y=s("f7-navbar"),C=s("f7-block-title"),A=s("f7-block"),k=s("f7-col"),$=s("f7-row"),x=s("f7-page"),T=s("f7-popup");return r(),b(P,null,[n(m,null,{default:i(()=>[n(g,{"bg-color":"green"},{default:i(()=>[ms,!e.isActive&&e.isEdit?(r(),f(h,{key:0,"popup-open":".member-popup"},{default:i(()=>[fs]),_:1})):w("",!0)]),_:1}),e.item.ownerName?(r(),f(v,{key:0},{default:i(()=>[o("div",gs,[o("ul",null,[o("li",null,[o("div",vs,[bs,o("div",Cs,[o("div",ys,p(e.item.ownerName),1)])])]),e.item.ownerPhoneNumber?(r(),b("li",Es,[o("div",ks,[ws,o("div",As,[o("div",Ds,p(e.item.ownerPhoneNumber),1)])])])):w("",!0)])])]),_:1})):(r(),f(v,{key:1},{default:i(()=>[n(E,null,{default:i(()=>[n(_,{type:"text",outline:"",label:"T\xEAn g\u1ECDi","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"20","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:e.item.ownerName,"onUpdate:value":t[0]||(t[0]=D=>e.item.ownerName=D)},null,8,["value"]),n(_,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1 cu\u1ED1i","error-message":"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1!",minlength:"6",maxlength:"11",validate:"",pattern:"[0-9]*","clear-button":"",value:e.item.ownerPhoneNumber,"onUpdate:value":t[1]||(t[1]=D=>e.item.ownerPhoneNumber=D)},null,8,["value"]),n(h,{fill:"",round:"",large:"",onClick:t[2]||(t[2]=D=>e.updateData())},{default:i(()=>[Ts]),_:1})]),_:1})]),_:1}))]),_:1}),n(T,{class:"member-popup"},{default:i(()=>[n(x,null,{default:i(()=>[n(y,{title:"QRMember Th\xE0nh vi\xEAn"}),n(A,null,{default:i(()=>[n(C,null,{default:i(()=>[Is]),_:1}),n(E,{"no-hairlines-md":""},{default:i(()=>[n(_,{type:"text",outline:"",label:"T\xEAn g\u1ECDi","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"20","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:e.item.ownerName,"onUpdate:value":t[3]||(t[3]=D=>e.item.ownerName=D)},null,8,["value"]),n(_,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1 cu\u1ED1i","error-message":"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1!",minlength:"6",maxlength:"11",validate:"",pattern:"[0-9]*","clear-button":"",value:e.item.ownerPhoneNumber,"onUpdate:value":t[4]||(t[4]=D=>e.item.ownerPhoneNumber=D)},null,8,["value"]),n(_,{outline:"",type:"textarea",label:"\u0110\u1ECBa ch\u1EC9","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:e.item.ownerAddress,"onUpdate:value":t[5]||(t[5]=D=>e.item.ownerAddress=D)},null,8,["value"])]),_:1})]),_:1}),n($,null,{default:i(()=>[n(k,{width:"40"},{default:i(()=>[n(h,{round:"",large:"",color:"gray","popup-close":""},{default:i(()=>[$s,Us]),_:1})]),_:1}),n(k,{width:"60"},{default:i(()=>[n(h,{fill:"",round:"",large:"",onClick:t[6]||(t[6]=D=>e.updateData())},{default:i(()=>[xs]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Rs=N(_s,[["render",Ss]]);const Ps={},Ns={class:"card card-expandable"},qs=ke('<div class="card-content"><div class="bg-color-red" style="height:300px;"><div class="card-header text-color-white display-block">Ti\xEAu chu\u1EA9n an to\xE0n th\xF4ng tin <br><small style="opacity:0.7;"> kh\xE1ch h\xE0ng an t\xE2m khi k\xEDch ho\u1EA1t v\xE0 s\u1EED d\u1EE5ng Th\u1EBB</small></div><a href="#" class="link card-close card-opened-fade-in color-white" style="position:absolute;right:15px;top:15px;"><i class="icon f7-icons">xmark_circle_fill</i></a></div><div class="card-content-padding"><p>Thu th\u1EADp \xEDt nh\u1EA5t c\xF3 th\u1EC3</p><p>1 ph\u1EA7n c\u1EE7a s\u1ED1 \u0111i\u1EC7n tho\u1EA1i (6 s\u1ED1 cu\u1ED1i) \u0111\u1EC3 \u0111\u1ED1i chi\u1EBFu qua QRCall ho\u1EB7c OTP khi c\u1EA7n</p><p>1. kh\xE1ch h\xE0ng cung c\u1EA5p s\u1ED1 \u0111i\u1EC7n tho\u1EA1i \u0111\u1EA7y \u0111\u1EE7, tr\xF9ng v\u1EDBi 6 s\u1ED1 \u0111\xE3 \u0111\u0103ng k\xFD</p><p>2. X\xE1c th\u1EF1c b\u1EB1ng c\xE1ch: - QRCall t\u1EDBi s\u1ED1 \u0111i\u1EC7n tho\u1EA1i n\xE0y ho\u1EB7c g\u1EEDi OTP \u0111\u1ED1i chi\u1EBFu 6 s\u1ED1 CMND/ CCCD</p><p>Cung c\u1EA5p s\u1ED1 \u0111i\u1EC7n tho\u1EA1i \u0111\u1EA7y \u0111\u1EE7 khi c\xF3 nhu c\u1EA7u QRCall</p><p>Th\u1EBB l\xE0 c\xE1ch x\xE1c th\u1EF1c tin c\u1EADy</p></div></div>',1),Bs=[qs];function Ls(e,t){return r(),b("div",Ns,Bs)}var Qs=N(Ps,[["render",Ls]]);const Fs=M({emits:["updated"],props:{isView:Boolean,data:Object},computed:{isActive(){return!1},isEdit(){return this.isView}},watch:{data(e){e&&e.id&&(console.log("to update",this.data.ownerName),this.item={id:e.id,ownerName:e.ownerName||"",ownerPhoneNumber:e.ownerPhoneNumber||"",ownerAddress:e.ownerAddress||""})}},data(){return{item:{id:0,ownerName:"",ownerPhoneNumber:"",ownerAddress:""}}},methods:{updateData(){const e=this;this.$api.activeQRLoyalty(this.item.id,this.item).then(t=>{e.$emit("updated","DONE"),U.dialog.alert("C\u1EADp nh\u1EADt Th\xE0nh c\xF4ng"),U.popup.close()}).catch(t=>{e.$emit("updated","ERROR"),U.popup.close()})}}}),Os=c(" Th\xE0nh vi\xEAn th\xE2n thi\u1EBFt "),Vs=c("Edit"),Ms={class:"list media-list no-hairlines-between"},Hs={class:"item-content"},zs=o("div",{class:"item-media"},[o("i",{class:"f7-icons"},"person_fill")],-1),Ks={class:"item-inner"},js={class:"item-title"},Ys={key:0},Gs={class:"item-content"},Ws=o("div",{class:"item-media"},[o("i",{class:"f7-icons"},"device_phone_portrait")],-1),Zs={class:"item-inner"},Xs={class:"item-subtitle"},Js={class:"item-content"},el=o("div",{class:"item-media"},[o("i",{class:"f7-icons"},"house")],-1),tl={class:"item-inner"},nl={class:"item-subtitle"},il=o("p",null,"Ch\u01B0a c\xF3 th\xF4ng tin",-1),ol=c("Danh x\u01B0ng c\u1EE7a kh\xE1ch h\xE0ng"),al=o("i",{class:"f7-icons"},"xmark_circle",-1),sl=c("Cancel"),ll=c("C\u1EADp nh\u1EADt");function rl(e,t,l,u,a,d){const h=s("f7-button"),g=s("f7-card-header"),v=s("f7-card-content"),_=s("f7-card"),E=s("f7-navbar"),m=s("f7-block-title"),y=s("f7-list-input"),C=s("f7-list"),A=s("f7-block"),k=s("f7-col"),$=s("f7-row"),x=s("f7-page"),T=s("f7-popup");return r(),b(P,null,[n(_,null,{default:i(()=>[n(g,{"bg-color":"green"},{default:i(()=>[Os,!e.isActive&&e.isEdit?(r(),f(h,{key:0,"popup-open":".loyalty-popup"},{default:i(()=>[Vs]),_:1})):w("",!0)]),_:1}),e.item.ownerName?(r(),f(v,{key:0},{default:i(()=>[o("div",Ms,[o("ul",null,[o("li",null,[o("div",Hs,[zs,o("div",Ks,[o("div",js,p(e.item.ownerName),1)])])]),e.item.ownerPhoneNumber?(r(),b("li",Ys,[o("div",Gs,[Ws,o("div",Zs,[o("div",Xs,p(e.item.ownerPhoneNumber),1)])])])):w("",!0),o("li",null,[o("div",Js,[el,o("div",tl,[o("div",nl,p(e.item.ownerAddress),1)])])])])])]),_:1})):(r(),f(v,{key:1},{default:i(()=>[il]),_:1}))]),_:1}),n(T,{class:"loyalty-popup"},{default:i(()=>[n(x,null,{default:i(()=>[n(E,{title:"QRLoyalty: Th\xE0nh vi\xEAn th\xE2n thi\u1EBFt"}),n(A,null,{default:i(()=>[n(m,null,{default:i(()=>[ol]),_:1}),n(C,{"no-hairlines-md":""},{default:i(()=>[n(y,{type:"text",outline:"",label:"T\xEAn g\u1ECDi","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"20","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:e.item.ownerName,"onUpdate:value":t[0]||(t[0]=D=>e.item.ownerName=D)},null,8,["value"]),n(y,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp \u0111\u1EC3 ti\u1EC7n li\xEAn h\u1EC7","error-message":"h\xE3y nh\u1EADp \u0111\u1EE7 10 s\u1ED1!",minlength:"10",maxlength:"11",validate:"",pattern:"[0-9]*","clear-button":"",value:e.item.ownerPhoneNumber,"onUpdate:value":t[1]||(t[1]=D=>e.item.ownerPhoneNumber=D)},null,8,["value"]),n(y,{outline:"",type:"textarea",label:"\u0110\u1ECBa ch\u1EC9","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:e.item.ownerAddress,"onUpdate:value":t[2]||(t[2]=D=>e.item.ownerAddress=D)},null,8,["value"])]),_:1})]),_:1}),n($,null,{default:i(()=>[n(k,{width:"40"},{default:i(()=>[n(h,{round:"",large:"",color:"gray","popup-close":""},{default:i(()=>[al,sl]),_:1})]),_:1}),n(k,{width:"60"},{default:i(()=>[n(h,{fill:"",round:"",large:"",onClick:t[3]||(t[3]=D=>e.updateData())},{default:i(()=>[ll]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}var dl=N(Fs,[["render",rl]]);M({name:"CUSTOMER_MEMBER",components:{supporter:$e,Member:Rs,MemberPrivacy:Qs,loyalty:dl},props:{f7route:Object,f7router:Object},data(){return{rs:{}}},computed:{isActive(){return!1}},methods:{updatedMember(e){console.log("updatedMember()",e)},updatedLoyalty(e){console.log("updatedLoyalty()",e)},async getDeviceData(){var e=this.f7route.params.id,t=this.f7route.params.privateCode;let l=await this.$api.getLifecycle(e,t);console.log("rs",l),this.rs=l}},async created(){await Promise.all([this.getDeviceData()])}});const cl=M({emits:["updated"],props:{isView:Boolean,data:Object},computed:{isActive(){return!1},isEdit(){return!this.isView&&this.item.id>0}},watch:{data(e){e&&e.id&&(console.log("to update",this.data.ownerName),this.item={id:e.id,ownerId:e.ownerId,ownerName:e.ownerName||"",ownerPhoneNumber:e.ownerPhoneNumber||"",ownerAddress:e.ownerAddress||""})}},data(){return{selectedUserId:0,item:{},users:[{fullName:"H\u1ECD t\xEAn c\u1EE7a: S888.2",roleCode:"SALE",phoneNumber:null,username:"S888.2",id:172},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.3",roleCode:"WORKER",phoneNumber:null,username:"888.3",id:173},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.4",roleCode:"WORKER",phoneNumber:null,username:"888.4",id:174},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.5",roleCode:"WORKER",phoneNumber:null,username:"888.5",id:175},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.6",roleCode:"WORKER",phoneNumber:null,username:"888.6",id:176},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.7",roleCode:"WORKER",phoneNumber:null,username:"888.7",id:177},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.8",roleCode:"WORKER",phoneNumber:null,username:"888.8",id:178},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.9",roleCode:"WORKER",phoneNumber:null,username:"888.9",id:179},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.10",roleCode:"WORKER",phoneNumber:null,username:"888.10",id:180}]}},methods:{updateData(){const e=this;this.item,this.$api.activeQRMember(this.item.id,this.item).then(t=>{e.$emit("updated","DONE"),U.dialog.alert("C\u1EADp nh\u1EADt Th\xE0nh c\xF4ng")}).catch(t=>{e.$emit("updated","ERROR"),U.dialog.alert("C\u1EADp nh\u1EADt b\u1ECB l\u1ED7i")})}},mounted(){}}),ul=c("Edit"),pl={class:"list media-list no-hairlines-between"},hl={class:"item-content"},_l=o("div",{class:"item-media"},[o("i",{class:"f7-icons"},"person_fill")],-1),ml={class:"item-inner"},fl={class:"item-title"},gl={class:"item-content"},vl=o("div",{class:"item-media"},[o("i",{class:"f7-icons"},"device_phone_portrait")],-1),bl={class:"item-inner"},Cl={class:"item-subtitle"},yl={class:"item-content"},El=o("div",{class:"item-media"},[o("i",{class:"f7-icons"},"house")],-1),kl={class:"item-inner"},wl={class:"item-subtitle"},Al={class:"list"},Dl=o("option",{disabled:"",value:""},"Please select one",-1),Tl=["selected","value"],Il=c("K\xEDch ho\u1EA1t"),$l=c("Danh x\u01B0ng"),Ul=o("i",{class:"f7-icons"},"xmark_circle",-1),xl=c("Cancel"),Sl=c("C\u1EADp nh\u1EADt");function Rl(e,t,l,u,a,d){const h=s("f7-button"),g=s("f7-card-header"),v=s("f7-card-content"),_=s("f7-list-input"),E=s("f7-list"),m=s("f7-card"),y=s("f7-navbar"),C=s("f7-block-title"),A=s("f7-block"),k=s("f7-col"),$=s("f7-row"),x=s("f7-page"),T=s("f7-popup");return r(),b(P,null,[n(m,null,{default:i(()=>[n(g,{"bg-color":"green"},{default:i(()=>[c(" Th\xE0nh vi\xEAn "+p(e.data.ownerId)+" ",1),n(h,{"popup-open":".member-popup"},{default:i(()=>[ul]),_:1})]),_:1}),e.data.ownerId>0?(r(),f(v,{key:0},{default:i(()=>[o("div",pl,[o("ul",null,[o("li",null,[o("div",hl,[_l,o("div",ml,[o("div",fl,p(e.item.ownerName),1)])])]),o("li",null,[o("div",gl,[vl,o("div",bl,[o("div",Cl,p(e.item.ownerPhoneNumber||"Ch\u01B0a c\u1EADp nh\u1EADt"),1)])])]),o("li",null,[o("div",yl,[El,o("div",kl,[o("div",wl,p(e.item.ownerAddress||"Ch\u01B0a c\u1EADp nh\u1EADt"),1)])])])])])]),_:1})):(r(),f(v,{key:1},{default:i(()=>[o("div",Al,[o("ul",null,[o("li",null,[L(o("select",{class:"item-content","onUpdate:modelValue":t[0]||(t[0]=D=>e.selectedUserId=D)},[Dl,(r(!0),b(P,null,F(e.users,D=>(r(),b("option",{key:D.id,selected:D.id==e.selectedUserId,value:D.id},p(D.fullName),9,Tl))),128))],512),[[we,e.selectedUserId]])])])]),e.selectedUserId>0?(r(),f(E,{key:0},{default:i(()=>[n(_,{type:"text",outline:"",label:"T\xEAn g\u1ECDi","floating-label":"",placeholder:"danh x\u01B0ng ",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"20","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:e.item.ownerName,"onUpdate:value":t[1]||(t[1]=D=>e.item.ownerName=D)},null,8,["value"]),n(_,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1 cu\u1ED1i","error-message":"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1!",minlength:"6",maxlength:"11",validate:"",pattern:"[0-9]*","clear-button":"",value:e.item.ownerPhoneNumber,"onUpdate:value":t[2]||(t[2]=D=>e.item.ownerPhoneNumber=D)},null,8,["value"]),n(h,{fill:"",round:"",large:"",onClick:t[3]||(t[3]=D=>e.updateData())},{default:i(()=>[Il]),_:1})]),_:1})):w("",!0)]),_:1}))]),_:1}),n(T,{class:"member-popup"},{default:i(()=>[n(x,null,{default:i(()=>[n(y,{title:"QRMember Th\xE0nh vi\xEAn"}),n(A,null,{default:i(()=>[n(C,null,{default:i(()=>[$l]),_:1}),n(E,{"no-hairlines-md":""},{default:i(()=>[n(_,{type:"text",outline:"",label:"T\xEAn g\u1ECDi","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"20","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:e.item.ownerName,"onUpdate:value":t[4]||(t[4]=D=>e.item.ownerName=D)},null,8,["value"]),n(_,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1 cu\u1ED1i","error-message":"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1!",minlength:"6",maxlength:"11",validate:"",pattern:"[0-9]*","clear-button":"",value:e.item.ownerPhoneNumber,"onUpdate:value":t[5]||(t[5]=D=>e.item.ownerPhoneNumber=D)},null,8,["value"]),n(_,{outline:"",type:"textarea",label:"\u0110\u1ECBa ch\u1EC9","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:e.item.ownerAddress,"onUpdate:value":t[6]||(t[6]=D=>e.item.ownerAddress=D)},null,8,["value"])]),_:1})]),_:1}),n($,null,{default:i(()=>[n(k,{width:"40"},{default:i(()=>[n(h,{round:"",large:"",color:"gray","popup-close":""},{default:i(()=>[Ul,xl]),_:1})]),_:1}),n(k,{width:"60"},{default:i(()=>[n(h,{fill:"",round:"",large:"",onClick:t[7]||(t[7]=D=>e.updateData())},{default:i(()=>[Sl]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Pe=N(cl,[["render",Rl]]);const Pl={emits:["selected"],setup(){},data(){return{orgs:[],selectedUser:0,users:[{fullName:"H\u1ECD t\xEAn c\u1EE7a: S888.2",roleCode:"SALE",phoneNumber:null,username:"S888.2",id:172},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.3",roleCode:"WORKER",phoneNumber:null,username:"888.3",id:173},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.4",roleCode:"WORKER",phoneNumber:null,username:"888.4",id:174},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.5",roleCode:"WORKER",phoneNumber:null,username:"888.5",id:175},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.6",roleCode:"WORKER",phoneNumber:null,username:"888.6",id:176},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.7",roleCode:"WORKER",phoneNumber:null,username:"888.7",id:177},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.8",roleCode:"WORKER",phoneNumber:null,username:"888.8",id:178},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.9",roleCode:"WORKER",phoneNumber:null,username:"888.9",id:179},{fullName:"H\u1ECD t\xEAn c\u1EE7a: 888.10",roleCode:"WORKER",phoneNumber:null,username:"888.10",id:180}]}},computed:{},methods:{getUser(e){this.users.forEach(t=>{if(console.log(t.id,e),t.id===e)return console.log(t),t})}},watch:{selectedUser(e){if(e){console.log("selected",e);let t=this.getUser(e);this.$emit("selected",t)}}}},Nl={class:"list"},ql=o("li",null,null,-1),Bl={class:"item-link smart-select smart-select-init","data-open-in":"popup","data-searchbar":"true","data-searchbar-placeholder":"Search users"},Ll=["value"],Ql=o("div",{class:"item-content"},[o("div",{class:"item-inner"},[o("div",{class:"item-title"},"Users")])],-1);function Fl(e,t,l,u,a,d){return r(),b("div",Nl,[o("ul",null,[ql,o("li",null,[o("a",Bl,[L(o("select",{name:"car","onUpdate:modelValue":t[0]||(t[0]=h=>a.selectedUser=h)},[(r(!0),b(P,null,F(a.users,h=>(r(),b("option",{key:h.id,value:h.id},p(h.fullName),9,Ll))),128))],512),[[we,a.selectedUser]]),Ql])])])])}var Ne=N(Pl,[["render",Fl]]);const Ol={name:"QRCUSTOMER",components:{Sale:Pe,User:Ne},props:{f7route:Object,f7router:Object},setup(){},data(){let e=[{qrUrl:"/m/100010010960002/i/529/p/3031"},{qrUrl:"/m/100010010960002/i/530/p/8117"},{qrUrl:"/m/100010010960002/i/531/p/9741"}],t={id:100010010970001,packageId:"10001001097",private:42743589,cardType:"CARD_TYPE.QRSALE",phase:"MANAGER",title:"Th\u1EBB c\u1ED9ng t\xE1c vi\xEAn",description:"",imageUrls:["https://apps.vinaas.com/file/qRa7o3Xw9"],productId:0,activatedDate:"2021-12-03T04:13:39.602Z",endDate:"2021-12-03T04:13:39.602Z",deviceMetadata:{index:577,pdfUrl:"qrcustomer_1638520256647.pdf",pdfUrls:["qrcustomer_1638520011773.pdf","qrcustomer_1638520256647.pdf"]},ownerName:"GENKI GYM",ownerAddress:"187-189 Tr\u1EA7n Th\u1ECB C\u1EDD, P Th\u1EDBi An, Q.12",ownerPhoneNumber:"0906.836.977",ownerId:180,ownerOrganizationId:888,ownerMetadata:{from:0,to:1e3},sellerName:"Thanh Hoang Sport",sellerAddress:"Quan 12, Tp HCM",supportId:111,status:"ACTIVE",created:"2021-12-03T04:13:39.602Z",createdBy:0,modified:"2021-12-03T04:13:39.602Z",modifiedBy:0,metadata:{discount:{enable:!1,title:"",content:""},introduction:{enable:!1,title:"",content:""},quotation:{enable:!1,title:"",content:""},qrcall:{enable:!0,title:"G\u1ECDi l\u1EA1i cho t\xF4i",name:"Quang",phoneNumber:"02800224088",workTime:"gi\u1EDD h\xE0nh ch\xEDnh"},call:{enable:!0,title:"G\u1ECDi ch\xFAng t\xF4i",phoneNumber:""}}};return{item:t,customer:{qrUrl:"",name:"",status:"CREATED",history:[]},fix:t,qrUrls:e}},computed:{background(){if(this.item.imageUrls)return this.item.imageUrls[0]||""},voucherContent(){return this.item.metadata&&this.item.metadata.VoucherContent||""}},methods:{async clickCall(e){console.log("clickCall",e),e&&(window.location="tel:"+e),this.customer.history.unshift({type:"CALL",date:new Date().toISOString()})},async getDeviceData(){var e=this.f7route.params.id,t=this.f7route.params.privateCode;let l=await this.$api.getQRID(e,t);console.log("rs",l),this.item=l,this.item.metadata.introduction||(this.item.metadata.introduction={enable:!1,title:"",content:""}),this.item.metadata.discount||(this.item.metadata.discount={enable:!1,title:"",content:""}),this.item.metadata.quotation||(this.item.metadata.quotation={enable:!1,title:"",content:""}),this.item.metadata.call||(this.item.metadata.call={enable:!1,title:"",phoneNumber:""}),this.item.metadata.qrcall||(this.item.metadata.qrcall={enable:!1,title:"G\u1ECDi l\u1EA1i cho t\xF4i",name:"Quang",phoneNumber:"",workTime:""})},async getCustomerData(){let e=await this.$api.scanQRCustomer(this.f7route.params.id,this.f7route.params.index,this.f7route.params.privateCode);this.customer=e,console.log("%cqrcustomer.vue line:253 object","color: #007acc;",this.customer.history)},toQRCustomer(e){this.f7router.navigate(e.qrUrl)},selectedUser(e){console.log("selectedUser()",e)},updateItem(e){}},async mounted(){await this.getDeviceData(),await this.getCustomerData()}},Vl={class:"content",style:{"padding-bottom":"70px"}},Ml={class:"card demo-card-header-pic"},Hl={class:"card-content card-content-padding"},zl={class:"card-footer"},Kl={href:"#",class:"link"},jl=c("\u01AFu \u0111\xE3i khi s\u1EED d\u1EE5ng Th\u1EBB"),Yl=["innerHTML"],Gl=["innerHTML"],Wl=["innerHTML"],Zl=["innerHTML"],Xl=c("Th\u1EBB Kh\xE1ch h\xE0ng v1.4"),Jl=o("div",null,"L\u1ECBch s\u1EED t\u01B0\u01A1ng t\xE1c",-1);function er(e,t,l,u,a,d){const h=s("f7-icon"),g=s("f7-fab"),v=s("f7-card-header"),_=s("f7-card-content"),E=s("f7-card"),m=s("f7-page");return r(),f(m,{"no-navbar":!0},{default:i(()=>[a.item.metadata.call.enable?(r(),f(g,{key:0,onClick:t[0]||(t[0]=y=>d.clickCall(a.item.metadata.call.phoneNumber)),class:"style-call",position:"center-bottom",text:a.item.metadata.call.title,color:"red"},{default:i(()=>[n(h,{f7:"phone_fill"})]),_:1},8,["text"])):w("",!0),a.item.metadata.qrcall.enable?(r(),f(g,{key:1,class:"style-call",position:"center-bottom",text:a.item.metadata.qrcall.title,color:"red"},{default:i(()=>[n(h,{f7:"phone_fill"})]),_:1},8,["text"])):w("",!0),o("div",Vl,[o("div",Ml,[o("div",{style:Ae("background-image:url("+d.background+")"),class:"card-header align-items-flex-end"},p(a.item.ownerName),5),o("div",Hl,[o("p",null,"\u0110\u1ECBa ch\u1EC9: "+p(a.item.ownerAddress),1)]),o("div",zl,[o("a",Kl,p(a.item.ownerPhoneNumber),1)])]),d.voucherContent?(r(),f(E,{key:0},{default:i(()=>[n(v,{"bg-color":"green"},{default:i(()=>[jl]),_:1}),n(_,null,{default:i(()=>[o("div",{innerHTML:d.voucherContent},null,8,Yl)]),_:1})]),_:1})):w("",!0),a.item.metadata.introduction.enable?(r(),f(E,{key:1},{default:i(()=>[n(v,{"bg-color":"green",innerHTML:a.item.metadata.introduction.title},null,8,["innerHTML"]),n(_,null,{default:i(()=>[o("div",{innerHTML:a.item.metadata.introduction.content},null,8,Gl)]),_:1})]),_:1})):w("",!0),a.item.metadata.discount.enable?(r(),f(E,{key:2},{default:i(()=>[n(v,{"bg-color":"green",innerHTML:a.item.metadata.discount.title},null,8,["innerHTML"]),n(_,null,{default:i(()=>[o("div",{innerHTML:a.item.metadata.discount.content},null,8,Wl)]),_:1})]),_:1})):w("",!0),a.item.metadata.quotation.enable?(r(),f(E,{key:3},{default:i(()=>[n(v,{"bg-color":"green",innerHTML:a.item.metadata.quotation.title},null,8,["innerHTML"]),n(_,null,{default:i(()=>[o("div",{innerHTML:a.item.metadata.quotation.content},null,8,Zl)]),_:1})]),_:1})):w("",!0),n(E,null,{default:i(()=>[n(v,null,{default:i(()=>[Xl]),_:1}),n(_,null,{default:i(()=>[Jl,o("ul",null,[(r(!0),b(P,null,F(a.customer.history.slice(0,10),y=>(r(),b("li",{key:y},p(e.$utils.formatDateTime(y.date))+" : "+p(y.type=="SCAN"?"Qu\xE9t th\u1EBB":y.type),1))),128))])]),_:1})]),_:1})])]),_:1})}var tr=N(Ol,[["render",er]]);const nr={name:"QRSALE",components:{Sale:Pe,User:Ne},props:{f7route:Object,f7router:Object},setup(){},data(){let e={id:100010010960001,title:"Th\u1EBB Gi\xE1m s\xE1t (L\u1EDBp tr\u01B0\u1EDFng)",description:"D\xE0nh cho l\u1EDBp tr\u01B0\u1EDFng: 1 Th\u1EBB",imageUrls:[],productId:0,ownerName:"A B\u1EA3o",ownerAddress:"11 Dtp, Tan Phu",ownerPhoneNumber:"02822004088",ownerId:180,ownerOrganizationId:888,deviceMetadata:{start:1,index:577,pdfUrl:"qrcustomer_1638520256647.pdf",pdfUrls:["qrcustomer_1638520011773.pdf","qrcustomer_1638520256647.pdf"]},ownerMetadata:{enable:!0,qrid:"100010010960001",from:0,to:577,list:["m/100010010960003/i/1/p/30","m/100010010960003/i/2/p/11"]},supportId:111,status:"ACTIVE",metadata:{discount:{enable:!0,title:"\u01AFu \u0111\xE3i khi s\u1EED d\u1EE5ng th\u1EBB n\xE0y",content:"N\u1ED9i dung \u01B0u \u0111\xE3i"},introduction:{enable:!1,title:"Gi\u1EDBi thi\u1EC7u v\u1EC1 s\u1EA3n ph\u1EA9m, d\u1ECBch v\u1EE5",content:"N\u1ED9i dung"},quotation:{enable:!1,title:"B\u1EA3ng gi\xE1 s\u1EA3n ph\u1EA9m, d\u1ECBch v\u1EE5",content:"N\u1ED9i dung b\u1EA3ng gi\xE1"},qrcall:{enable:!0,title:"",phoneNumber:"02800224088",workTime:""}}};return{item:e,fix:e,customers:[],paidCustomers:[],customValue:""}},watch:{imageUrl(e){this.item.imageUrls[0]=e,console.log(this.item.imageUrls)},customValue(e){this.item.metadata?this.item.metadata.VoucherContent=this.customValue:this.item.metadata={VoucherContent:this.customValue}}},computed:{idFrom(){if(this.item.ownerMetadata.qrid&&this.item.ownerMetadata.from){let e=this.item.ownerMetadata.qrid.slice(8),t=this.item.ownerMetadata.from;return`${e}.${t}`}else return""},idTo(){},discount(){return this.metadata&&this.metadata.discount?this.metadata.discount:{enable:!1}}},methods:{actionText(e){var t=e.status!="PAID"?"Qu\xE9t Th\u1EBB":"\u0110\xE3 mua";return e.name+" "+t},idText(e){return e.substring(9)},async getQRCustomer(){var e=this.f7route.params.id,t=this.f7route.params.privateCode;this.customers=await this.$api.getQRCustomerBySale(e,t),this.paidCustomers=this.customers.filter(l=>l.status=="PAID"),console.log("sorted"),this.customers.sort((l,u)=>new Date(u.modified)-new Date(l.modified))},async getDeviceData(){var e=this.f7route.params.id,t=this.f7route.params.privateCode;let l=await this.$api.getQRID(e,t);this.item=l;const u=l.ownerMetadata;console.log("meta",u),await this.getQRCustomer(),this.item.ownerMetadata&&this.item.ownerMetadata.qrid||(this.item.ownerMetadata={enable:!0,qrid:"100010010970001",from:1,to:100}),this.item.metadata||(this.item.metadata={}),this.item.imageUrls&&(this.imageUrl=this.item.imageUrls[0])},async active(){var e=this.f7route.params.id,t=this.f7route.params.privateCode;this.item.status="QRID_STATUS.ACTIVE",await this.$api.updateQRSaleInfo(e,this.item,t),U.dialog.alert("SUCCESS active()")},async updateData(){var e=this.f7route.params.id,t=this.f7route.params.privateCode;console.log("updateData()",this.item),await this.$api.updateQRSaleInfo(e,this.item,t),U.dialog.alert("SUCCESS updateData()")},toQRCustomer(e){this.f7router.navigate(e.qrUrl)},selectedUser(e){console.log("selectedUser()",e)},updateItem(e){}},async mounted(){let e=this.f7route.params.id.toString().slice(11);var t=parseInt(e);this.$utils.qrid_index(this.f7route.params.id)>=10?(console.log("num_last_4",t,e),await this.getDeviceData()):(U.dialog.alert("ID kh\xF4ng h\u1EE3p l\u1EC7, v\u1EC1 trang ch\u1EE7"),this.f7router.navigate("HomePage"))}},ir=c("Th\u1EBB c\u1ED9ng t\xE1c"),or={class:"content"},ar=c("Th\xF4ng tin b\xEAn c\u1ED9ng t\xE1c"),sr=c("Th\u1EBB \u0111\xE3 \u0111\u0103ng k\xFD (mua h\xE0ng)"),lr=c("Th\u1EBB c\xF3 ho\u1EA1t \u0111\u1ED9ng g\u1EA7n \u0111\xE2y"),rr=c("C\u1EADp nh\u1EADt"),dr=c("Thi\u1EBFt l\u1EADp Leader (T\u1ED5 tr\u01B0\u1EDFng)"),cr=c("Update"),ur=c(" Active");function pr(e,t,l,u,a,d){const h=s("f7-nav-title"),g=s("f7-navbar"),v=s("f7-card-header"),_=s("f7-list-input"),E=s("f7-list"),m=s("f7-card"),y=s("f7-list-item"),C=s("f7-button"),A=s("f7-card-footer"),k=s("f7-col"),$=s("f7-row"),x=s("f7-page");return r(),f(x,null,{default:i(()=>[n(g,{sliding:!1},{default:i(()=>[n(h,{sliding:""},{default:i(()=>[ir]),_:1})]),_:1}),o("div",or,[n(m,null,{default:i(()=>[n(v,null,{default:i(()=>[ar]),_:1}),n(E,{"no-hairlines-md":""},{default:i(()=>[n(_,{type:"text",outline:"",label:"T\xEAn g\u1ECDi","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"20","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:a.item.ownerName,"onUpdate:value":t[0]||(t[0]=T=>a.item.ownerName=T)},null,8,["value"]),n(_,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1 cu\u1ED1i",pattern:"[0-9]*","clear-button":"",value:a.item.ownerPhoneNumber,"onUpdate:value":t[1]||(t[1]=T=>a.item.ownerPhoneNumber=T)},null,8,["value"]),n(_,{outline:"",type:"textarea",label:"T\xE0i kho\u1EA3n ng\xE2n h\xE0ng",placeholder:"T\xEAn ng\xE2n h\xE0ng, chi nh\xE1nh, s\u1ED1 t\xE0i kho\u1EA3n","floating-label":"",maxlength:"300","clear-button":"",value:a.item.description,"onUpdate:value":t[2]||(t[2]=T=>a.item.description=T)},null,8,["value"])]),_:1})]),_:1}),a.item.status=="QRID_STATUS.ACTIVE"?(r(),f(m,{key:0},{default:i(()=>[n(v,{"bg-color":"green"},{default:i(()=>[sr]),_:1}),n(E,{"no-hairlines-md":"","media-list":""},{default:i(()=>[(r(!0),b(P,null,F(a.paidCustomers,T=>(r(),f(y,{key:T.qrUrl,header:e.$utils.formatDateTime(T.modified),title:T.name||"Ch\u01B0a c\u1EADp nh\u1EADt",subtitle:"Id: "+d.idText(T.qrUrl)},null,8,["header","title","subtitle"]))),128))]),_:1})]),_:1})):w("",!0),a.item.status=="QRID_STATUS.ACTIVE"?(r(),f(m,{key:1},{default:i(()=>[n(v,{"bg-color":"blue"},{default:i(()=>[lr]),_:1}),n(E,{"no-hairlines-md":"","media-list":""},{default:i(()=>[(r(!0),b(P,null,F(a.customers,T=>(r(),f(y,{key:T.qrUrl,header:e.$utils.formatDateTime(T.modified),title:"Id: "+d.idText(T.qrUrl),subtitle:d.actionText(T)},null,8,["header","title","subtitle"]))),128))]),_:1}),n(A,null,{default:i(()=>[n(C,{rounded:"",fill:"",onClick:t[3]||(t[3]=T=>d.getQRCustomer())},{default:i(()=>[rr]),_:1})]),_:1})]),_:1})):w("",!0),a.item.status!="QRID_STATUS.ACTIVE"?(r(),f(m,{key:2},{default:i(()=>[n(v,null,{default:i(()=>[dr]),_:1}),a.item.status!="QRID_STATUS.ACTIVE"?(r(),f(E,{key:0,"no-hairlines-md":""},{default:i(()=>[n(_,{outline:"",label:"QRID","floating-label":"",type:"text",placeholder:"",pattern:"[0-9]*","clear-button":"",value:a.item.ownerMetadata.qrid,"onUpdate:value":t[4]||(t[4]=T=>a.item.ownerMetadata.qrid=T)},null,8,["value"]),n(_,{outline:"",label:"B\u1EAFt \u0111\u1EA7u","floating-label":"",type:"text",placeholder:"",pattern:"[0-9]*","clear-button":"",value:a.item.ownerMetadata.from,"onUpdate:value":t[5]||(t[5]=T=>a.item.ownerMetadata.from=T)},null,8,["value"]),n(_,{outline:"",label:"K\u1EBFt th\xFAc","floating-label":"",type:"text",placeholder:"",pattern:"[0-9]*","clear-button":"",value:a.item.ownerMetadata.to,"onUpdate:value":t[6]||(t[6]=T=>a.item.ownerMetadata.to=T)},null,8,["value"])]),_:1})):w("",!0)]),_:1})):(r(),f(m,{key:3},{default:i(()=>[n(v,null,{default:i(()=>[c("Th\u1EBB \u0111\u01B0\u1EE3c c\u1EA5p ("+p(a.item.ownerMetadata.to-a.item.ownerMetadata.from+1)+" th\u1EBB)",1)]),_:1}),n(E,{"no-hairlines-md":""},{default:i(()=>[n(y,null,{default:i(()=>[c("B\u1EAFt \u0111\u1EA7u: "+p(a.item.ownerMetadata.from),1)]),_:1}),n(y,null,{default:i(()=>[c(" K\u1EBFt th\xFAc: "+p(a.item.ownerMetadata.to),1)]),_:1})]),_:1})]),_:1})),n($,null,{default:i(()=>[n(k,{width:"40"},{default:i(()=>[n(C,{fill:"",round:"",large:"",onClick:t[7]||(t[7]=T=>d.updateData())},{default:i(()=>[cr]),_:1})]),_:1}),a.item.status=="QRID_STATUS.GENERATED"?(r(),f(k,{key:0,width:"40"},{default:i(()=>[n(C,{fill:"",round:"",large:"",color:"red",onClick:t[8]||(t[8]=T=>d.active())},{default:i(()=>[ur]),_:1})]),_:1})):w("",!0)]),_:1})])]),_:1})}var hr=N(nr,[["render",pr]]);const _r=M({props:{qrid:Number,privateCode:String,isSetup:{type:Boolean,defaut:!1}},components:{},data(){return{isLoading:!1,filter:{skip:0,limit:10},enablePopup:!1,selectedId:0,data:{},customers:[]}},watch:{id:"loadData"},methods:{idText(e){return e.substring(9)},async getQRCustomer(){this.qrid>0&&(this.customers=await this.$api.getQRCustomers(this.qrid,this.privateCode),console.log("sorted"))},async loadData(){this.qrid>0&&(this.isLoading=!0,await this.getQRCustomer(),this.isLoading=!1)}},async mounted(){this.loadData()}}),mr=c("T\u01B0\u01A1ng t\xE1c m\u1EDBi nh\u1EA5t t\u1EEB kh\xE1ch h\xE0ng "),fr={class:"list media-list medium-inset"},gr=["onClick"],vr={class:"item-inner"},br={class:"item-header"},Cr={class:"item-title-row"},yr={style:{"font-size":"16px"}},Er=o("div",{class:"item-after"},null,-1),kr={class:"item-subtitle"},wr={class:"item-text"},Ar=c("C\u1EADp nh\u1EADt");function Dr(e,t,l,u,a,d){const h=s("f7-preloader"),g=s("f7-card-header"),v=s("f7-button"),_=s("f7-card-footer"),E=s("f7-card"),m=s("activity"),y=s("f7-popup");return r(),b(P,null,[n(E,null,{default:i(()=>[n(g,{"bg-color":"blue"},{default:i(()=>[mr,L(n(h,null,null,512),[[V,e.isLoading]])]),_:1}),o("div",fr,[o("ul",null,[(r(!0),b(P,null,F(e.customers,C=>(r(),b("li",{key:C.id},[o("a",{onClick:A=>e.clickViewActivity(C),class:"item-link item-content chevron-center"},[o("div",vr,[o("div",br,p(e.$utils.formatDateTime(C.modified)),1),o("div",Cr,[o("div",yr,p(e.idText(C.qrUrl)),1),Er]),o("div",kr,p(C.name),1),o("div",wr,p(C.status=="CREATED"?"Qu\xE9t Th\u1EBB":C.status),1)])],8,gr)]))),128))])]),n(_,null,{default:i(()=>[n(v,{rounded:"",fill:"",onClick:t[0]||(t[0]=C=>e.getQRCustomer())},{default:i(()=>[Ar]),_:1})]),_:1})]),_:1}),n(y,{id:"view-activity",opened:e.enablePopup,"onUpdate:opened":t[1]||(t[1]=C=>e.enablePopup=C)},{default:i(()=>[n(m,{id:e.selectedId},null,8,["id"])]),_:1},8,["opened"])],64)}var qe=N(_r,[["render",Dr]]);const Tr={name:"QRSALE",components:{ListPeople:qe},props:{f7route:Object,f7router:Object},setup(){},data(){let e=[{qrUrl:"/m/100010010960002/i/529/p/3031"},{qrUrl:"/m/100010010960002/i/530/p/8117"},{qrUrl:"/m/100010010960002/i/531/p/9741"}],t={id:100010010960001,title:"Th\u1EBB Gi\xE1m s\xE1t (L\u1EDBp tr\u01B0\u1EDFng)",description:"D\xE0nh cho l\u1EDBp tr\u01B0\u1EDFng: 1 Th\u1EBB",imageUrls:[],productId:0,ownerName:"QRCare Vi\u1EC7t Nam",ownerAddress:"11 Dtp, Tan Phu",ownerPhoneNumber:"02822004088",ownerId:180,ownerOrganizationId:888,deviceMetadata:{start:1,index:577,pdfUrl:"qrcustomer_1638520256647.pdf",pdfUrls:["qrcustomer_1638520011773.pdf","qrcustomer_1638520256647.pdf"]},ownerMetadata:{enable:!0,qrid:"100010010960001",from:0,to:577,list:["m/100010010960003/i/1/p/30","m/100010010960003/i/2/p/11"]},supportId:111,status:"ACTIVE",metadata:{discount:{enable:!0,title:"\u01AFu \u0111\xE3i khi s\u1EED d\u1EE5ng th\u1EBB n\xE0y",content:"N\u1ED9i dung \u01B0u \u0111\xE3i"},introduction:{enable:!1,title:"Gi\u1EDBi thi\u1EC7u v\u1EC1 s\u1EA3n ph\u1EA9m, d\u1ECBch v\u1EE5",content:"N\u1ED9i dung"},quotation:{enable:!1,title:"B\u1EA3ng gi\xE1 s\u1EA3n ph\u1EA9m, d\u1ECBch v\u1EE5",content:"N\u1ED9i dung b\u1EA3ng gi\xE1"},qrcall:{enable:!0,title:"G\u1ECDi l\u1EA1i cho t\xF4i",name:"Quang",phoneNumber:"02800224088",workTime:"gi\u1EDD h\xE0nh ch\xEDnh"},call:{enable:!0,title:"G\u1ECDi ch\xFAng t\xF4i",phoneNumber:"02800224088"}}};return{qrid:this.f7route.params.id,privateCode:this.f7route.params.privateCode,item:t,fix:t,qrUrls:e,imageUrl:"https://apps.vinaas.com/file/OmEkiJOFm",customValue:""}},watch:{imageUrl(e){this.item.imageUrls[0]=e,console.log(this.item.imageUrls)},customValue(e){this.item.metadata?this.item.metadata.VoucherContent=this.customValue:this.item.metadata={VoucherContent:this.customValue}}},computed:{discount(){return this.metadata&&this.metadata.discount?this.metadata.discount:{enable:!1}}},methods:{async getDeviceData(){var e=this.f7route.params.id,t=this.f7route.params.privateCode;let l=await this.$api.getQRID(e,t);l&&(console.log("rs",l),this.item=l,this.item.metadata||(this.item.metadata={}),this.item.metadata.introduction||(this.item.metadata.introduction={enable:!1,title:"",content:""}),this.item.metadata.discount||(this.item.metadata.discount={enable:!1,title:"",content:""}),this.item.metadata.quotation||(this.item.metadata.quotation={enable:!1,title:"",content:""}),this.item.metadata.call||(this.item.metadata.call={enable:!1,phoneNumber:"02800224088"}),this.item.imageUrls&&(this.imageUrl=this.item.imageUrls[0]))},async updateData(){var e=this.f7route.params.id,t=this.f7route.params.privateCode;console.log("updateData()",this.item);let l=await this.$api.updateQRSaleInfo(e,this.item,t);console.log("rs",l),U.dialog.alert("SUCCESS updateData()")},toQRCustomer(e){this.f7router.navigate(e.qrUrl)},selectedUser(e){console.log("selectedUser()",e)},updateItem(e){}},async mounted(){await this.getDeviceData()}},Ir=c("Th\u1EBB Thi\u1EBFt l\u1EADp"),$r={class:"content"},Ur=c("Th\xF4ng tin c\xF4ng ty (c\xE1 nh\xE2n)"),xr={key:0,class:"item-content"},Sr={class:"item-media"},Rr=["src"],Pr=o("div",{class:"item-inner"},[o("div",{class:"item-title-row"})],-1),Nr=c("Hi\u1EC3n th\u1ECB Ph\u1EA7n gi\u1EDBi thi\u1EC7u"),qr=c("Content show to customer"),Br=c("Hi\u1EC3n th\u1ECB M\u1EE5c Khuy\u1EBFn m\xE3i "),Lr=c("Content show to customer"),Qr=c("Hi\u1EC3n th\u1ECB B\u1EA3ng gi\xE1 "),Fr=c("Content show to customer"),Or=c('Hi\u1EC7n n\xFAt "Hotline"'),Vr=c("C\u1EADp nh\u1EADt"),Mr=c("Th\u1EBB thi\u1EBFt l\u1EADp v1.5");function Hr(e,t,l,u,a,d){const h=s("f7-nav-title"),g=s("f7-navbar"),v=s("list-people"),_=s("f7-card-header"),E=s("f7-list-input"),m=s("f7-list"),y=s("f7-card"),C=s("f7-toggle"),A=s("f7-block-header"),k=s("f7-text-editor"),$=s("f7-card-content"),x=s("f7-button"),T=s("f7-col"),D=s("f7-row"),B=s("f7-block"),Q=s("f7-page");return r(),f(Q,null,{default:i(()=>[n(g,{sliding:!1},{default:i(()=>[n(h,{sliding:""},{default:i(()=>[Ir]),_:1})]),_:1}),o("div",$r,[n(v,{qrid:a.qrid,privateCode:a.privateCode},null,8,["qrid","privateCode"]),n(y,null,{default:i(()=>[n(_,{"bg-color":"blue"},{default:i(()=>[Ur]),_:1}),n(m,{"no-hairlines-md":""},{default:i(()=>[n(E,{type:"text",outline:"",label:"T\xEAn g\u1ECDi","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"100","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:a.item.ownerName,"onUpdate:value":t[0]||(t[0]=S=>a.item.ownerName=S)},null,8,["value"]),n(E,{outline:"",label:"H\xECnh \u0111\u1EA1i di\u1EC7n ","floating-label":"",type:"text",placeholder:"link h\xECnh","clear-button":"",value:a.imageUrl,"onUpdate:value":t[1]||(t[1]=S=>a.imageUrl=S)},null,8,["value"]),a.imageUrl?(r(),b("li",xr,[o("div",Sr,[o("img",{src:a.imageUrl,style:{"max-width":"240px"}},null,8,Rr)]),Pr])):w("",!0),n(E,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1 cu\u1ED1i",pattern:"[0-9]*","clear-button":"",value:a.item.ownerPhoneNumber,"onUpdate:value":t[2]||(t[2]=S=>a.item.ownerPhoneNumber=S)},null,8,["value"]),n(E,{outline:"",type:"textarea",label:"\u0110\u1ECBa ch\u1EC9","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:a.item.ownerAddress,"onUpdate:value":t[3]||(t[3]=S=>a.item.ownerAddress=S)},null,8,["value"])]),_:1})]),_:1}),n(y,null,{default:i(()=>[n(_,null,{default:i(()=>[Nr,n(C,{checked:a.item.metadata.introduction.enable,"onUpdate:checked":t[4]||(t[4]=S=>a.item.metadata.introduction.enable=S)},null,8,["checked"])]),_:1}),n($,null,{default:i(()=>[L(n(m,{"no-hairlines-md":""},{default:i(()=>[n(E,{type:"text",outline:"","floating-label":"",placeholder:"",info:"show on tieu de",maxlength:"50","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:a.item.metadata.introduction.title,"onUpdate:value":t[5]||(t[5]=S=>a.item.metadata.introduction.title=S)},null,8,["value"]),n(A,null,{default:i(()=>[qr]),_:1}),n(k,{placeholder:"Enter text...",buttons:[["bold","italic","underline","strikeThrough"],["orderedList","unorderedList"],["link","image"],["paragraph","h1","h2","h3"],["alignLeft","alignCenter","alignRight","alignJustify"],["subscript","superscript"]],value:a.item.metadata.introduction.content,"onTexteditor:change":t[6]||(t[6]=S=>a.item.metadata.introduction.content=S)},null,8,["value"])]),_:1},512),[[V,a.item.metadata.introduction.enable]])]),_:1})]),_:1}),n(y,null,{default:i(()=>[n(_,null,{default:i(()=>[Br,n(C,{checked:a.item.metadata.discount.enable,"onUpdate:checked":t[7]||(t[7]=S=>a.item.metadata.discount.enable=S)},null,8,["checked"])]),_:1}),n($,null,{default:i(()=>[L(n(m,{"no-hairlines-md":""},{default:i(()=>[n(E,{type:"text",outline:"","floating-label":"",placeholder:"",info:"show on tieu de",maxlength:"50","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:a.item.metadata.discount.title,"onUpdate:value":t[8]||(t[8]=S=>a.item.metadata.discount.title=S)},null,8,["value"]),n(A,null,{default:i(()=>[Lr]),_:1}),n(k,{placeholder:"Enter text...",value:a.item.metadata.discount.content,"onTexteditor:change":t[9]||(t[9]=S=>a.item.metadata.discount.content=S)},null,8,["value"])]),_:1},512),[[V,a.item.metadata.discount.enable]])]),_:1})]),_:1}),n(y,null,{default:i(()=>[n(_,null,{default:i(()=>[Qr,n(C,{checked:a.item.metadata.quotation.enable,"onUpdate:checked":t[10]||(t[10]=S=>a.item.metadata.quotation.enable=S)},null,8,["checked"])]),_:1}),n($,null,{default:i(()=>[L(n(m,{"no-hairlines-md":""},{default:i(()=>[n(E,{type:"text",outline:"","floating-label":"",placeholder:"",info:"show on tieu de",maxlength:"50","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:a.item.metadata.quotation.title,"onUpdate:value":t[11]||(t[11]=S=>a.item.metadata.quotation.title=S)},null,8,["value"]),n(A,null,{default:i(()=>[Fr]),_:1}),n(k,{placeholder:"Enter text...",value:a.item.metadata.quotation.content,"onTexteditor:change":t[12]||(t[12]=S=>a.item.metadata.quotation.content=S)},null,8,["value"])]),_:1},512),[[V,a.item.metadata.quotation.enable]])]),_:1})]),_:1}),n(y,null,{default:i(()=>[n(_,null,{default:i(()=>[Or,n(C,{checked:a.item.metadata.call.enable,"onUpdate:checked":t[13]||(t[13]=S=>a.item.metadata.call.enable=S)},null,8,["checked"])]),_:1}),n($,null,{default:i(()=>[L(n(m,{"no-hairlines-md":""},{default:i(()=>[n(E,{type:"text",outline:"","floating-label":"",placeholder:"",info:"ti\xEAu \u0111\u1EC1 button Call",maxlength:"50","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:a.item.metadata.call.title,"onUpdate:value":t[14]||(t[14]=S=>a.item.metadata.call.title=S)},null,8,["value"]),n(E,{type:"text",outline:"","floating-label":"",placeholder:"",info:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i h\u1EE3p l\u1EC7",required:"","clear-button":"",value:a.item.metadata.call.phoneNumber,"onUpdate:value":t[15]||(t[15]=S=>a.item.metadata.call.phoneNumber=S)},null,8,["value"])]),_:1},512),[[V,a.item.metadata.call.enable]])]),_:1})]),_:1}),n(B,null,{default:i(()=>[n(D,null,{default:i(()=>[n(T,{width:"100"},{default:i(()=>[n(x,{fill:"",round:"",large:"",onClick:t[16]||(t[16]=S=>d.updateData())},{default:i(()=>[Vr]),_:1})]),_:1})]),_:1})]),_:1}),n(y,null,{default:i(()=>[n(_,null,{default:i(()=>[Mr]),_:1}),n($,null,{default:i(()=>[c(p(l.f7route.params.id),1)]),_:1})]),_:1})])]),_:1})}var zr=N(Tr,[["render",Hr]]);const Kr=M({props:{isView:Boolean,id:Number},data(){return{isLoading:!1,data:{}}},watch:{id:"loadData"},methods:{async loadData(){this.id>0&&(this.isLoading=!0,this.data=await this.$api.getQRID(this.id,"111"),this.isLoading=!1)}},async mounted(){this.loadData()}}),jr=c(" Th\xF4ng tin thi\u1EBFt b\u1ECB "),Yr={class:"list media-list no-hairlines-between"},Gr={class:"item-content"},Wr={class:"item-inner"},Zr={class:"item-title"},Xr={class:"item-content"},Jr={class:"item-inner"},ed=["innerHTML"],td=["src"],nd={class:"item-content"},id={class:"item-inner"},od={class:"item-title"},ad={class:"item-checkbox item-content"},sd={class:"item-inner"},ld=o("div",{class:"item-title-row"},[o("div",{class:"item-title"},"S\u1EA3n ph\u1EA9m c\u1EE7a")],-1),rd={class:"item-subtitle"},dd={class:"item-text"},cd=c(" Kh\xE1ch h\xE0ng s\u1EED d\u1EE5ng "),ud={class:"list media-list no-hairlines-between"},pd={class:"item-content"},hd=o("div",{class:"item-media"},[o("i",{class:"f7-icons"},"person_fill")],-1),_d={class:"item-inner"},md={class:"item-title"},fd={key:0},gd={class:"item-content"},vd=o("div",{class:"item-media"},[o("i",{class:"f7-icons"},"device_phone_portrait")],-1),bd={class:"item-inner"},Cd={class:"item-subtitle"},yd={class:"item-content"},Ed=o("div",{class:"item-media"},[o("i",{class:"f7-icons"},"house")],-1),kd={class:"item-inner"},wd={class:"item-subtitle"};function Ad(e,t,l,u,a,d){const h=s("f7-preloader"),g=s("f7-card-header"),v=s("f7-swiper-slide"),_=s("f7-swiper"),E=s("f7-card-content"),m=s("f7-card");return r(),b(P,null,[n(m,null,{default:i(()=>[n(g,{"bg-color":"green"},{default:i(()=>[jr,L(n(h,null,null,512),[[V,e.isLoading]])]),_:1}),n(E,null,{default:i(()=>[o("div",Yr,[o("ul",null,[o("li",null,[o("div",Gr,[o("div",Wr,[o("div",Zr,p(e.data.title),1)])])]),o("li",null,[o("div",Xr,[o("div",Jr,[o("div",{class:"item-text",innerHTML:e.data.description},null,8,ed)])])]),o("li",null,[n(_,{speed:500,slidesPerView:2,spaceBetween:10},{default:i(()=>[(r(!0),b(P,null,F(e.data.imageUrls,y=>(r(),f(v,{key:y},{default:i(()=>[o("img",{class:"small",src:y},null,8,td)]),_:2},1024))),128))]),_:1})]),o("li",null,[o("div",nd,[o("div",id,[o("div",od," Ng\xE0y k\xEDch ho\u1EA1t: "+p(e.$utils.formatDate(e.data.activatedDate)),1)])])]),o("li",null,[o("label",ad,[o("div",sd,[ld,o("div",rd,p(e.data.sellerName),1),o("div",dd,p(e.data.sellerAddress),1)])])])])])]),_:1})]),_:1}),n(m,null,{default:i(()=>[n(g,{"bg-color":"green"},{default:i(()=>[cd]),_:1}),n(E,null,{default:i(()=>[o("div",ud,[o("ul",null,[o("li",null,[o("div",pd,[hd,o("div",_d,[o("div",md,p(e.data.ownerName),1)])])]),e.data.ownerPhoneNumber?(r(),b("li",fd,[o("div",gd,[vd,o("div",bd,[o("div",Cd,p(e.data.ownerPhoneNumber),1)])])])):w("",!0),o("li",null,[o("div",yd,[Ed,o("div",kd,[o("div",wd,p(e.data.ownerAddress),1)])])])])])]),_:1})]),_:1})],64)}var Be=N(Kr,[["render",Ad]]);const Dd=M({components:{DetailQrid:Be,History:pe},props:{f7route:Object,f7router:Object},data(){return{name:"Th\u1EBB gi\xE1m s\xE1t D\u1EF1 \xE1n",enablePopup:!1,items:[],selectedId:0,item:{},id:this.f7route.params.packageId,privateCode:"",org:{name:"",address:""},project:{title:"DEMO - VINAAS",cardType:"CARD_TYPE.EXIST_DEVICE",count:108,organizationId:888,status:"ACTIVE"}}},computed:{},methods:{async showItem(e){console.log("click showItem()"),this.selectedId=e.id,this.enablePopup=!0},async loadData(){let e={id:10001001053,title:"DEMO - VINAAS",cardType:"CARD_TYPE.EXIST_DEVICE",count:108,organizationId:888,status:"ACTIVE",organization:{name:"",address:""},qridList:[{id:100010010530026,packageId:"10001001053",title:"Vsmart Active 3",imageUrls:[],activatedDate:"2021-12-28T01:52:59.981Z",ownerName:"Nguy\u1EC5n M\u1EA1nh H\xE0",status:"QRID_STATUS.ACTIVE"},{id:100010010530031,packageId:"10001001053",title:"M\u1EB7t sau c\u1EEDa ch\xEDnh",imageUrls:["https://apps.vinaas.com/file/ru9CQThTA","https://apps.vinaas.com/file/RLwdCELBA","https://apps.vinaas.com/file/AIAHKgmk7","https://apps.vinaas.com/file/NsarQsF2n"],activatedDate:"2021-11-29T23:56:18.922Z",ownerName:"A b\u1EA3o",status:"QRID_STATUS.ACTIVE"},{id:100010010530028,packageId:"10001001053",title:"\u0110i\u1EC7n tho\u1EA1i trong nh\xE0",imageUrls:["https://apps.vinaas.com/file/myuy7kknk","https://apps.vinaas.com/file/nT3MbPc3I"],activatedDate:"2021-11-29T23:53:36.845Z",ownerName:"A b\u1EA3o",status:"QRID_STATUS.ACTIVE"},{id:100010010530027,packageId:"10001001053",title:"Laptop Asus ",imageUrls:["https://apps.vinaas.com/file/r5uvOPkcs","https://apps.vinaas.com/file/plm25aLDq"],activatedDate:"2021-11-17T02:35:08.572Z",ownerName:"A Quang",status:"QRID_STATUS.ACTIVE"},{id:100010010530088,packageId:"10001001053",title:"B\xE0n ph\xEDm c\u01A1",imageUrls:[],activatedDate:"2021-11-17T02:27:11.578Z",ownerName:"Quang t\xE8o",status:"QRID_STATUS.ACTIVE"},{id:100010010530087,packageId:"10001001053",title:"M\xE1y Mac mini",imageUrls:["https://apps.vinaas.com/file/3YFASbh8C","https://apps.vinaas.com/file/03HbRRiG1","https://apps.vinaas.com/file/XDb7lTtVl"],activatedDate:"2021-11-17T02:23:54.741Z",ownerName:"Qu\xE2n ",status:"QRID_STATUS.ACTIVE"},{id:100010010530085,packageId:"10001001053",title:"B\xE0n ph\xEDm c\u01A1 filco",imageUrls:["https://apps.vinaas.com/file/Fu5gRnWof","https://apps.vinaas.com/file/6ncWsokIC"],activatedDate:"2021-11-17T02:15:48.717Z",ownerName:"A b\u1EA3o",status:"QRID_STATUS.ACTIVE"},{id:100010010530083,packageId:"10001001053",title:"B\xE0n ph\xEDm c\u01A1 zero",imageUrls:["https://apps.vinaas.com/file/LuyYLtpKG","https://apps.vinaas.com/file/8ig2ZBJfy"],activatedDate:"2021-11-17T02:10:00.643Z",ownerName:"A qu\xE2n",status:"QRID_STATUS.ACTIVE"},{id:100010010530082,packageId:"10001001053",title:"Laptop Panasonic ",imageUrls:["https://media.vinaas.com/file/nCzWPJLaY","https://media.vinaas.com/file/QRMVaE1Bb","https://media.vinaas.com/file/fQRDWpAtZ","https://media.vinaas.com/file/eNTzIq9BV"],activatedDate:"2021-11-17T02:07:37.254Z",ownerName:"A Quang",status:"QRID_STATUS.ACTIVE"},{id:100010010530084,packageId:"10001001053",title:"M\xE0n h\xECnh philip",imageUrls:["https://apps.vinaas.com/file/icZg42sYz","https://apps.vinaas.com/file/HkjWkXA1g","https://apps.vinaas.com/file/488IHrxAv","https://apps.vinaas.com/file/wqxFUw3mS"],activatedDate:"2021-11-17T02:05:38.758Z",ownerName:"A quang",status:"QRID_STATUS.ACTIVE"},{id:100010010530081,packageId:"10001001053",title:"B\xE0n ph\xEDm c\u01A1 leopold",imageUrls:["https://apps.vinaas.com/file/GVTZpR1sk","https://apps.vinaas.com/file/rgwFU4ujn","https://apps.vinaas.com/file/1wOyxulmT","https://apps.vinaas.com/file/lGtnrGJWZ"],activatedDate:"2021-11-17T01:57:51.814Z",ownerName:"A b\u1EA3o",status:"QRID_STATUS.ACTIVE"},{id:100010010530011,packageId:"10001001053",title:"Xe m\xE1y Air Blade 2008",imageUrls:["https://media.vinaas.com/file/1Np2nCWT9","https://media.vinaas.com/file/F5n4LBeUr"],activatedDate:"2021-11-04T02:36:11.823Z",ownerName:"Anh Hu\u1EC7",status:"QRID_STATUS.ACTIVE"},{id:100010010530001,packageId:"10001001053",title:"T\u1EE7 m\xE1t DarLing",imageUrls:["https://media.vinaas.com/file/3XdMOIoYd"],activatedDate:"2021-10-17T08:38:44.940Z",ownerName:"Dingtea 03 \xC2u C\u01A1",status:"QRID_STATUS.ACTIVE"},{id:100010010530106,packageId:"10001001053",title:"M\xE1y l\u1EA1nh 1",imageUrls:["https://media.vinaas.com/file/8p7qpJiBk"],activatedDate:"2021-07-29T08:20:37.924Z",ownerName:"H\u1EADu",status:"QRID_STATUS.ACTIVE"},{id:100010010530100,packageId:"10001001053",title:"Lan \u0111\u1ED9t bi\u1EBFn",imageUrls:["https://media.vinaas.com/file/ZPssCHCKl","https://media.vinaas.com/file/UkiKsvhuT"],activatedDate:"2021-07-23T03:01:20.236Z",ownerName:"L\xEA thi lan Nhi\xEAn",status:"QRID_STATUS.ACTIVE"},{id:100010010530063,packageId:"10001001053",title:"Sunhose 09789",imageUrls:["https://media.vinaas.com/file/iFY0GXmME","https://media.vinaas.com/file/ruJb3FnX1"],activatedDate:"2021-06-08T10:14:03.703Z",ownerName:"Anh Quang",status:"QRID_STATUS.ACTIVE"},{id:100010010530072,packageId:"10001001053",title:"M\xE1y t\xEDnh",imageUrls:["https://media.vinaas.com/file/FZYlfwQTS"],activatedDate:"2021-05-29T05:15:34.013Z",ownerName:"Ch\u1ECB vy",status:"QRID_STATUS.ACTIVE"},{id:10001001053e4,packageId:"10001001053",title:"DEmo",imageUrls:["https://media.vinaas.com/file/WtQwiOaUV","https://media.vinaas.com/file/leCfZsktH"],activatedDate:"2021-05-26T02:06:06.447Z",ownerName:"A d\u01B0\u01A1ng",status:"QRID_STATUS.ACTIVE"},{id:100010010530097,packageId:"10001001053",title:"Xe ",imageUrls:[],activatedDate:"2021-04-25T07:24:25.326Z",ownerName:"L\u01B0\u01A1ng v\u0103n thanh",status:"QRID_STATUS.ACTIVE"}]};e=await this.$api.getProjectSummary(this.id,this.privateCode),this.project={title:e.title,cardType:e.cardType,count:e.count,organizationId:e.organizationId,status:e.status},this.org=e.organization,this.items=e.qridList}},async mounted(){await this.loadData()}}),Td={class:"content"},Id=["src"],$d=c("Close");function Ud(e,t,l,u,a,d){const h=s("f7-nav-title"),g=s("f7-navbar"),v=s("f7-card-header"),_=s("f7-list-item"),E=s("f7-list"),m=s("f7-card-content"),y=s("f7-card"),C=s("f7-link"),A=s("f7-nav-right"),k=s("detail-qrid"),$=s("history"),x=s("f7-page"),T=s("f7-popup");return r(),f(x,null,{default:i(()=>[n(g,{sliding:!1},{default:i(()=>[n(h,{sliding:""},{default:i(()=>[c(p(e.name),1)]),_:1})]),_:1}),o("div",Td,[n(y,null,{default:i(()=>[n(v,{"bg-color":"blue"},{default:i(()=>[c("ID "+p(e.f7route.params.packageId),1)]),_:1}),n(m,null,{default:i(()=>[n(E,null,{default:i(()=>[n(_,null,{default:i(()=>[c("Lo\u1EA1i Th\u1EBB "+p(e.project.cardType),1)]),_:1}),n(_,null,{default:i(()=>[c("T\u1ED5ng s\u1ED1 "+p(e.project.count)+" th\u1EBB",1)]),_:1}),n(_,null,{default:i(()=>[c("C\xF4ng ty: "+p(e.org.name),1)]),_:1}),n(_,null,{default:i(()=>[c("\u0110\u1ECBa ch\u1EC9: "+p(e.org.address),1)]),_:1})]),_:1})]),_:1})]),_:1}),n(y,null,{default:i(()=>[n(v,{"bg-color":"green"},{default:i(()=>[c(p(e.items.length)+" / "+p(e.project.count)+" Th\u1EBB \u0111\xE3 \u0111\u01B0\u1EE3c k\xEDch ho\u1EA1t",1)]),_:1}),n(m,null,{default:i(()=>[n(E,{"media-list":""},{default:i(()=>[(r(!0),b(P,null,F(e.items,D=>(r(),f(_,{key:D.id,onClick:B=>e.showItem(D),subtitle:D.title,header:e.$utils.formatQRID(D.id),title:D.ownerName,text:"K\xEDch ho\u1EA1t: "+e.$utils.formatDate(D.activatedDate)},{media:i(()=>[o("img",{src:e.$utils.firstImage(D.imageUrls),width:"60"},null,8,Id)]),_:2},1032,["onClick","subtitle","header","title","text"]))),128))]),_:1})]),_:1})]),_:1})]),n(T,{opened:e.enablePopup,"onUpdate:opened":t[0]||(t[0]=D=>e.enablePopup=D),"tablet-fullscreen":!0},{default:i(()=>[n(x,null,{default:i(()=>[n(g,{title:"Chi ti\u1EBFt"},{default:i(()=>[n(A,null,{default:i(()=>[n(C,{"popup-close":""},{default:i(()=>[$d]),_:1})]),_:1})]),_:1}),n(k,{isView:!0,id:e.selectedId},null,8,["id"]),n($,{id:e.selectedId},null,8,["id"])]),_:1})]),_:1},8,["opened"])]),_:1})}var xd=N(Dd,[["render",Ud]]);const Sd=M({props:{id:Number,privateCode:String},components:{History:pe,Location:xe},data(){return{isLoading:!1,filter:{skip:0,limit:10},enablePopup:!1,selectedId:0,data:{}}},watch:{id:"loadData"},methods:{clickViewActivity(e){e.id>0&&(this.selectedId=e.id,this.enablePopup=!0)},async loadData(){if(this.id>0){this.isLoading=!0;let e=this.$utils.qrid_package(this.id),t=parseInt(e);this.data=await this.$api.getQRList(t,this.privateCode),this.isLoading=!1}}},async mounted(){this.loadData()}}),Rd=c("\u0110\u1ECBa \u0111i\u1EC3m \u0111\u01B0\u1EE3c d\xE1n v\xE0 k\xEDch ho\u1EA1t Th\u1EBB "),Pd={class:"list media-list medium-inset"},Nd=["onClick"],qd={class:"item-media"},Bd=["src"],Ld={class:"item-inner"},Qd={class:"item-header"},Fd={class:"item-title-row"},Od={style:{"font-size":"16px"}},Vd=o("div",{class:"item-after"},null,-1),Md={class:"item-text"},Hd={class:"item-footer text-color-red",style:{"font-size":"14px","font-weight":"600"}},zd=c("Close");function Kd(e,t,l,u,a,d){const h=s("f7-preloader"),g=s("f7-card-header"),v=s("f7-card"),_=s("f7-link"),E=s("f7-nav-right"),m=s("f7-navbar"),y=s("location"),C=s("history"),A=s("f7-page"),k=s("f7-popup");return r(),b(P,null,[n(v,null,{default:i(()=>[n(g,{"bg-color":"blue"},{default:i(()=>[Rd,L(n(h,null,null,512),[[V,e.isLoading]])]),_:1}),o("div",Pd,[o("ul",null,[(r(!0),b(P,null,F(e.data,$=>(r(),b("li",{key:$.id},[o("a",{onClick:x=>e.clickViewActivity($),class:"item-link item-content chevron-center"},[o("div",qd,[o("img",{style:{border:"1px solid #ccc"},src:e.$utils.firstImage($.imageUrls),width:"80"},null,8,Bd)]),o("div",Ld,[o("div",Qd,p(e.$utils.formatQRID($.id)),1),o("div",Fd,[o("div",Od,p($.title),1),Vd]),o("div",Md,p($.description),1),o("div",Hd,p(e.$utils.formatMoney($.money)),1)])],8,Nd)]))),128))])])]),_:1}),n(k,{id:"view-card",opened:e.enablePopup,"onUpdate:opened":t[0]||(t[0]=$=>e.enablePopup=$),"tablet-fullscreen":!0},{default:i(()=>[n(A,null,{default:i(()=>[n(m,{title:"Chi ti\u1EBFt"},{default:i(()=>[n(E,null,{default:i(()=>[n(_,{"popup-close":""},{default:i(()=>[zd]),_:1})]),_:1})]),_:1}),n(y,{isView:!1,id:e.selectedId,status:"QRID_STATUS.ACTIVE"},null,8,["id"]),n(C,{id:e.selectedId},null,8,["id"])]),_:1})]),_:1},8,["opened"])],64)}var jd=N(Sd,[["render",Kd]]);const Yd=M({components:{DetailQrid:Be,RecentHistory:Re,History:pe,CardList:jd},props:{f7route:Object,f7router:Object},data(){let e="admin",t="CARD_TYPE.PUBLIC_LOCATION",l=parseInt(this.f7route.params.id);return{name:e,title:"Th\u1EBB qu\u1EA3n l\xFD Ph\u1EA3n \xE1nh",enablePopup:!1,data:{title:e,cardType:t,status:"NOT_GENERATED",ownerName:"",ownerPhoneNumber:"",ownerAddress:"",metadata:{qrid:0,from:1,to:20,listIds:[]}},items:[],selectedId:0,item:{},id:l,privateCode:this.f7route.params.privateCode}},computed:{listIds(){if(this.id>0){let e=this.$utils.qrid_package(this.id),t=this.$utils.list_qrid(e,this.data.metadata.from,this.data.metadata.to);return this.data.metadata.listIds=t,console.log(t.toString()),t}else return[]},firstId(){let e=this.listIds[0];return e>0?this.$utils.formatQRID(e):""},lastId(){let e=this.listIds[this.listIds.length-1];return e>0?this.$utils.formatQRID(e):""}},methods:{async showItem(e){console.log("click showItem()"),this.selectedId=e.id,this.enablePopup=!0},async loadData(){try{let e=await this.$api.verifyCard(this.id,this.privateCode);e&&(e.status=="INVALID_PRIVATE"?(console.log(e),this.f7router.navigate("/")):e.status=="NOT_GENERATED"||(this.data=await this.$api.getQRID(this.id,this.privateCode)))}catch(e){}},async updateCard(){if(this.id){console.log("initData()",this.id,this.privateCode,this.data);let e=await this.$api.updateCard(this.id,this.privateCode,this.data);e&&(U.dialog.alert("C\u1EADp nh\u1EADt th\xE0nh c\xF4ng"),this.data=e)}},async activeCard(){if(this.id){console.log("initData()",this.id,this.privateCode,this.data);let e=await this.$api.activeCard(this.id,this.privateCode,this.data);e&&(U.dialog.alert("K\xEDch hoat th\xE0nh c\xF4ng"),this.data=e)}},async initData(){console.log("initData()",this.id,this.privateCode,this.data);let e=await this.$api.initCard(this.id,this.privateCode,this.data);e&&(U.dialog.alert("Kh\u1EDFi t\u1EA1o th\xE0nh c\xF4ng"),this.data=e)}},async mounted(){await this.loadData()}}),Gd=c("Thi\u1EBFt l\u1EADp Th\u1EBB"),Wd=c("Kh\u1EDFi t\u1EA1o"),Zd=c("B\u1ED9 ph\u1EADn qu\u1EA3n l\xFD"),Xd=c("C\u1EADp nh\u1EADt"),Jd=c("K\xEDch ho\u1EA1t"),ec=c("Close");function tc(e,t,l,u,a,d){const h=s("f7-nav-title"),g=s("f7-navbar"),v=s("recent-history"),_=s("card-list"),E=s("f7-card-header"),m=s("f7-list-input"),y=s("f7-col"),C=s("f7-row"),A=s("f7-list-item"),k=s("f7-button"),$=s("f7-list"),x=s("f7-card"),T=s("f7-card-content"),D=s("f7-link"),B=s("f7-nav-right"),Q=s("detail-qrid"),S=s("history"),G=s("f7-page"),K=s("f7-popup");return r(),f(G,null,{default:i(()=>[n(g,{sliding:!1},{default:i(()=>[n(h,{sliding:""},{default:i(()=>[c(p(e.title),1)]),_:1})]),_:1}),e.data.status=="QRID_STATUS.ACTIVE"?(r(),f(v,{key:0,id:e.id,privateCode:e.privateCode},null,8,["id","privateCode"])):w("",!0),e.data.status=="QRID_STATUS.ACTIVE"?(r(),f(_,{key:1,id:e.id,privateCode:e.privateCode},null,8,["id","privateCode"])):w("",!0),e.data.status=="NOT_GENERATED"?(r(),f(x,{key:2},{default:i(()=>[n(E,null,{default:i(()=>[Gd]),_:1}),n($,{"no-hairlines-md":""},{default:i(()=>[n(m,{outline:"",label:"CardType","floating-label":"",type:"text",placeholder:"",pattern:"[0-9]*","clear-button":"",value:e.data.cardType,"onUpdate:value":t[0]||(t[0]=H=>e.data.cardType=H)},null,8,["value"]),n(A,null,{default:i(()=>[n(C,null,{default:i(()=>[n(y,null,{default:i(()=>[n(m,{outline:"",label:"B\u1EAFt \u0111\u1EA7u","floating-label":"",type:"number",placeholder:"",pattern:"[0-9]*",value:e.data.metadata.from,"onUpdate:value":t[1]||(t[1]=H=>e.data.metadata.from=H)},null,8,["value"]),c(" "+p(e.firstId),1)]),_:1}),n(y,null,{default:i(()=>[n(m,{outline:"",label:"K\u1EBFt th\xFAc","floating-label":"",type:"number",placeholder:"",value:e.data.metadata.to,"onUpdate:value":t[2]||(t[2]=H=>e.data.metadata.to=H)},null,8,["value"]),c(" "+p(e.lastId),1)]),_:1})]),_:1})]),_:1}),n(A,null,{default:i(()=>[n(k,{fill:"",large:"",outline:"",onClick:t[3]||(t[3]=H=>e.initData())},{default:i(()=>[Wd]),_:1})]),_:1})]),_:1})]),_:1})):(r(),f(x,{key:3},{default:i(()=>[n(E,{"bg-color":"blue"},{default:i(()=>[Zd]),_:1}),n($,{"no-hairlines-md":""},{default:i(()=>[n(m,{type:"text",outline:"",label:"T\xEAn ng\u01B0\u1EDDi ph\u1EE5 tr\xE1ch","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"100","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:e.data.ownerName,"onUpdate:value":t[4]||(t[4]=H=>e.data.ownerName=H)},null,8,["value"]),n(m,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1 cu\u1ED1i",pattern:"[0-9]*","clear-button":"",value:e.data.ownerPhoneNumber,"onUpdate:value":t[5]||(t[5]=H=>e.data.ownerPhoneNumber=H)},null,8,["value"]),n(m,{outline:"",type:"textarea",label:"Ph\xF2ng l\xE0m vi\u1EC7c","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:e.data.ownerAddress,"onUpdate:value":t[6]||(t[6]=H=>e.data.ownerAddress=H)},null,8,["value"]),n(A,null,{default:i(()=>[e.data.status=="QRID_STATUS.ACTIVE"?(r(),f(k,{key:0,fill:"",large:"",outline:"",onClick:t[7]||(t[7]=H=>e.updateCard())},{default:i(()=>[Xd]),_:1})):(r(),f(k,{key:1,fill:"",large:"",outline:"",onClick:t[8]||(t[8]=H=>e.activeCard())},{default:i(()=>[Jd]),_:1}))]),_:1})]),_:1})]),_:1})),n(x,null,{default:i(()=>[n(E,null,{default:i(()=>[c("\u0110ang qu\u1EA3n l\xFD, gi\xE1m s\xE1t "+p(this.listIds.length)+" Th\u1EBB",1)]),_:1}),n(T,null,{default:i(()=>[n($,null,{default:i(()=>[n(A,null,{default:i(()=>[c("T\u1EEB: "+p(e.firstId),1)]),_:1}),n(A,null,{default:i(()=>[c("\u0110\u1EBFn: "+p(e.lastId),1)]),_:1})]),_:1})]),_:1})]),_:1}),n(K,{opened:e.enablePopup,"onUpdate:opened":t[9]||(t[9]=H=>e.enablePopup=H),"tablet-fullscreen":!0},{default:i(()=>[n(G,null,{default:i(()=>[n(g,{title:"Chi ti\u1EBFt"},{default:i(()=>[n(B,null,{default:i(()=>[n(D,{"popup-close":""},{default:i(()=>[ec]),_:1})]),_:1})]),_:1}),n(Q,{isView:!0,id:e.selectedId},null,8,["id"]),n(S,{id:e.selectedId},null,8,["id"])]),_:1})]),_:1},8,["opened"])]),_:1})}var nc=N(Yd,[["render",tc]]);const ic=M({name:"QrLogin",emits:["detect","warning"],props:{f7route:Object,f7router:Object},components:{QrStream:de.exports.QrStream,QrCapture:de.exports.QrCapture},data(){return{qrUrl:"",warning:!1,camera:"auto"}},methods:{async onDecode(e){console.log("onDecode",e),this.qrUrl=e,e&&e.toString().includes("www.qrcare.vn/m/")?(this.warning=!1,Z.dispatch("scanQRCode",e),this.f7router.back()):this.warning=!0}}}),oc=e=>(ee("data-v-41e79232"),e=e(),te(),e),ac={class:"reader"},sc={class:"center stream"},lc=oc(()=>o("div",{style:{color:"red"},class:"frame"},null,-1)),rc=c("Th\u1EBB kh\xF4ng h\u1EE3p l\u1EC7"),dc={style:{"word-wrap":"break-word"}};function cc(e,t,l,u,a,d){const h=s("f7-navbar"),g=s("qr-stream"),v=s("f7-block-title"),_=s("f7-block"),E=s("f7-page");return r(),f(E,null,{default:i(()=>[n(h,{title:"QRMember Scan","back-link":"Back"}),n(_,null,{default:i(()=>[o("div",ac,[o("div",null,[o("div",sc,[n(g,{onDecode:e.onDecode,class:"mb"},{default:i(()=>[lc]),_:1},8,["onDecode"])])])]),n(_,{strong:""},{default:i(()=>[e.warning?(r(),f(v,{key:0},{default:i(()=>[rc]),_:1})):w("",!0),o("div",dc,p(e.qrUrl),1)]),_:1})]),_:1})]),_:1})}var Le=N(ic,[["render",cc],["__scopeId","data-v-41e79232"]]);const uc=M({props:{f7route:Object,f7router:Object},components:{QrScanOne:Le},setup(){return{qrUrl:oe("qrUrl")}},data(){return{enablePopup:!1,customer:{},customers:[],name:"",note:"",qrid:this.f7route.params.id}},watch:{qrUrl(e){console.log("watch qrUrl",e),e&&this.detectURl(e)}},computed:{isPaid(){return this.customer&&this.customer.status?this.customer.status=="PAID":!1},enablePaidButton(){return this.qrUrl&&!this.isPaid}},methods:{scanCard(){this.f7router.navigate("/qrmemberscan")},async getQRCustomer(){var e=100010010970010,t=this.f7route.params.privateCode;let l=await this.$api.getQRCustomerBySale(e,t);this.customers=l.filter(u=>u.status=="PAID")},async detectURl(e){if(e&&e.includes("www.qrcare.vn")){e.includes("http")||(e="https://"+e);let t=new URL(e).pathname.split("/"),l=t[2],u=t[4],a=t[6];this.qrUrl=`${l}-${u}-${a}`,console.log("detectURl",t,this.qrUrl);let d=await this.$api.getQRCustomer(this.qrUrl);d?this.customer=d:(this.qrUrl="",U.dialog.alert("Th\u1EBB ch\u01B0a \u0111\u01B0\u1EE3c k\xEDch ho\u1EA1t")),this.enablePopup=!1}},async Paid(){this.customer.name=this.name,this.customer.status="PAID",this.customer.modified=new Date().toISOString(),this.customer.history.unshift({type:"PAID",date:this.customer.modified}),this.customer.info={customerName:this.name,note:this.note,operator:this.qrid},await this.$api.updateQRCustomer(this.qrUrl,this.customer)&&(await this.getQRCustomer(),U.dialog.alert("X\xE1c nh\u1EADn th\xE0nh c\xF4ng!"))}},async mounted(){this.$utils.qrid_index(this.qrid),await this.getQRCustomer()}}),pc=c("Th\u1EBB Nh\xE2n vi\xEAn"),hc={class:"page-content"},_c=c("X\xE1c nh\u1EADn \u0110\u0103ng k\xFD"),mc=c("Qu\xE9t Th\u1EBB"),fc=o("div",null,"T\u01B0\u01A1ng t\xE1c g\u1EA7n nh\u1EA5t",-1),gc={key:0},vc={key:1},bc=o("p",null," Sau khi x\xE1c nh\u1EADn, s\u1EBD c\u1EADp nh\u1EADt l\xEAn Th\u1EBB C\u1ED9ng t\xE1c",-1),Cc=c("X\xE1c nh\u1EADn"),yc=c("Th\u1EBB \u0111\xE3 \u0111\u0103ng k\xFD (mua h\xE0ng)");function Ec(e,t,l,u,a,d){const h=s("f7-nav-title"),g=s("f7-navbar"),v=s("f7-card-header"),_=s("f7-button"),E=s("f7-card-content"),m=s("f7-card-footer"),y=s("f7-card"),C=s("f7-list-input"),A=s("f7-list"),k=s("f7-list-item"),$=s("f7-block"),x=s("f7-page");return r(),f(x,null,{default:i(()=>[n(g,{sliding:!1},{default:i(()=>[n(h,{sliding:""},{default:i(()=>[pc]),_:1})]),_:1}),o("div",hc,[n(y,null,{default:i(()=>[n(v,null,{default:i(()=>[_c]),_:1}),n(E,null,{default:i(()=>[n(_,{fill:"",large:"",onClick:t[0]||(t[0]=T=>e.scanCard())},{default:i(()=>[mc]),_:1}),e.customer.qrUrl?(r(),f(y,{key:0},{default:i(()=>[n(v,null,{default:i(()=>[c("Th\u1EBB "+p(e.customer.qrUrl.substring(6)),1)]),_:1}),n(E,null,{default:i(()=>[o("div",null,"T\xEAn: "+p(e.customer.name),1),fc,o("ul",null,[(r(!0),b(P,null,F(e.customer.history.slice(0,3),T=>(r(),b("li",{key:T},p(e.$utils.formatDateTime(T.date))+" : "+p(e.$utils.actionText(T.type)),1))),128))])]),_:1}),n(m,null,{default:i(()=>[e.isPaid?(r(),b("div",vc,"Tr\u1EA1ng th\xE1i: \u0110\xE3 \u0111\u0103ng k\xFD")):(r(),b("div",gc,"Tr\u1EA1ng th\xE1i: Ch\u01B0a \u0110\u0103ng k\xFD"))]),_:1})]),_:1})):w("",!0),e.enablePaidButton?(r(),f(y,{key:1},{default:i(()=>[e.isPaid?w("",!0):(r(),f(A,{key:0,"no-hairlines-md":""},{default:i(()=>[n(C,{outline:"",label:"T\xEAn kh\xE1ch h\xE0ng","floating-label":"",type:"text",placeholder:"","clear-button":"",value:e.name,"onUpdate:value":t[1]||(t[1]=T=>e.name=T)},null,8,["value"]),n(C,{outline:"",label:"Ghi ch\xFA","floating-label":"",type:"textarea",placeholder:"","clear-button":"",value:e.note,"onUpdate:value":t[2]||(t[2]=T=>e.note=T)},null,8,["value"])]),_:1})),bc,n(_,{fill:"",large:"",onClick:t[3]||(t[3]=T=>e.Paid())},{default:i(()=>[Cc]),_:1})]),_:1})):w("",!0)]),_:1})]),_:1}),n(y,null,{default:i(()=>[n(v,{"bg-color":"green"},{default:i(()=>[yc]),_:1}),n(A,{"no-hairlines-md":"","media-list":""},{default:i(()=>[(r(!0),b(P,null,F(e.customers,T=>(r(),f(k,{key:T.qrUrl,header:e.$utils.formatDateTime(T.modified),title:T.name||"Ch\u01B0a c\u1EADp nh\u1EADt",subtitle:"Id: "+T.qrUrl.substring(9)},null,8,["header","title","subtitle"]))),128))]),_:1})]),_:1}),n($,null,{default:i(()=>[o("div",null,"ID c\u1EE7a Th\u1EBB : "+p(e.$utils.formatQRID(e.qrid)),1)]),_:1})])]),_:1})}var kc=N(uc,[["render",Ec]]);const wc=M({props:{id:Number,privateCode:Number,initInfo:Object},data(){return{enablePopup:!1,info:{title:"",desc:"",imageUrl:"",icon:"",features:[{title:"ch\u01B0a c\u1EADp nh\u1EADt"}]},data:{}}},methods:{showDetail(){this.enablePopup=!0},async getData(){if(this.id>0){let e=await this.$api.getQRID(this.id,this.privateCode);e&&(this.data=e,e.title&&(this.info.title=e.title),e.description&&(this.info.desc=e.description),e.metadata&&e.metadata.features&&(this.info.features=e.metadata.features))}}},mounted(){this.initInfo&&this.initInfo.title&&(this.info=this.initInfo)}}),Ac=o("i",{class:"f7-icons"},"pencil_circle",-1),Dc={key:0},Tc=c("Close"),Ic=c(" Chi ti\u1EBFt gi\u1EA3i ph\xE1p ");function $c(e,t,l,u,a,d){const h=s("f7-block-title"),g=s("f7-block-content"),v=s("f7-block-header"),_=s("f7-block"),E=s("f7-link"),m=s("f7-nav-right"),y=s("f7-navbar"),C=s("f7-card"),A=s("f7-page"),k=s("f7-popup");return r(),b(P,null,[n(_,null,{default:i(()=>[o("a",{onClick:t[0]||(t[0]=$=>e.showDetail())},[n(h,{medium:""},{default:i(()=>[c(p(e.info.title)+" ",1),Ac]),_:1})]),n(g,null,{default:i(()=>[e.info.desc?(r(),b("p",Dc,p(e.info.desc),1)):w("",!0)]),_:1}),n(v,null,{default:i(()=>[c("ID: "+p(e.id)+", M\xE3 ri\xEAng t\u01B0: "+p(e.privateCode),1)]),_:1})]),_:1}),n(k,{opened:e.enablePopup,"onUpdate:opened":t[1]||(t[1]=$=>e.enablePopup=$),"tablet-fullscreen":!0},{default:i(()=>[n(A,null,{default:i(()=>[n(y,{title:e.info.title},{default:i(()=>[n(m,null,{default:i(()=>[n(E,{"popup-close":""},{default:i(()=>[Tc]),_:1})]),_:1})]),_:1},8,["title"]),n(C,null,{default:i(()=>[Ic]),_:1})]),_:1})]),_:1},8,["opened"])],64)}var Qe=N(wc,[["render",$c]]);let ne={props:[{name:"address",type:"text",icon:"house",placeholder:"\u0110\u1ECBa ch\u1EC9"},{name:"email",type:"email",icon:"envelope",placeholder:""},{name:"blog",type:"url",icon:"link_circle",placeholder:"link of personal blog, profile"},{name:"facebook",type:"url",icon:"logo_facebook",placeholder:""},{name:"skype",type:"text",icon:"/assets/skype.png",placeholder:""},{name:"linkedin",type:"url",icon:"logo_linkedin",placeholder:""},{name:"zalo",type:"text",icon:"/assets/zalo.png",placeholder:"https://zalo.me/...."},{name:"twitter",type:"url",icon:"logo_twitter",placeholder:""},{name:"instagram",type:"url",icon:"logo_instagram",placeholder:""},{name:"tiktok",type:"url",icon:"/assets/tiktok.png",placeholder:""},{name:"telegram",type:"url",icon:"/assets/telegram.png",placeholder:""},{name:"messenger",type:"url",icon:"/assets/messenger.svg",placeholder:""}],payments:[{name:"momo",type:"url",icon:"/assets/momo.png",placeholder:"https://me.momo.vn/qr-page/..."}],ecommerce:[{name:"website",type:"url",icon:"link_circle",placeholder:"order link"},{name:"tiki",type:"url",icon:"/assets/tiki.png",placeholder:""},{name:"lazada",type:"url",icon:"/assets/lazada.png",placeholder:""},{name:"shopee",type:"url",icon:"/assets/shopee.png",placeholder:"https://shopee.vn/product/..."}],socialUrls:{facebook:"",skype:"",telegram:"",zalo:"",momo:"",shopee:"",lazada:"",tiki:"",qrcare:""},userInfo:[{name:"name",text:"T\xEAn g\u1ECDi",type:"text",icon:"house",placeholder:""},{name:"phoneNumber",text:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i",type:"text",icon:"house",placeholder:""},{name:"desc",text:"M\xF4 t\u1EA3",type:"text",icon:"house",placeholder:"house"},{name:"meeting",text:"N\u1ED9i dung trao \u0111\u1ED5i",type:"text",icon:"house",placeholder:""},{name:"time",text:"Ng\xE0y g\u1EB7p",type:"date"}],vCard:{photo:"",firstName:"",middleName:"",lastName:"",organization:"",title:"",note:"",nickname:"",namePrefix:"",nameSuffix:"",gender:"",workPhone:"",homePhone:"",cellPhone:"",email:"",workEmail:"",socialUrls:"",facebook:"",zalo:"",linkedIn:"",twitter:"",momo:""},person:{label:"",firstName:"",lastName:"",email:"",phone:"",address:"",profileUrl:""},company:{enable:!1,name:"",shortName:"",address:"",personTitle:"",title:"",category:"",introduction:{enable:!1,title:"",content:""}}};const Uc={emits:["updateData"],props:{data:{type:Object,default(e){return{}}},view:{type:Boolean,default:!1}},data(){return{model:[{name:"name",text:"T\xEAn c\u1EE7a kh\xE1ch h\xE0ng",type:"text",icon:"house",placeholder:"anh/ch\u1ECB ..."},{name:"phoneNumber",text:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i",type:"text",icon:"phone",placeholder:""},{name:"meeting",text:"Ghi ch\xFA v\u1EC1 kh\xE1ch h\xE0ng",type:"text",icon:"square_pencil",placeholder:""}],isView:!0}},watch:{data(e){e&&e.name?this.isView=!0:this.isView=!1}},methods:{enableEdit(){this.isView=!1},updateData(){this.$emit("updateData",this.data),this.isView=!0}}},xc={class:"block"},Sc=o("div",{class:"block-title",style:{"text-align":"center"}},"M\xF4 t\u1EA3 kh\xE1ch h\xE0ng",-1),Rc={key:0,class:"list no-hairlines-md"},Pc={class:"item-media"},Nc={class:"f7-icons size-40"},qc={class:"item-inner"},Bc={class:"item-title"},Lc={key:1,class:"list no-hairlines-md"},Qc={class:"item-media"},Fc={class:"f7-icons size-40"},Oc={class:"item-inner"},Vc={class:"item-title item-label"},Mc={class:"item-input-wrap"},Hc=["type","placeholder","onUpdate:modelValue"],zc=o("span",{class:"input-clear-button"},null,-1),Kc={class:"row",style:{"padding-top":"20px","padding-bottom":"20px"}},jc=o("div",{class:"col-20"},null,-1),Yc={class:"col"},Gc=o("div",{class:"col-20"},null,-1);function Wc(e,t,l,u,a,d){return r(),b("div",xc,[Sc,a.isView?(r(),b("div",Rc,[o("ul",null,[(r(!0),b(P,null,F(a.model,h=>(r(),b("li",{class:"item-content item-input",key:h.name},[o("div",Pc,[o("i",Nc,p(h.icon),1)]),o("div",qc,[o("div",Bc,p(l.data[h.name]),1)])]))),128))])])):(r(),b("div",Lc,[o("ul",null,[(r(!0),b(P,null,F(a.model,h=>(r(),b("li",{class:"item-content item-input",key:h.name},[o("div",Qc,[o("i",Fc,p(h.icon),1)]),o("div",Oc,[o("div",Vc,p(h.text),1),o("div",Mc,[L(o("input",{type:h.type,placeholder:h.placeholder,"onUpdate:modelValue":g=>l.data[h.name]=g},null,8,Hc),[[We,l.data[h.name]]]),zc])])]))),128))])])),o("div",Kc,[jc,o("div",Yc,[a.isView?(r(),b("button",{key:0,class:"button button-large button-round button-fill",onClick:t[0]||(t[0]=h=>d.enableEdit())},"Edit")):(r(),b("button",{key:1,class:"button button-large button-round button-fill",onClick:t[1]||(t[1]=h=>d.updateData())},"Save"))]),Gc])])}var Zc=N(Uc,[["render",Wc]]);const Xc={components:{UserInfo:Zc},props:{qrid:String,privateCode:String},emits:["selected"],data(){return{isLoading:!1,items:[],selectedId:0,item:{},actionHistory:[],userInfo:{},popupOpened:!1,filters:{},searchQuery:"",datasets:[{label:"NFC Taps",value:150,color:"#ff0"},{label:"qrcode Scans",value:150,color:"#0f0"},{label:"link Clicks",value:400,color:"#00f"}]}},computed:{filteredRepositories(){},repositoriesMatchingSearchQuery(){}},watch:{qrid:"loadData"},methods:{closeItem(){this.popupOpened=!1},selected(e){console.log("a",e),this.selectedId=e,this.loadDetail(),this.popupOpened=!0},async loadDetail(){this.userInfo={},this.item=await this.$api.UserDeviceAction(this.qrid,this.privateCode,this.selectedId),this.actionHistory=this.item.actionHistory,this.item.userInfo&&(this.userInfo=this.item.userInfo)},async updateUserInfo(e){console.log("updateUserInfo",e),e&&e.name&&await this.$api.updateUserInfo(this.qrid,this.privateCode,this.item.id,e)&&U.dialog.alert("Success Update")},async refreshData(){this.items=[],await this.loadData()},async loadData(){this.qrid>0&&(this.isLoading=!0,this.items=await this.$api.UserActionHistory(this.qrid,this.privateCode),this.isLoading=!1)},logoOS(e){if(e&&e.deviceInfo){let t=e.deviceInfo.os;return this.$utils.getLogoOS(t)}},actionInfo(e){if(e){let t="";return e.os&&(t+=e.os),e.osVersion&&(t+=" "+e.osVersion),t}},content(e){if(e)return e.title+`
`+e.content},addNote(){U.dialog.alert("Li\xEAn h\u1EC7 \u0111\u1EC3 \u0111\u01B0\u1EE3c t\u01B0 v\u1EA5n v\xE0 k\xEDch ho\u1EA1t s\u1EED d\u1EE5ng","T\xEDnh n\u0103ng cho Doanh nghi\u1EC7p")}},async mounted(){await this.loadData()}},Jc=c(" L\u1ECBch s\u1EED t\u01B0\u01A1ng t\xE1c"),eu=c(" L\xE0 nh\u1EEFng h\xE0nh \u0111\u1ED9ng c\u1EE7a kh\xE1ch h\xE0ng nh\u01B0 ch\u1EA1m NFC, qu\xE9t qrcode, l\u01B0u danh b\u1EA1, click v\xE0o link,... "),tu={class:"row"},nu=o("div",{class:"col-20"},null,-1),iu={class:"col"},ou=o("div",{class:"col-20"},null,-1),au={class:"list media-list"},su=["onClick"],lu={class:"item-media"},ru={class:"f7-icons",style:{"font-size":"35px"}},du={class:"item-inner"},cu={class:"item-title-row"},uu={class:"item-header"},pu={class:"item-after"},hu={key:0,class:"item-title"},_u={class:"item-text"},mu=c(" Thi\u1EBFt b\u1ECB "),fu=c("Close"),gu={class:"card"},vu={class:"card-header bg-color-blue"},bu={class:"f7-icons",style:{"font-size":"35px: padding-right:40px"}},Cu={class:"card-content"},yu={class:"card"},Eu=c("T\u01B0\u01A1ng t\xE1c g\u1EA7n \u0111\xE2y "),ku=c(" C\xE0ng nhi\u1EC1u t\u01B0\u01A1ng t\xE1c, k\xE9o d\xE0i trong nhi\u1EC1u ng\xE0y c\xE0ng th\u1EC3 hi\u1EC7n s\u1EF1 quan t\xE2m c\u1EE7a Kh\xE1ch h\xE0ng "),wu={class:"card-content"},Au={class:"list media-list"},Du={class:"item-content"},Tu={class:"item-media"},Iu=["src"],$u={key:1,class:"f7-icons",style:{"font-size":"40px"}},Uu={class:"item-inner"},xu={class:"item-title-row"},Su={class:"item-header"},Ru={class:"item-text"};function Pu(e,t,l,u,a,d){const h=s("f7-card-header"),g=s("f7-block-header"),v=s("f7-card"),_=s("f7-pie-chart"),E=s("f7-block"),m=s("f7-link"),y=s("f7-nav-right"),C=s("f7-navbar"),A=s("user-info"),k=s("f7-page"),$=s("f7-popup");return r(),b(P,null,[n(v,null,{default:i(()=>[n(h,{"bg-color":"blue"},{default:i(()=>[Jc]),_:1}),n(g,null,{default:i(()=>[eu]),_:1}),o("div",tu,[nu,o("div",iu,[o("button",{class:"button button-large button-round button-fill color-green",onClick:t[0]||(t[0]=x=>d.refreshData())},"Refresh")]),ou]),o("div",au,[o("ul",null,[(r(!0),b(P,null,F(a.items,x=>(r(),b("li",{key:x.id},[o("a",{onClick:T=>d.selected(x.id),class:"item-link item-content chevron-center"},[o("div",lu,[o("i",ru,p(d.logoOS(x)),1)]),o("div",du,[o("div",cu,[o("div",uu,p(e.$utils.actionMessage(x.lastAction.type,x.lastAction.time)),1),o("div",pu,p(x.lastAction.totalActions),1)]),x.userInfo?(r(),b("div",hu,p(x.userInfo.name),1)):w("",!0),o("div",_u,[mu,o("span",null,p(x.deviceCode),1),c(" \u0111\xE3 t\u01B0\u01A1ng t\xE1c "+p(x.lastAction.totalActions)+" l\u1EA7n, "+p(d.actionInfo(x.deviceInfo)),1)])])],8,su)]))),128))])])]),_:1}),n(E,{strong:""},{default:i(()=>[n(_,{tooltip:"",datasets:a.datasets},null,8,["datasets"])]),_:1}),n($,{opened:a.popupOpened,"tablet-fullscreen":!0},{default:i(()=>[n(k,null,{default:i(()=>[n(C,null,{default:i(()=>[n(y,null,{default:i(()=>[n(m,{onClick:t[1]||(t[1]=x=>d.closeItem())},{default:i(()=>[fu]),_:1})]),_:1})]),_:1}),o("div",gu,[o("div",vu,[o("i",bu,p(d.logoOS(a.item)),1),c("M\xE3 thi\u1EBFt b\u1ECB: "+p(a.item.deviceCode),1)]),o("div",Cu,[n(A,{data:a.userInfo,onUpdateData:d.updateUserInfo},null,8,["data","onUpdateData"])])]),o("div",yu,[n(h,{"bg-color":"blue"},{default:i(()=>[Eu]),_:1}),n(g,null,{default:i(()=>[ku]),_:1}),o("div",wu,[o("div",Au,[o("ul",null,[(r(!0),b(P,null,F(a.actionHistory,x=>(r(),b("li",{key:x.id},[o("div",Du,[o("div",Tu,[x.type=="NFC"||x.type=="CLICK"?(r(),b("img",{key:0,src:e.$utils.actionIcon(x.type),width:"40"},null,8,Iu)):(r(),b("i",$u,p(e.$utils.actionIcon(x.type)),1))]),o("div",Uu,[o("div",xu,[o("div",Su,p(e.$utils.actionMessage(x.type,x.time)),1)]),o("div",Ru,p(x.data?x.data.title:""),1)])])]))),128))])])])])]),_:1})]),_:1},8,["opened"])],64)}var Fe=N(Xc,[["render",Pu]]);const Nu={props:{src:String,icon:Boolean,cropper:Boolean,cancelText:{type:String,default:"Cancel"},doneText:{type:String,default:"Done"},viewportType:{type:String,default:"circle"},viewportWidth:{type:Number,default:320},viewportHeight:{type:Number,default:320},cropWidth:{type:Number,default:320},cropHeight:{type:Number,default:320}},emits:["file"],setup(e,{emit:t}){const l=ce(null),u=({file:d,fileContent:h})=>{let g;function v(){g.setZoom(g._currentZoom)}const _=U.popup.create({backdrop:U.$(l.value).parents(".popup").length===0,content:`
            <div class="popup popup-avatar-picker popup-tablet-fullscreen theme-dark">
              <div class="view view-init">
                <div class="page">
                  <div class="popup-avatar-picker-image-crop"></div>
                  <div class="popup-avatar-picker-toolbar toolbar tabbar toolbar-bottom no-hairline no-shadow">
                    <div class="toolbar-inner">
                      <a href="#" class="link popup-close" data-popup=".popup-avatar-picker">${e.cancelText}</a>
                      <a href="#" class="link popup-avatar-picker-crop-image">${e.doneText}</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          `.trim(),on:{open(){const E=ue.Croppie||ue;g=new E(_.$el.find(".popup-avatar-picker-image-crop")[0],{enableZoom:!0,enforceBoundary:!0,showZoomer:!0,enableExif:!0,viewport:{width:e.viewportWidth,height:e.viewportHeight,type:e.viewportType}}),g.bind({url:h,zoom:0}),_.$el.find("a.popup-avatar-picker-crop-image").on("click",()=>{g.result({type:"base64",size:{width:e.cropWidth,height:e.cropHeight},format:"png"}).then(m=>{t("file",{file:d,fileContent:m})}),_.close()}),U.on("resize",v)},closed(){U.off("resize",v),setTimeout(()=>{_.destroy(),g.destroy()},100)}}});_.open()};return{elRef:l,onFileChange:d=>{const h=d.target,g=h.files[0];if(g.type.indexOf("image")===0){const v=new window.FileReader;v.onload=_=>{e.cropper?(u({file:g,fileContent:_.target.result}),h.value=null):t("file",{file:g,fileContent:_.target.result})},v.readAsDataURL(g)}}}}},qu=["src"],Bu=o("i",{class:"icon f7-icons if-not-md"},"camera_fill",-1),Lu=o("i",{class:"icon f7-icons if-md"},"camera",-1);function Qu(e,t,l,u,a,d){return r(),b("div",{class:"avatar-picker",ref:u.elRef},[l.src?(r(),b("img",{key:0,src:l.src},null,8,qu)):w("",!0),o("label",null,[o("input",{type:"file",accept:"image/png,image/gif,image/jpeg",onChange:t[0]||(t[0]=(...h)=>u.onFileChange&&u.onFileChange(...h))},null,32),l.icon?(r(),b(P,{key:0},[Bu,Lu],64)):w("",!0)]),_e(e.$slots,"default")],512)}var Oe=N(Nu,[["render",Qu]]);const Fu={props:{src:String,icon:Boolean},computed:{imageUrl(){return this.src||""}}},Ou={class:"avatar-picker"},Vu=["src"];function Mu(e,t,l,u,a,d){return r(),b("div",Ou,[l.src?(r(),b("img",{key:0,src:l.src},null,8,Vu)):w("",!0),_e(e.$slots,"default")])}var ge=N(Fu,[["render",Mu]]);const Hu={name:"QRSALE",components:{ListPeople:qe,Slide:Qe,UserActions:Fe,AvatarPicker:Oe,Avatar:ge},props:{f7route:Object,f7router:Object,id:Number,privateCode:String,isPopup:Boolean},emits:["closeItem"],setup(){},data(){let e={photo:"",firstName:"",middleName:"",lastName:"",organization:"",title:"",note:"",nickname:"",namePrefix:"",nameSuffix:"",gender:"",workPhone:"",homePhone:"",cellPhone:"",email:"",workEmail:"",facebook:"",zalo:"",linkedIn:"",twitter:"",momo:""},t={id:0,title:"Th\u1EBB Thi\u1EBFt l\u1EADp",cardType:"CARD_TYPE.COMPANY_NAMECARD",imageUrls:[],productId:0,supportId:111,ownerOrganizationId:0,status:"NOT_GENERATED",metadata:{vCard:e,company:{enable:!1,title:"",name:"",address:"",role:""},introduction:{enable:!1,title:"Gi\u1EDBi thi\u1EC7u v\u1EC1 s\u1EA3n ph\u1EA9m, d\u1ECBch v\u1EE5",content:"N\u1ED9i dung"},qrcall:{enable:!0,title:"G\u1ECDi l\u1EA1i cho t\xF4i",name:"Quang",phoneNumber:"02800224088",workTime:"gi\u1EDD h\xE0nh ch\xEDnh"}}},l={title:"Danh thi\u1EBFp c\xF4ng ty 4.0",desc:"\xC1p d\u1EE5ng c\xF4ng ngh\u1EC7 4.0 \xE1p d\u1EE5ng cho Danh thi\u1EBFp, n\xE2ng t\u1EA7m Th\u01B0\u01A1ng hi\u1EC7u v\xE0 nhi\u1EC1u gi\xE1 tr\u1ECB c\u1ED1t l\xF5i c\u1EE7a Doanh nghi\u1EC7p",imageUrl:"",icon:"",features:[{title:"Ni\u1EC1m tin t\u1EEB kh\xE1ch h\xE0ng"},{title:"Chuy\xEAn nghi\u1EC7p trong Kinh doanh"},{title:"Uy t\xEDn c\u1EE7a nh\xE2n vi\xEAn"}]},u=ne.socialUrls,a=ne.props;return{item:t,vCard:e,payments:[],ecommerce:[],banks:[],bank:{tenNganHang:"",tenTaikhoan:"",soTaiKhoan:"",chinhanh:""},imageUrl:"",slide:l,actions:[],src:"http://apps.vinaas.com/file/tgs5EFo1O",urls:u,props:a,listPayments:ne.payments,listEcommerce:ne.ecommerce}},computed:{isActive(){return this.item.status=="QRID_STATUS.ACTIVE"||this.item.status=="ACTIVE"},getNFCUrl(){if(this.id>0&&this.privateCode.length>4)return`https://www.qrcare.vn/nfc/${this.id}/p/${this.privateCode.slice(0,4)}`},getQRCODEUrl(){if(this.id>0&&this.privateCode.length>=4)return`https://www.qrcare.vn/n/${this.id}/p/${this.privateCode.slice(0,2)}`},discount(){return this.metadata&&this.metadata.discount?this.metadata.discount:{enable:!1}},isDemo(){return this.item.supportId==111||this.item.supportId=="888"},textChucDanh(){return this.isDemo?"m\u1ED9t ng\u01B0\u1EDDi b\u1EA1n...":"gi\xE1m \u0111\u1ED1c, ch\u1EE7 t\u1ECBch, tr\u01B0\u1EDFng ph\xF2ng,..."}},watch:{id:"getDeviceData"},methods:{copyNFC(){navigator.clipboard.writeText(this.getNFCUrl),U.dialog.alert("Success to clipboard","iCard")},copyURL(){if(this.id>0&&this.privateCode.length>=4){let e=`https://www.qrcare.vn/url/${this.id}/p/${this.privateCode.slice(0,2)}`;navigator.clipboard.writeText(e),U.dialog.alert("Success to clipboard","iCard")}},copyQRCODE(){if(this.id>0&&this.privateCode.length>=4){let e=`https://www.qrcare.vn/n/${this.id}/p/${this.privateCode.slice(0,2)}`;navigator.clipboard.writeText(e),U.dialog.alert("Success to clipboard","iCard")}},async onFile(e){const{file:t,fileContent:l}=e;console.log("bao"),console.log({file:t,fileContent:l});var u=this.dataURItoBlob(l);const a=new FormData;a.append("canvasImage",u);try{let d="https://media.vinaas.com/upload/qrcare-vn";const{data:h}=await this.$axios.post(d,a,{headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"}});if(h&&h.id){const g="https://apps.vinaas.com/file/"+h.id;this.imageUrl=g,this.item.imageUrls[0]=g}}catch(d){console.log("err",d)}finally{}},dataURItoBlob(e){var t;e.split(",")[0].indexOf("base64")>=0?t=atob(e.split(",")[1]):t=unescape(e.split(",")[1]);for(var l=e.split(",")[0].split(":")[1].split(";")[0],u=new Uint8Array(t.length),a=0;a<t.length;a++)u[a]=t.charCodeAt(a);return new Blob([u],{type:l})},closeItem(){this.$emit("closeItem")},async getDeviceData(){if(this.id<=0)return;let e=await this.$api.getQRID(this.id,this.privateCode);e&&(console.log("rs",e),this.item=e,this.item.metadata&&(this.vCard=this.item.metadata.vcard||{},this.payments=this.item.metadata.payments||{},this.ecommerce=this.item.metadata.ecommerce||{}),this.item.metadata||(this.item.metadata={}),this.item.metadata.introduction||(this.item.metadata.introduction={enable:!1,title:"",content:""}),this.item.imageUrls&&this.item.imageUrls[0]?this.imageUrl=this.item.imageUrls[0]:this.imageUrl="https://apps.vinaas.com/file/tgs5EFo1O",this.isPopup||this.$api.OwnerAction(this.id,this.privateCode))},syncData(){this.item.ownerName=this.vCard.lastName+" "+this.vCard.firstName,this.item.ownerPhoneNumber=this.vCard.homePhone},async updateData(){if(this.item.status=="NOT_GENERATED")return await this.initData();this.item.status="QRID_STATUS.ACTIVE",this.item.metadata.vcard=this.vCard,this.item.metadata.payments=this.payments,this.item.metadata.ecommerce=this.ecommerce,this.syncData(),await this.$api.updateQRSaleInfo(this.id,this.item,this.privateCode),U.dialog.alert("SUCCESS updateData()","iCard");var e=await this.$api.getVcard(this.id,this.privateCode.substring(0,2));console.log("vCard",this.id,this.privateCode.substring(0,2),e)},async initData(){console.log("initData()",this.id,this.privateCode,this.item);let e=await this.$api.initCard(this.id,this.privateCode,this.item);e&&(U.dialog.alert("Kh\u1EDFi t\u1EA1o th\xE0nh c\xF4ng","iCard"),this.item=e)},updateItem(e){}},async mounted(){await this.getDeviceData()}},ve=e=>(ee("data-v-1eaeee58"),e=e(),te(),e),zu=c("Th\u1EBB Thi\u1EBFt l\u1EADp c\xE1 nh\xE2n"),Ku=c("Close"),ju=ve(()=>o("div",{style:{"text-align":"center"}},"H\xECnh \u0111\u1EA1i di\u1EC7n",-1)),Yu=c("Th\xF4ng tin c\xE1 nh\xE2n"),Gu=c("Li\xEAn k\u1EBFt c\xE1 nh\xE2n"),Wu={class:"list no-hairlines-md"},Zu={key:0,class:"item-media"},Xu=["src"],Ju={key:1,class:"item-media"},ep={class:"f7-icons size-40"},tp={class:"item-inner"},np={class:"item-title item-label"},ip={class:"item-input-wrap"},op=["placeholder","onUpdate:modelValue"],ap=ve(()=>o("span",{class:"input-clear-button"},null,-1)),sp=c("Thanh to\xE1n c\xE1 nh\xE2n"),lp={class:"list no-hairlines-md"},rp={key:0,class:"item-media"},dp=["src"],cp={key:1,class:"item-media"},up={class:"f7-icons size-40"},pp={class:"item-inner"},hp={class:"item-title item-label"},_p={class:"item-input-wrap"},mp=["placeholder","onUpdate:modelValue"],fp=ve(()=>o("span",{class:"input-clear-button"},null,-1)),gp=c("Hi\u1EC3n th\u1ECB N\u01A1i l\xE0m vi\u1EC7c"),vp=c("Gi\u1EDBi thi\u1EC7u "),bp=c("v\u1EC1 c\xF4ng vi\u1EC7c, s\u1EA3n ph\u1EA9m d\u1ECBch v\u1EE5 \u0111ang kinh doanh, d\u1EF1 \xE1n \u0111ang tham gia,... "),Cp=c("C\u1EADp nh\u1EADt"),yp=c("Kh\u1EDFi t\u1EA1o"),Ep=c("Copy link to setup or share"),kp=c("NFC"),wp=c("URL"),Ap=c("QRCODE");function Dp(e,t,l,u,a,d){const h=s("f7-nav-title"),g=s("f7-link"),v=s("f7-nav-right"),_=s("f7-navbar"),E=s("avatar-picker"),m=s("f7-card-header"),y=s("f7-list-input"),C=s("f7-list"),A=s("f7-block-title"),k=s("f7-card"),$=s("f7-toggle"),x=s("f7-card-content"),T=s("f7-block-header"),D=s("f7-text-editor"),B=s("f7-button"),Q=s("f7-col"),S=s("f7-row"),G=s("f7-block"),K=s("user-actions"),H=s("slide"),j=s("f7-page");return r(),f(j,null,{default:i(()=>[n(_,{sliding:!1},{default:i(()=>[n(h,{sliding:""},{default:i(()=>[zu]),_:1}),l.isPopup?(r(),f(v,{key:0},{default:i(()=>[n(g,{onClick:t[0]||(t[0]=q=>d.closeItem())},{default:i(()=>[Ku]),_:1})]),_:1})):w("",!0)]),_:1}),o("div",null,[n(E,{class:"avatar-center",src:a.imageUrl,icon:"",cropper:"",onFile:d.onFile},null,8,["src","onFile"]),ju]),n(k,null,{default:i(()=>[n(m,{"bg-color":"green"},{default:i(()=>[Yu]),_:1}),n(C,{"no-hairlines-md":""},{default:i(()=>[o("li",null,[n(y,{type:"text",outline:"",label:"T\xEAn","floating-label":"",maxlength:"50",required:"","clear-button":"",value:a.vCard.firstName,"onUpdate:value":t[1]||(t[1]=q=>a.vCard.firstName=q)},null,8,["value"]),n(y,{type:"text",outline:"",label:"H\u1ECD (tu\u1EF3 ch\u1ECDn)","floating-label":"",info:"kh\xF4ng nh\u1EADp c\u0169ng \u0111\u01B0\u1EE3c",maxlength:"50","clear-button":"",value:a.vCard.lastName,"onUpdate:value":t[2]||(t[2]=q=>a.vCard.lastName=q)},null,8,["value"])]),n(y,{outline:"",type:"text",label:"Chuy\xEAn m\xF4n | Ch\u1EE9c danh (t\u1EF1 phong)","floating-label":"",resizable:"",placeholder:"m\u1ED9t ng\u01B0\u1EDDi b\u1EA1n",info:d.textChucDanh,maxlength:"50","clear-button":"",value:a.vCard.title,"onUpdate:value":t[3]||(t[3]=q=>a.vCard.title=q)},null,8,["info","value"]),n(y,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i c\xE1 nh\xE2n","floating-label":"",type:"text",placeholder:"",pattern:"[0-9]*","clear-button":"",value:a.vCard.homePhone,"onUpdate:value":t[4]||(t[4]=q=>a.vCard.homePhone=q)},null,8,["value"])]),_:1}),n(A,null,{default:i(()=>[Gu]),_:1}),o("div",Wu,[o("ul",null,[(r(!0),b(P,null,F(a.props,q=>(r(),b("li",{class:"item-content item-input",key:q.name},[q.icon.includes(".")?(r(),b("div",Zu,[o("img",{src:q.icon,width:"30"},null,8,Xu)])):(r(),b("div",Ju,[o("i",ep,p(q.icon),1)])),o("div",tp,[o("div",np,p(q.name),1),o("div",ip,[L(o("input",{type:"text",placeholder:q.placeholder,"onUpdate:modelValue":z=>a.vCard[q.name]=z},null,8,op),[[Y,a.vCard[q.name]]]),ap])])]))),128))])]),n(A,null,{default:i(()=>[sp]),_:1}),o("div",lp,[o("ul",null,[(r(!0),b(P,null,F(a.listPayments,q=>(r(),b("li",{class:"item-content item-input",key:q.name},[q.icon.includes(".")?(r(),b("div",rp,[o("img",{src:q.icon,width:"30"},null,8,dp)])):(r(),b("div",cp,[o("i",up,p(q.icon),1)])),o("div",pp,[o("div",hp,p(q.name),1),o("div",_p,[L(o("input",{type:"text",placeholder:q.placeholder,"onUpdate:modelValue":z=>a.payments[q.name]=z},null,8,mp),[[Y,a.payments[q.name]]]),fp])])]))),128))])]),w("",!0)]),_:1}),e.$utils.isOrganization(a.item)?(r(),f(k,{key:0},{default:i(()=>[n(m,{"bg-color":"blue"},{default:i(()=>[gp,n($,{checked:a.item.metadata.company.enable,"onUpdate:checked":t[5]||(t[5]=q=>a.item.metadata.company.enable=q)},null,8,["checked"])]),_:1}),n(x,null,{default:i(()=>[L(n(C,{"no-hairlines-md":""},{default:i(()=>[n(y,{outline:"",type:"text",label:"T\xEAn c\xF4ng ty","floating-label":"",resizable:"",maxlength:"100","clear-button":"",value:a.item.metadata.company.name,"onUpdate:value":t[6]||(t[6]=q=>a.item.metadata.company.name=q)},null,8,["value"]),n(y,{outline:"",type:"text",label:"\u0110\u1ECBa ch\u1EC9 l\xE0m vi\u1EC7c","floating-label":"",resizable:"",maxlength:"200","clear-button":"",value:a.item.metadata.company.address,"onUpdate:value":t[7]||(t[7]=q=>a.item.metadata.company.address=q)},null,8,["value"]),n(y,{outline:"",type:"text",label:"Ch\u1EE9c danh","floating-label":"",resizable:"",maxlength:"100","clear-button":"",value:a.item.metadata.company.title,"onUpdate:value":t[8]||(t[8]=q=>a.item.metadata.company.title=q)},null,8,["value"]),n(y,{outline:"",type:"email",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i c\xF4ng ty ","floating-label":"",resizable:"",maxlength:"100","clear-button":"",value:a.vCard.workPhone,"onUpdate:value":t[9]||(t[9]=q=>a.vCard.workPhone=q)},null,8,["value"]),n(y,{outline:"",type:"email",label:"Email c\xF4ng ty ","floating-label":"",resizable:"",maxlength:"100","clear-button":"",value:a.vCard.workEmail,"onUpdate:value":t[10]||(t[10]=q=>a.vCard.workEmail=q)},null,8,["value"])]),_:1},512),[[V,a.item.metadata.company.enable]])]),_:1})]),_:1})):w("",!0),n(k,null,{default:i(()=>[n(m,{"bg-color":"blue"},{default:i(()=>[vp,n($,{checked:a.item.metadata.introduction.enable,"onUpdate:checked":t[11]||(t[11]=q=>a.item.metadata.introduction.enable=q)},null,8,["checked"])]),_:1}),n(x,null,{default:i(()=>[L(n(C,{"no-hairlines-md":""},{default:i(()=>[n(y,{outline:"",type:"text",label:"C\xF4ng vi\u1EC7c hi\u1EC7n t\u1EA1i","floating-label":"",resizable:"",maxlength:"50","clear-button":"",value:a.item.metadata.introduction.title,"onUpdate:value":t[12]||(t[12]=q=>a.item.metadata.introduction.title=q)},null,8,["value"]),n(T,null,{default:i(()=>[bp]),_:1}),n(D,{placeholder:"Enter text...",buttons:[["bold","italic","underline"],["orderedList","unorderedList"],["paragraph","h3","h4"],["link","image"]],value:a.item.metadata.introduction.content,"onTexteditor:change":t[13]||(t[13]=q=>a.item.metadata.introduction.content=q)},null,8,["value"])]),_:1},512),[[V,a.item.metadata.introduction.enable]])]),_:1})]),_:1}),n(G,null,{default:i(()=>[n(S,null,{default:i(()=>[n(Q,{width:"100"},{default:i(()=>[d.isActive?(r(),f(B,{key:0,fill:"",round:"",large:"",onClick:t[14]||(t[14]=q=>d.updateData())},{default:i(()=>[Cp]),_:1})):(r(),f(B,{key:1,fill:"",round:"",large:"",onClick:t[15]||(t[15]=q=>d.updateData())},{default:i(()=>[yp]),_:1}))]),_:1})]),_:1})]),_:1}),n(G,null,{default:i(()=>[n(T,null,{default:i(()=>[Ep]),_:1}),n(S,null,{default:i(()=>[n(Q,null,{default:i(()=>[d.getNFCUrl?(r(),f(B,{key:0,large:"",onClick:t[16]||(t[16]=q=>d.copyNFC())},{default:i(()=>[kp]),_:1})):w("",!0)]),_:1}),n(Q,null,{default:i(()=>[d.getNFCUrl?(r(),f(B,{key:0,large:"",onClick:t[17]||(t[17]=q=>d.copyURL())},{default:i(()=>[wp]),_:1})):w("",!0)]),_:1}),n(Q,null,{default:i(()=>[d.getNFCUrl?(r(),f(B,{key:0,large:"",onClick:t[18]||(t[18]=q=>d.copyQRCODE())},{default:i(()=>[Ap]),_:1})):w("",!0)]),_:1})]),_:1})]),_:1}),d.isActive?(r(),f(K,{key:1,qrid:l.id,privateCode:l.privateCode},null,8,["qrid","privateCode"])):w("",!0),n(H,{id:100010010960005,privateCode:122131,initInfo:a.slide},null,8,["initInfo"])]),_:1})}var Ve=N(Hu,[["render",Dp],["__scopeId","data-v-1eaeee58"]]);const Tp={data(){return{logo:"/assets/favicon.png",banner:"/assets/visitcard-vinaas.png",name:"T\xEAn c\u1EEDa h\xE0ng, qu\xE1n x\xE1, ph\xF2ng giao d\u1ECBch, c\xF4ng ty",shortName:"T\xEAn v\u1EAFn t\u1EAFt",address:"\u0110\u1ECBa ch\u1EC9 c\u1EE7a c\u1EEDa h\xE0ng kh\xF4ng d\xE0i q\xFAa 2 h\xE0ng",content:"Gi\u1EDBi thi\u1EC7u t\u1ED5ng quan v\u1EC1 c\u1EEDa h\xE0ng, l\u0129nh v\u1EF1c kinh doanh,... n\u1ED9i dung ch\u1EE9a h\xECnh \u1EA3nh, link,... \u0111\u01B0\u1EE3c nh\u1EADp b\u1EB1ng text-editor v\xE0 kh\xF4ng qu\xE1 300 t\u1EEB"}}},Ip=e=>(ee("data-v-0e01b05a"),e=e(),te(),e),$p={class:"card demo-facebook-card"},Up={class:"card-header"},xp={class:"demo-facebook-avatar"},Sp=["src"],Rp={class:"demo-facebook-name"},Pp={class:"demo-facebook-date"},Np={class:"card-content"},qp=["src"],Bp=["innerHTML"],Lp=Ip(()=>o("div",{class:"card-footer"},[o("a",{href:"#",class:"link"},"Website"),o("a",{href:"#",class:"link"},"Facebook"),o("a",{href:"#",class:"link"},"T\xECm \u0111\u01B0\u1EDDng")],-1));function Qp(e,t,l,u,a,d){return r(),b("div",$p,[o("div",Up,[o("div",xp,[o("img",{src:a.logo,width:"50",height:"50"},null,8,Sp)]),o("div",Rp,p(a.name),1),o("div",Pp,p(a.address),1)]),o("div",Np,[o("img",{src:a.banner},null,8,qp),o("div",{style:{padding:"5px"},innerHTML:a.content},null,8,Bp)]),Lp])}var Fp=N(Tp,[["render",Qp],["__scopeId","data-v-0e01b05a"]]);const Op={data(){return{icon:"/assets/favicon.png",image:"/assets/favicon.png",imageUrls:[],title:"Ti\xEAu \u0111\u1EC1 c\u1EE7a n\u1ED9i dung",subTitle:"sub title ",content:"Gi\u1EDBi thi\u1EC7u t\u1ED5ng quan v\u1EC1 c\u1EEDa h\xE0ng, l\u0129nh v\u1EF1c kinh doanh,... n\u1ED9i dung ch\u1EE9a h\xECnh \u1EA3nh, link,... \u0111\u01B0\u1EE3c nh\u1EADp b\u1EB1ng text-editor v\xE0 kh\xF4ng qu\xE1 300 t\u1EEB",link:""}}},Vp=e=>(ee("data-v-10bf5a4e"),e=e(),te(),e),Mp={class:"card demo-card"},Hp={class:"card-content"},zp=Vp(()=>o("div",{class:"edit"},[o("a",{href:"#"},[o("i",{class:"fa fa-pencil fa-lg"})])],-1)),Kp=["src"],jp={class:"block-title demo-name block-title-medium"},Yp={class:"block-title demo-name"},Gp=["innerHTML"],Wp={class:"card-footer"},Zp=["href"];function Xp(e,t,l,u,a,d){return r(),b("div",Mp,[o("div",Hp,[zp,o("img",{src:a.image},null,8,Kp),o("div",jp,p(a.title),1),o("div",Yp,p(a.subTitle),1),o("div",{innerHTML:a.content},null,8,Gp)]),o("div",Wp,[o("a",{href:a.link,class:"link"},"Chi ti\u1EBFt",8,Zp)])])}var Jp=N(Op,[["render",Xp],["__scopeId","data-v-10bf5a4e"]]);const eh={emits:["clickAction"],props:{text:String,link:String,icon:String,name:String,isView:{type:Boolean,default:!0}},methods:{clickAction(e){this.$emit("clickAction",e),this.isView?this.link&&(U.dialog.alert(this.link),window.location=this.link):U.dialog.alert("Edit Action"+e)}}},th={class:"icon f7-icons"},nh={class:"i-icon"};function ih(e,t,l,u,a,d){return r(),b("button",{onClick:t[0]||(t[0]=h=>d.clickAction(l.name)),class:"button button-large button-round button-outline istand-btn"},[o("i",th,p(l.icon),1),o("span",nh,p(l.text),1)])}var oh=N(eh,[["render",ih],["__scopeId","data-v-2218e065"]]);const ah={emits:["updated"],props:{id:Number,title:String,subTitle:String,imageUrl:String,content:String},data(){return{enablePopup:!1,data:{id:-1,title:"",subTitle:"",imageUrl:"",content:""}}},methods:{closePopup(){this.enablePopup=!1},showPopup(){this.data.id=this.id,this.enablePopup=!0},save(){this.$emit("updated",this.data),this.enablePopup=!1}}},sh=c(" Edit "),lh=c("Close"),rh={class:"list"},dh={class:"item-content item-input"},ch={class:"item-inner"},uh=o("div",{class:"item-title item-label"},"Title popup",-1),ph={class:"item-input-wrap"},hh=o("span",{class:"input-clear-button"},null,-1),_h={class:"item-content item-input"},mh={class:"item-inner"},fh=o("div",{class:"item-title item-label"},"SubTitle Popup",-1),gh={class:"item-input-wrap"},vh=o("span",{class:"input-clear-button"},null,-1),bh={class:"item-content item-input"},Ch=["src"],yh={class:"item-inner"},Eh=o("div",{class:"item-title item-label"},"Popup Image",-1),kh={class:"item-input-wrap"},wh=o("span",{class:"input-clear-button"},null,-1),Ah={class:"item-content item-input"};function Dh(e,t,l,u,a,d){const h=s("f7-button"),g=s("f7-link"),v=s("f7-nav-right"),_=s("f7-navbar"),E=s("f7-text-editor"),m=s("f7-page"),y=s("f7-popup");return r(),b(P,null,[n(h,{col:"",onClick:t[0]||(t[0]=C=>d.showPopup())},{default:i(()=>[sh]),_:1}),n(y,{id:"istand-right-bottom-button",opened:a.enablePopup,"onUpdate:opened":t[7]||(t[7]=C=>a.enablePopup=C)},{default:i(()=>[n(m,null,{default:i(()=>[n(_,{title:"Update Data"},{default:i(()=>[n(v,null,{default:i(()=>[n(g,{onClick:t[1]||(t[1]=C=>d.closePopup())},{default:i(()=>[lh]),_:1})]),_:1})]),_:1}),o("div",rh,[o("ul",null,[o("li",dh,[o("div",ch,[uh,o("div",ph,[L(o("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=C=>a.data.title=C)},null,512),[[Y,a.data.title]]),hh])])]),o("li",_h,[o("div",mh,[fh,o("div",gh,[L(o("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=C=>a.data.subTitle=C)},null,512),[[Y,a.data.subTitle]]),vh])])]),o("li",bh,[o("img",{src:a.data.imageUrl,style:{"max-width":"100%",height:"auto"}},null,8,Ch),o("div",yh,[Eh,o("div",kh,[L(o("input",{type:"text",placeholder:"http(s)://","onUpdate:modelValue":t[4]||(t[4]=C=>a.data.imageUrl=C)},null,512),[[Y,a.data.imageUrl]]),wh])])]),o("li",Ah,[n(E,{placeholder:"Content",buttons:[["bold","italic","underline"],["orderedList","unorderedList"],["paragraph","h3","h4"]],value:a.data.content,"onTexteditor:change":t[5]||(t[5]=C=>a.data.content=C)},null,8,["value"])]),o("li",null,[o("button",{class:"button button-fill",onClick:t[6]||(t[6]=C=>d.save())}," Save & Close ")])])])]),_:1})]),_:1},8,["opened"])],64)}var Th=N(ah,[["render",Dh]]);const Ih={emits:["clickAction","update"],components:{iButton:oh,iPopup:Th},props:{enable:{type:Boolean,default:!0},isView:{type:Boolean,default:!0},Info:Object,refreshIndex:{type:Number,default:0}},computed:{showActions(){return this.actions.filter(e=>e.enable)},isURLAction(e){return!(e&&e!="URL")}},watch:{refreshIndex(e){this.actions=this.Info||[]}},methods:{popupUpdated(e){if(console.log("popupUpdated",e),e.id>-1){for(const[t,l]of Object.entries(e))if(t!="id"){let u="POPUP_"+t;this.actions[e.id][u]=l}console.log("actions",this.actions)}},saveEdit(){this.$emit("update",this.actions)},closePopup(){this.enablePopup=!1},showEdit(){this.enablePopup=!0},clickAction(e,t,l=""){this.isView?e&&t?this.$emit("clickAction",{name:e,url:t,text:l}):U.dialog.alert(`Ch\u01B0a thi\u1EBFt l\u1EADp Url cho ${e}`):this.showEdit()}},data(){return{types:[{name:"URL",value:"URL"},{name:"POPUP",value:"POPUP"},{name:"CALL",value:"CALL"}],enablePopup:!1,actions:[{name:"action_1",enable:!1,valueType:"URL",icon:"house",url:"https://icard.qrcare.vn",text:"click 1"},{name:"action_2",enable:!1,valueType:"URL",icon:"phone-fill",url:"",text:"click 2"},{name:"action_3",enable:!1,valueType:"CALL",icon:"phone",url:"",text:"click 3"},{name:"action_4",enable:!1,valueType:"POPUP",icon:"phone",url:"",text:"click 4"},{name:"action_5",enable:!1,icon:"phone",url:"",text:"click 5"}]}},mounted(){U.colorPicker.create({inputEl:"#demo-color-picker-wheel",targetEl:"#demo-color-picker-wheel-value",targetElSetBackgroundColor:!0,modules:["wheel"],openIn:"popover",value:{hex:"#00ff00"}})}},W=e=>(ee("data-v-69ef6a44"),e=e(),te(),e),$h={class:""},Uh={class:"block",style:{margin:"0px"}},xh={key:0,class:"content-edit"},Sh=W(()=>o("i",{class:"icon f7-icons"},"pencil",-1)),Rh=[Sh],Ph={class:"block-content",style:{padding:"10px"}},Nh={class:"list no-hairlines"},qh={style:{background:"none",border:"none"}},Bh=["onClick"],Lh={key:0,class:"block-footer"},Qh=c("Close"),Fh={class:"card-header"},Oh={style:{"padding-right":"10px"}},Vh={class:"list",style:{"margin-top":"10px"}},Mh={class:"button button-large button-round button-fill"},Hh={class:"item-content item-input"},zh={class:"item-inner"},Kh=W(()=>o("div",{class:"item-title item-label"},"Ti\xEAu \u0111\u1EC1 c\u1EE7a Action",-1)),jh={class:"item-input-wrap"},Yh=["onUpdate:modelValue"],Gh=W(()=>o("span",{class:"input-clear-button"},null,-1)),Wh={class:"item-content item-input"},Zh={class:"item-inner"},Xh=W(()=>o("div",{class:"item-title item-label"},"Link truy c\u1EADp",-1)),Jh={class:"item-input-wrap"},e_=["onUpdate:modelValue"],t_=W(()=>o("span",{class:"input-clear-button"},null,-1)),n_={class:"item-content item-input"},i_={class:"item-inner"},o_=W(()=>o("div",{class:"item-title item-label"},"Link truy c\u1EADp",-1)),a_={class:"item-input-wrap"},s_=["onUpdate:modelValue"],l_=W(()=>o("span",{class:"input-clear-button"},null,-1)),r_={class:"item-content item-input"},d_={class:"item-inner"},c_=W(()=>o("div",{class:"item-title item-label"},"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i",-1)),u_={class:"item-input-wrap"},p_=["onUpdate:modelValue"],h_=W(()=>o("span",{class:"input-clear-button"},null,-1)),__={class:"item-content item-input"},m_={class:"block"};function f_(e,t,l,u,a,d){const h=s("f7-link"),g=s("f7-nav-right"),v=s("f7-navbar"),_=s("f7-toggle"),E=s("i-popup"),m=s("f7-page"),y=s("f7-popup");return r(),b(P,null,[o("div",$h,[o("div",Uh,[l.isView?w("",!0):(r(),b("div",xh,[o("a",{onClick:t[0]||(t[0]=C=>d.showEdit())},Rh)])),o("div",Ph,[o("div",Nh,[o("ul",qh,[(r(!0),b(P,null,F(d.showActions,C=>(r(),b("li",{key:C.name},[o("button",{onClick:A=>d.clickAction(C.name,C.url,C.text),class:"button button-large button-round button-fill istand-btn"},p(C.text),9,Bh)]))),128))])]),l.isView?w("",!0):(r(),b("div",Lh,"Minh ho\u1EA1 m\u1ED9t s\u1ED1 h\xE0nh \u0111\u1ED9ng, cho ph\xE9p thay \u0111\u1ED5i theo nhu c\u1EA7u."))])])]),n(y,{opened:a.enablePopup,"onUpdate:opened":t[3]||(t[3]=C=>a.enablePopup=C),"tablet-fullscreen":!0},{default:i(()=>[n(m,null,{default:i(()=>[n(v,{title:"Update Data"},{default:i(()=>[n(g,null,{default:i(()=>[n(h,{onClick:t[1]||(t[1]=C=>d.closePopup())},{default:i(()=>[Qh]),_:1})]),_:1})]),_:1}),(r(!0),b(P,null,F(a.actions,(C,A)=>(r(),b("div",{class:"card",key:C.name},[o("div",Fh,[o("span",Oh,"Action # "+p(A+1),1),n(_,{color:"blue",checked:C.enable,"onUpdate:checked":k=>C.enable=k},null,8,["checked","onUpdate:checked"])]),L(o("div",Vh,[o("ul",null,[o("li",null,[o("button",Mh,p(C.text),1)]),o("li",Hh,[o("div",zh,[Kh,o("div",jh,[L(o("input",{type:"text","onUpdate:modelValue":k=>a.actions[A].text=k},null,8,Yh),[[Y,a.actions[A].text]]),Gh])])]),L(o("li",Wh,[o("div",Zh,[Xh,o("div",Jh,[L(o("input",{type:"text",placeholder:"http(s)://","onUpdate:modelValue":k=>a.actions[A].url=k},null,8,e_),[[Y,a.actions[A].url]]),t_])])],512),[[V,!C.valueType]]),L(o("li",n_,[o("div",i_,[o_,o("div",a_,[L(o("input",{type:"text",placeholder:"http(s)://","onUpdate:modelValue":k=>a.actions[A].url=k},null,8,s_),[[Y,a.actions[A].url]]),l_])])],512),[[V,C.valueType=="URL"]]),L(o("li",r_,[o("div",d_,[c_,o("div",u_,[L(o("input",{type:"text",placeholder:"(84)9","onUpdate:modelValue":k=>a.actions[A].call=k},null,8,p_),[[Y,a.actions[A].call]]),h_])])],512),[[V,C.valueType=="CALL"]]),L(o("li",__,[n(E,{id:A,onUpdated:d.popupUpdated},null,8,["id","onUpdated"])],512),[[V,C.valueType=="POPUP"]])])],512),[[V,C.enable]])]))),128)),o("div",m_,[o("button",{class:"button button-large button-fill",onClick:t[2]||(t[2]=C=>d.saveEdit())},"Save")])]),_:1})]),_:1},8,["opened"])],64)}var Me=N(Ih,[["render",f_],["__scopeId","data-v-69ef6a44"]]);const g_={name:"App",data(){return{temp:{video_id:"3P1CnWI62Ik",loop:1},play:{video_id:"3P1CnWI62Ik",loop:1},width:400,height:320}},components:{YoutubeVue3:Ze.exports.YoutubeVue3},methods:{applyConfig(){this.play=Object.assign(this.play,this.temp)},playCurrentVideo(){this.$refs.youtube.player.playVideo()},stopCurrentVideo(){this.$refs.youtube.player.stopVideo()},pauseCurrentVideo(){this.$refs.youtube.player.pauseVideo()},onEnded(){console.log("## OnEnded")},onPaused(){console.log("## OnPaused")},onPlayed(){console.log("## OnPlayed")}},mounted(){this.width=this.$refs.youtubeBox.clientWidth,console.log("height:width",this.height,this.width)}},v_={class:"card"},b_={class:"card-content",ref:"youtubeBox"};function C_(e,t,l,u,a,d){const h=s("YoutubeVue3");return r(),b("div",v_,[o("div",b_,[n(h,{ref:"youtube",videoid:a.play.video_id,loop:a.play.loop,width:a.width,height:a.height,onEnded:d.onEnded,onPaused:d.onPaused,onPlayed:d.onPlayed},null,8,["videoid","loop","width","height","onEnded","onPaused","onPlayed"])],512)])}var y_=N(g_,[["render",C_]]);const E_=M({props:{f7route:Object,f7router:Object,id:Number,privateCode:String,index:Number},components:{IshopBanner:Fp,CardTemplate1:Jp,IstandButtons:Me,DemoYoutube:y_},setup(){},data(){return{data:{logo:"/assets/favicon.png",title:"Viet Nam Advanced Software Limited",address:"305 Hong Lac, 10 Ward, Tan Binh District",content:"What a nice photo i took yesterday!"},section1:{enable:!0,title:"Gi\u1EDD l\xE0m vi\u1EC7c",content:"",list:[{name:"2-6",text:"Th\u1EE9 2 - 6: S\xE1ng: 8AM - 12AM, Chi\u1EC1u 2PM - 5PM"},{name:"7-cn",text:"Th\u1EE9 7,CN - L\u1EC5: S\xE1ng: 8AM - 11AM"}]},qrid:{},vcardUrl:""}},methods:{clickAddContact(){}}}),k_={class:"page"},w_={class:"fab fab-left-bottom color-blue"},A_=["href"],D_=o("i",{class:"icon f7-icons"},"location_circle",-1),T_=[D_],I_={class:"fab fab-extended fab-center-bottom color-green"},$_=["href"],U_=o("i",{class:"icon f7-icons if-not-md"},"plus",-1),x_=o("i",{class:"icon material-icons md-only"},"add",-1),S_=o("div",{class:"fab-text"},"Danh B\u1EA1",-1),R_=[U_,x_,S_],P_={class:"page-content",style:{"padding-bottom":"150px"}},N_={key:0,class:"card"},q_={class:"card-header"},B_={class:"card-content"},L_={class:"list"},Q_={class:"item-content"},F_=ke('<div class="card"><div class="card-header">Thanh to\xE1n Online</div></div><div class="block"><div class="block-header">iShop v1.0</div><div class="block-content"></div></div>',2);function O_(e,t,l,u,a,d){const h=s("f7-icon"),g=s("f7-fab"),v=s("ishop-banner"),_=s("istand-buttons"),E=s("card-template1"),m=s("demo-youtube");return r(),b("div",k_,[o("div",w_,[o("a",{class:"external",href:e.vcardUrl,onClick:t[0]||(t[0]=y=>e.clickAddContact())},T_,8,A_)]),o("div",I_,[o("a",{class:"external",href:e.vcardUrl,onClick:t[1]||(t[1]=y=>e.clickAddContact())},R_,8,$_)]),n(g,{position:"right-bottom",color:"red",text:""},{default:i(()=>[n(h,{f7:"phone_fill"})]),_:1}),o("div",P_,[n(v),n(_),n(E),n(m),e.section1.enable?(r(),b("div",N_,[o("div",q_,p(e.section1.title),1),o("div",B_,[o("div",L_,[o("ul",null,[(r(!0),b(P,null,F(e.section1.list,y=>(r(),b("li",{key:y},[o("div",Q_,p(y.text),1)]))),128))])])])])):w("",!0),F_])])}var V_=N(E_,[["render",O_]]);const M_={emits:["update"],components:{Avatar:ge,AvatarPicker:Oe},props:{enable:{type:Boolean,default:!0},isView:{type:Boolean,default:!0},Info:Object,refreshIndex:{type:Number,default:0}},data(){return{enablePopup:!1,templateName:"iBlock1",data:{imageUrl:"",title:"",subTitle:"",subTitle2:""}}},watch:{refreshIndex(e){console.log("Lan update thu:"+e),this.data=this.Info,this.data.imageUrl||(this.data.imageUrl="/assets/favicon.png")}},methods:{closePopup(){this.enablePopup=!1},showEdit(){console.log("showEdit()"),this.enablePopup=!0},saveEdit(){this.$emit("update",this.data)},async onFile(e){const{file:t,fileContent:l}=e;console.log("bao"),console.log({file:t,fileContent:l});var u=this.dataURItoBlob(l);const a=new FormData;a.append("canvasImage",u);try{let d="https://media.vinaas.com/upload/qrcare-vn";const{data:h}=await this.$axios.post(d,a,{headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"}});if(h&&h.id){const g="https://apps.vinaas.com/file/"+h.id;this.data.imageUrl=g}}catch(d){console.log("err",d)}finally{}},dataURItoBlob(e){var t;e.split(",")[0].indexOf("base64")>=0?t=atob(e.split(",")[1]):t=unescape(e.split(",")[1]);for(var l=e.split(",")[0].split(":")[1].split(";")[0],u=new Uint8Array(t.length),a=0;a<t.length;a++)u[a]=t.charCodeAt(a);return new Blob([u],{type:l})}}},X=e=>(ee("data-v-0cc42136"),e=e(),te(),e),H_={key:0,class:"content-edit"},z_=X(()=>o("i",{class:"icon f7-icons"},"pencil",-1)),K_=[z_],j_={class:"block",style:{margin:"0px","padding-top":"20px"}},Y_={class:"block-content",style:{"text-align":"center"}},G_={class:"my-block-title"},W_={key:0,class:"subtitle"},Z_={key:1,class:"block-footer"},X_=c("Close"),J_={class:"page-content"},em=X(()=>o("div",{style:{"text-align":"center"}},"Click \u0111\u1EC3 c\u1EADp nh\u1EADt",-1)),tm={class:"list"},nm={class:"item-content item-input"},im={class:"item-inner"},om=X(()=>o("div",{class:"item-title item-label"},"Ti\xEAu \u0111\u1EC1 (Title)",-1)),am={class:"item-input-wrap"},sm=X(()=>o("span",{class:"input-clear-button"},null,-1)),lm={class:"item-content item-input"},rm={class:"item-inner"},dm=X(()=>o("div",{class:"item-title item-label"},"Sub Title",-1)),cm={class:"item-input-wrap"},um=X(()=>o("span",{class:"input-clear-button"},null,-1)),pm={class:"item-content item-input"},hm={class:"item-inner"},_m=X(()=>o("div",{class:"item-title item-label"},"subTitle 2",-1)),mm={class:"item-input-wrap"},fm=X(()=>o("span",{class:"input-clear-button"},null,-1)),gm={class:"block"};function vm(e,t,l,u,a,d){const h=s("avatar"),g=s("f7-link"),v=s("f7-nav-right"),_=s("f7-navbar"),E=s("avatar-picker"),m=s("f7-block"),y=s("f7-card"),C=s("f7-page"),A=s("f7-popup");return r(),b(P,null,[o("div",null,[l.isView?w("",!0):(r(),b("div",H_,[o("a",{onClick:t[0]||(t[0]=k=>d.showEdit())},K_)])),o("div",j_,[o("div",Y_,[n(h,{src:a.data.imageUrl,style:{margin:"auto",width:"50%",height:"50%"}},null,8,["src"]),o("div",G_,p(a.data.title),1),a.data.subTitle?(r(),b("div",W_,p(a.data.subTitle),1)):w("",!0),a.data.subTitle2?(r(),b("div",Z_,p(a.data.subTitle2),1)):w("",!0)])])]),n(A,{id:"block-one",opened:a.enablePopup,"onUpdate:opened":t[6]||(t[6]=k=>a.enablePopup=k),"tablet-fullscreen":!0},{default:i(()=>[n(C,null,{default:i(()=>[n(_,{title:"Update Info"},{default:i(()=>[n(v,null,{default:i(()=>[n(g,{onClick:t[1]||(t[1]=k=>d.closePopup())},{default:i(()=>[X_]),_:1})]),_:1})]),_:1}),o("div",J_,[n(m,{style:{margin:"0px"}},{default:i(()=>[n(E,{class:"avatar-center",src:a.data.imageUrl,icon:"",cropper:"",onFile:d.onFile,style:{margin:"auto",width:"50%",height:"50%"}},null,8,["src","onFile"]),em]),_:1}),n(y,null,{default:i(()=>[o("div",tm,[o("ul",null,[o("li",nm,[o("div",im,[om,o("div",am,[L(o("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=k=>a.data.title=k)},null,512),[[Y,a.data.title]]),sm])])]),o("li",lm,[o("div",rm,[dm,o("div",cm,[L(o("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=k=>a.data.subTitle=k)},null,512),[[Y,a.data.subTitle]]),um])])]),o("li",pm,[o("div",hm,[_m,o("div",mm,[L(o("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=k=>a.data.subTitle2=k)},null,512),[[Y,a.data.subTitle2]]),fm])])])])])]),_:1}),o("div",gm,[o("button",{class:"button button-large button-round button-fill",onClick:t[5]||(t[5]=k=>d.saveEdit())},"Save")])])]),_:1})]),_:1},8,["opened"])],64)}var bm=N(M_,[["render",vm],["__scopeId","data-v-0cc42136"]]);const Cm={props:{id:String,privateCode:String},components:{UserActions:Fe},data(){return{enablePopup:!1,qrid:"0",code:"0"}},methods:{closePopup(){this.enablePopup=!1},showPopup(){this.qrid=this.id,this.code=this.privateCode,this.enablePopup=!0}}},ym=c("Close");function Em(e,t,l,u,a,d){const h=s("f7-icon"),g=s("f7-fab"),v=s("f7-link"),_=s("f7-nav-right"),E=s("f7-navbar"),m=s("user-actions"),y=s("f7-page"),C=s("f7-popup");return r(),b(P,null,[n(g,{position:"right-bottom",color:"green",text:"",onClick:t[0]||(t[0]=A=>d.showPopup())},{default:i(()=>[n(h,{f7:"waveform"})]),_:1}),n(C,{id:"istand-right-bottom-button",opened:a.enablePopup,"onUpdate:opened":t[2]||(t[2]=A=>a.enablePopup=A)},{default:i(()=>[n(y,null,{default:i(()=>[n(E,{title:"L\u1ECBch s\u1EED t\u01B0\u01A1ng t\xE1c"},{default:i(()=>[n(_,null,{default:i(()=>[n(v,{onClick:t[1]||(t[1]=A=>d.closePopup())},{default:i(()=>[ym]),_:1})]),_:1})]),_:1}),n(m,{qrid:a.qrid,privateCode:a.code},null,8,["qrid","privateCode"])]),_:1})]),_:1},8,["opened"])],64)}var km=N(Cm,[["render",Em]]);const wm={emits:["addAddContact"],props:{id:String,privateCode:String,index:Number,cardType:String,lang:{type:String,default:"vn"}},data(){return{vCardFile:""}},computed:{isShow(){return this.cardType=="ICARD"}},methods:{closePopup(){this.enablePopup=!1},async showPopup(){this.vCardFile=await this.$api.getVcard(this.id,this.privateCode.substring(0,2)),console.log("vCard",this.id,this.privateCode.substring(0,2),this.vCardFile),this.enablePopup=!0},async clickAddContact(){this.$api.PersonAction(this.id,this.privateCode,"CONTACT",this.index,{title:"clickAddContact",content:"Them vao danh ba"}),this.closePopup()}}},Am={key:0,class:"fab fab-center-bottom color-blue"},Dm=o("i",{class:"icon f7-icons if-not-md"},"plus",-1),Tm=o("i",{class:"icon material-icons md-only"},"add",-1),Im=[Dm,Tm],$m=c("Close"),Um=o("div",{class:"block"},[o("div",{class:"block-title"},"C\xE1ch l\u01B0u v\xE0o danh b\u1EA1 tr\xEAn iOS")],-1),xm={key:0,class:"fab fab-extended fab-center-bottom color-blue"},Sm=["href"],Rm=o("i",{class:"icon f7-icons if-not-md"},"plus",-1),Pm=o("i",{class:"icon material-icons md-only"},"add",-1),Nm=o("div",{class:"fab-text"},null,-1),qm=[Rm,Pm,Nm];function Bm(e,t,l,u,a,d){const h=s("f7-link"),g=s("f7-nav-right"),v=s("f7-navbar"),_=s("f7-page"),E=s("f7-popup");return r(),b(P,null,[d.isShow?(r(),b("div",Am,[o("a",{onClick:t[0]||(t[0]=m=>d.showPopup())},Im)])):w("",!0),n(E,{id:"btn-add-contact",opened:e.enablePopup,"onUpdate:opened":t[3]||(t[3]=m=>e.enablePopup=m),"tablet-fullscreen":!0},{default:i(()=>[n(_,null,{default:i(()=>[n(v,{title:"Update Info"},{default:i(()=>[n(g,null,{default:i(()=>[n(h,{onClick:t[1]||(t[1]=m=>d.closePopup())},{default:i(()=>[$m]),_:1})]),_:1})]),_:1}),Um,a.vCardFile?(r(),b("div",xm,[o("a",{class:"external",href:a.vCardFile,onClick:t[2]||(t[2]=m=>d.clickAddContact())},qm,8,Sm)])):w("",!0)]),_:1})]),_:1},8,["opened"])],64)}var Lm=N(wm,[["render",Bm]]);const Qm={props:{id:String,privateCode:String},components:{},data(){return{enablePopup:!1,selectIndex:1,code:""}},computed:{genID(){if(this.code){let e=this.code.slice(0,3),t=this.selectIndex.toString().padStart(4,"0");return`${this.id}.${t}-${e}`.substring(11)}else return"Ch\u01B0a c\xF3 privateCode"}},watch:{selectIndex(e){e>0&&this.updateCode()}},methods:{closePopup(){this.enablePopup=!1},async showPopup(){await this.updateCode(),this.enablePopup=!0},async updateCode(){let e=await this.$api.getPrivateCode(this.id,this.selectIndex,this.privateCode);e&&(this.code=e.privateCode||"")},async copyNFC(){if(this.selectIndex>0&&this.code.length>4){let e=`https://www.qrcare.vn/infc/${this.id}/i/${this.selectIndex}/p/${this.code.substring(0,4)}`;navigator.clipboard.writeText(e),U.dialog.alert("Success to clipboard","iStand")}else U.dialog.alert("Error on get NFC Url")},async copyQRCode(){if(this.selectIndex>0&&this.code.length>4){let e=`https://www.qrcare.vn/id/${this.id}/i/${this.selectIndex}/p/${this.code.substring(0,3)}`;navigator.clipboard.writeText(e),U.dialog.alert("Success to clipboard","iStand")}else U.dialog.alert("Error on get Url")},async copyLINK(){if(this.selectIndex>0&&this.code.length>4){let e=`https://www.qrcare.vn/id-url/${this.id}/i/${this.selectIndex}/p/${this.code.substring(0,3)}`;navigator.clipboard.writeText(e),U.dialog.alert("Success to clipboard","iStand")}else U.dialog.alert("Error on get Url")}}},Fm={class:"card"},Om=c("Close"),Vm={class:"block block-strong"},Mm={class:"block-title"},Hm={class:"block-footer"},zm={class:"list no-hairlines"},Km={class:"item-content"},jm={class:"block-title"},Ym={class:"item-content"},Gm=o("small",null,"Index",-1),Wm={class:"stepper stepper-fill stepper-round stepper-init"},Zm=o("div",{class:"stepper-button-minus"},null,-1),Xm={class:"stepper-input-wrap"},Jm=o("div",{class:"stepper-button-plus"},null,-1),ef={class:"row",style:{"margin-top":"15px"}},tf=c("NFC"),nf=c("QRCode"),of=c("Share");function af(e,t,l,u,a,d){const h=s("f7-link"),g=s("f7-nav-right"),v=s("f7-navbar"),_=s("f7-button"),E=s("f7-page"),m=s("f7-popup");return r(),b(P,null,[o("div",Fm,[o("a",{class:"button button-round",onClick:t[0]||(t[0]=y=>d.showPopup())},"Get Urls")]),n(m,{id:"istand",opened:a.enablePopup,"onUpdate:opened":t[6]||(t[6]=y=>a.enablePopup=y),"tablet-fullscreen":!0},{default:i(()=>[n(E,null,{default:i(()=>[n(v,{title:"Update Info"},{default:i(()=>[n(g,null,{default:i(()=>[n(h,{onClick:t[1]||(t[1]=y=>d.closePopup())},{default:i(()=>[Om]),_:1})]),_:1})]),_:1}),o("div",Vm,[o("div",Mm,"QRID: "+p(l.id),1),o("div",Hm,"PrivateCode: "+p(l.privateCode),1),o("div",zm,[o("ul",null,[o("li",Km,[o("div",jm,p(d.genID),1)]),o("li",Ym,[Gm,o("div",Wm,[Zm,o("div",Xm,[L(o("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=y=>a.selectIndex=y),min:"1",max:"999",step:"1"},null,512),[[Y,a.selectIndex]])]),Jm])]),o("li",ef,[n(_,{"col-20":"",fill:"",round:"",large:"",onClick:t[3]||(t[3]=y=>d.copyNFC())},{default:i(()=>[tf]),_:1}),n(_,{"col-30":"",fill:"",round:"",large:"",onClick:t[4]||(t[4]=y=>d.copyQRCode())},{default:i(()=>[nf]),_:1}),n(_,{"col-40":"",fill:"",round:"",large:"",onClick:t[5]||(t[5]=y=>d.copyLINK())},{default:i(()=>[of]),_:1})])])])])]),_:1})]),_:1},8,["opened"])],64)}var sf=N(Qm,[["render",af]]);const lf={data(){return{enablePopup:!1,id:"100010010680004",privateCode:"14504942",navbar:"iStand v1.2",title:"C\xE1ch s\u1EED d\u1EE5ng iStand",sections:[{title:"Ch\u1EA1m NFC tr\xEAn iOS",subTitle:"iPhone X tr\u1EDF l\xEAn",content:"Ch\u1EA1m v\xE0o m\u1EB7t sau, tr\xEAn \u0111\u1EC9nh, k\u1EC1 ph\u1EA7n camera trong 2,3 gi\xE2y",button:{text:"",icon:"",url:""}},{title:"Ch\u1EA1m NFC tr\xEAn iPhone 7,8",subTitle:"",content:"",button:{text:"",icon:"",url:""}}]}},methods:{closePopup(){this.enablePopup=!1},showPopup(){},async loadData(){}}},rf={class:"block",style:{margin:"0px","padding-bottom":"50px"}},df={class:"block-content",style:{"text-align":"center"}},cf={class:"block-footer"},uf=c("Close"),pf={class:"block strong"},hf={class:"block-title"},_f=["innerHTML"];function mf(e,t,l,u,a,d){const h=s("f7-link"),g=s("f7-nav-right"),v=s("f7-navbar"),_=s("f7-card-header"),E=s("f7-card"),m=s("f7-page"),y=s("f7-popup");return r(),b(P,null,[o("div",rf,[o("div",df,[o("a",{onClick:t[0]||(t[0]=C=>d.showPopup())},[o("div",cf,p(a.navbar),1)])])]),n(y,{opened:a.enablePopup,"onUpdate:opened":t[2]||(t[2]=C=>a.enablePopup=C),"tablet-fullscreen":!0},{default:i(()=>[n(m,null,{default:i(()=>[n(v,{title:a.navbar},{default:i(()=>[n(g,null,{default:i(()=>[n(h,{onClick:t[1]||(t[1]=C=>d.closePopup())},{default:i(()=>[uf]),_:1})]),_:1})]),_:1},8,["title"]),(r(!0),b(P,null,F(a.sections,(C,A)=>(r(),f(E,{key:A},{default:i(()=>[n(_,null,{default:i(()=>[c(p(C.title),1)]),_:2},1024),o("div",pf,[o("div",hf,p(C.subTitle),1),o("div",{innerHTML:C.content},null,8,_f)])]),_:2},1024))),128))]),_:1})]),_:1},8,["opened"])],64)}var ff=N(lf,[["render",mf]]);const gf={props:{src:String,icon:Boolean,cropper:Boolean,cancelText:{type:String,default:"Cancel"},doneText:{type:String,default:"Done"},viewportType:{type:String,default:"circle"},viewportWidth:{type:Number,default:320},viewportHeight:{type:Number,default:320},cropWidth:{type:Number,default:800},cropHeight:{type:Number,default:800}},emits:["file"],setup(e,{emit:t}){const l=ce(null),u=({file:d,fileContent:h})=>{let g;function v(){g.setZoom(g._currentZoom)}const _=U.popup.create({backdrop:U.$(l.value).parents(".popup").length===0,content:`
            <div class="popup popup-avatar-picker popup-tablet-fullscreen theme-dark">
              <div class="view view-init">
                <div class="page">
                  <div class="popup-avatar-picker-image-crop"></div>
                  <div class="popup-avatar-picker-toolbar toolbar tabbar toolbar-bottom no-hairline no-shadow">
                    <div class="toolbar-inner">
                      <a href="#" class="link popup-close" data-popup=".popup-avatar-picker">${e.cancelText}</a>
                      <a href="#" class="link popup-avatar-picker-crop-image">${e.doneText}</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          `.trim(),on:{open(){const E=ue.Croppie||ue;g=new E(_.$el.find(".popup-avatar-picker-image-crop")[0],{enableZoom:!0,enforceBoundary:!0,showZoomer:!0,enableExif:!0,viewport:{width:e.viewportWidth,height:e.viewportHeight,type:e.viewportType}}),g.bind({url:h,zoom:0}),_.$el.find("a.popup-avatar-picker-crop-image").on("click",()=>{g.result({type:"base64",size:{width:e.cropWidth,height:e.cropHeight},format:"png"}).then(m=>{t("file",{file:d,fileContent:m})}),_.close()}),U.on("resize",v)},closed(){U.off("resize",v),setTimeout(()=>{_.destroy(),g.destroy()},100)}}});_.open()};return{elRef:l,onFileChange:d=>{const h=d.target,g=h.files[0];if(g.type.indexOf("image")===0){const v=new window.FileReader;v.onload=_=>{e.cropper?(u({file:g,fileContent:_.target.result}),h.value=null):t("file",{file:g,fileContent:_.target.result})},v.readAsDataURL(g)}}}}},vf=o("i",{class:"icon f7-icons if-not-md"},"camera_fill",-1),bf=o("i",{class:"icon f7-icons if-md"},"camera",-1);function Cf(e,t,l,u,a,d){return r(),b("div",{class:"avatar-picker",ref:u.elRef},[o("label",null,[o("input",{type:"file",accept:"image/png,image/gif,image/jpeg",onChange:t[0]||(t[0]=(...h)=>u.onFileChange&&u.onFileChange(...h))},null,32),l.icon?(r(),b(P,{key:0},[vf,bf],64)):w("",!0)]),_e(e.$slots,"default")],512)}var yf=N(gf,[["render",Cf]]);const Ef={components:{BlockOne:bm,IstandRightBtn:km,IstandUrl:sf,IstandButton:Me,InfoIstand:ff,ImagePicker:yf,AddContactBtn:Lm},props:{f7route:Object,f7router:Object,id:{type:String,default:"100010010686068"},privateCode:{type:String,default:"1213123"},index:{type:String,default:"0"},isView:{type:Boolean,default:!0},accessType:String},methods:{showToastIcon(){this.toastIcon||(this.toastIcon=U.toast.create({icon:$theme.ios||$theme.aurora?'<i class="f7-icons">star_fill</i>':'<i class="material-icons">star</i>',text:"I'm with icon",position:"center",closeTimeout:2e3})),this.toastIcon.open()},closePopup(){this.enablePopup=!1},clickAction(e){console.log("clickAction",e);let t=e.url,l=e.name,u=e.text;if(l=="zalo"&&!value.includes("zalo")&&(t="https://zalo.me/"+value),l=="email"){this.clickMail(t);return}this.$api.PersonAction(this.id,this.privateCode,"CLICK",this.index,{title:`${u}`,content:JSON.stringify(e)}),window.open(t)},showEdit(){this.enablePopup=!0},async updateInfo(e){this.data.standInfo=e,await this.updateData()},async updateActions(e){this.data.actions=e,await this.updateData()},async updateData(){if(this.status=="QRID_STATUS.GENERATED")return await this.initData();let e={metadata:this.data},t=await this.$api.updateISale(this.id,this.privateCode,e);console.log("updated",t),U.dialog.alert("SUCCESS updateData()")},async initData(){let e={status:"QRID_STATUS.ACTIVE",metadata:this.data};console.log("initData()",this.id,this.privateCode,e);let t=await this.$api.initCard(this.id,this.privateCode,e);t&&(U.dialog.alert("Kh\u1EDFi t\u1EA1o th\xE0nh c\xF4ng"),this.item=t)},async onFile(e){let t=await this.$utils.onFile(e);t?(this.data.backgroundUrl=t,await this.updateData()):U.dialog.alert("upload file faild")},async loadData(){let e=await this.$api.getIDocument(this.id,this.index,this.privateCode);e&&this.status==e.status,e&&e.metadata&&(this.data=he(he({},this.data),e.metadata),console.log("data",this.data),e.metadata.standInfo?this.data.standInfo=e.metadata.standInfo:this.data.standInfo={title:"T\xEAn s\u1EF1 ki\u1EC7n",subTitle:"\u0111\u1ECBa \u0111i\u1EC3m t\u1ED5 ch\u1EE9c",subTitle2:"th\u1EDDi gian di\u1EC5n ra s\u1EF1 ki\u1EC7n"},e.metadata.actions?this.data.actions=e.metadata.actions:(e.metadata.redirectUrl&&e.metadata.redirectUrl,this.data.actions=[{name:"action_1",enable:!0,icon:"phone-fill",url:"",text:"\u0110\u0103ng k\xFD tham gia"},{name:"action_2",enable:!0,icon:"phone-fill",url:"",text:"Chi ti\u1EBFt s\u1EF1 ki\u1EC7n"},{name:"action_3",enable:!0,icon:"phone",url:"",text:"Danh s\xE1ch kh\xE1ch m\u1EDDi"},{name:"action_4",enable:!1,icon:"phone",url:"",text:"click 4"},{name:"action_5",enable:!1,icon:"phone",url:"",text:"click 5"}]),this.data.backgroundUrl||(this.data.backgroundUrl="https://apps.vinaas.com/file/2D0CABmx3"),this.isView&&this.accessType&&this.$api.PersonAction(this.id,this.privateCode,this.accessType,this.index)),e.metadata==null&&(console.log("loadData",e),this.data.standInfo={title:"T\xEAn s\u1EF1 ki\u1EC7n",subTitle:"\u0111\u1ECBa \u0111i\u1EC3m t\u1ED5 ch\u1EE9c",subTitle2:"th\u1EDDi gian di\u1EC5n ra s\u1EF1 ki\u1EC7n"},this.data.actions=[{name:"action_1",enable:!0,icon:"phone-fill",url:"",text:"\u0110\u0103ng k\xFD tham gia"},{name:"action_2",enable:!0,icon:"phone-fill",url:"",text:"Chi ti\u1EBFt s\u1EF1 ki\u1EC7n"},{name:"action_3",enable:!0,icon:"phone",url:"",text:"Danh s\xE1ch kh\xE1ch m\u1EDDi"},{name:"action_4",enable:!1,icon:"phone",url:"",text:"click 4"},{name:"action_5",enable:!1,icon:"phone",url:"",text:"click 5"}],this.data.backgroundUrl="https://apps.vinaas.com/file/2D0CABmx3"),this.refreshIndex++}},data(){return{toastIcon:null,enablePopup:!1,selectIndex:1,refreshIndex:0,status:"",data:{title:"",backgroundUrl:"",standInfo:{imageUrl:"",title:"tieu de",subTitle:"",subTitle2:""},actions:[]}}},async mounted(){await this.loadData()}},kf={class:"page"},wf=c("Th\u1EBB Thi\u1EBFt l\u1EADp"),Af={class:"page-content"},Df={key:0,class:"content-edit"},Tf={class:"demo-content"};function If(e,t,l,u,a,d){const h=s("f7-nav-title"),g=s("f7-navbar"),v=s("f7-icon"),_=s("f7-fab"),E=s("istand-right-btn"),m=s("add-contact-btn"),y=s("image-picker"),C=s("block-one"),A=s("istand-button"),k=s("info-istand"),$=s("istand-url");return r(),b("div",kf,[l.isView?w("",!0):(r(),f(g,{key:0,sliding:!1},{default:i(()=>[n(h,{sliding:""},{default:i(()=>[wf]),_:1})]),_:1})),l.isView?w("",!0):(r(),f(_,{key:1,position:"right-bottom",color:"green",text:"",onClick:t[0]||(t[0]=x=>e.showHistory())},{default:i(()=>[n(v,{f7:"waveform"})]),_:1})),l.isView?w("",!0):(r(),f(E,{key:2,id:l.id,privateCode:l.privateCode},null,8,["id","privateCode"])),n(m,{id:l.id,privateCode:l.privateCode},null,8,["id","privateCode"]),o("div",Af,[o("div",{class:"demo-wrap",style:Ae("--bg-image: url("+a.data.backgroundUrl+")")},[l.isView?w("",!0):(r(),b("div",Df,[n(y,{icon:"",onFile:d.onFile},null,8,["onFile"])])),o("div",Tf,[n(C,{Info:a.data.standInfo,refreshIndex:a.refreshIndex,isView:l.isView,onUpdate:d.updateInfo},null,8,["Info","refreshIndex","isView","onUpdate"]),n(A,{Info:a.data.actions,refreshIndex:a.refreshIndex,isView:l.isView,onUpdate:d.updateActions,onClickAction:d.clickAction},null,8,["Info","refreshIndex","isView","onUpdate","onClickAction"]),n(k)])],4),l.isView?w("",!0):(r(),f($,{key:0,id:l.id,privateCode:l.privateCode},null,8,["id","privateCode"]))])])}var re=N(Ef,[["render",If],["__scopeId","data-v-629bd9e2"]]);const $f=M({emits:["closeItem"],components:{iShop:V_,iStand:re},props:{f7route:Object,f7router:Object,id:{type:String,default:"100010010680001"},privateCode:{type:String,default:"92417923"},index:{type:String,default:"0"},isView:{type:Boolean,default:!1},accessType:String},setup(){},data(){return{data:{logo:"/assets/favicon.png",title:"Viet Nam Advanced Software Limited",address:"305 Hong Lac, 10 Ward, Tan Binh District"},section1:{enable:!0,title:"Gi\u1EDD l\xE0m vi\u1EC7c",content:"",list:[{name:"2-6",text:"Th\u1EE9 2 - 6: S\xE1ng: 8AM - 12AM, Chi\u1EC1u 2PM - 5PM"},{name:"7-cn",text:"Th\u1EE9 7,CN - L\u1EC5: S\xE1ng: 8AM - 11AM"}]},qrid:{},vcardUrl:""}},methods:{clickAddContact(){}}});function Uf(e,t,l,u,a,d){const h=s("i-stand");return r(),f(h,{id:e.id,privateCode:e.privateCode,index:e.index,isView:e.isView,accessType:"SCAN"},null,8,["id","privateCode","index","isView"])}var He=N($f,[["render",Uf]]);const xf=M({components:{EditCard:Ve,DemoPage:He},props:{f7route:Object,f7router:Object},data(){return{name:"Th\u1EBB Thi\u1EBFt l\u1EADp C\xF4ng ty",id:parseInt(this.f7route.params.id),privateCode:this.f7route.params.privateCode,selectedId:0,selectedCode:this.f7route.params.privateCode,data:{title:"",cardType:"CARD_TYPE.COMPANY_NAMECARD",status:"",ownerOrganizationId:0,metadata:{}},project:{},namecards:[],popupOpened:!1}},setup(){},computed:{isActive(){return this.data.status=="QRID_STATUS.ACTIVE"||this.data.status}},methods:{async showItem(e){console.log("click showItem()",e,e.id,e.private),this.selectedId=e.id,this.selectedCode=e.private.toString(),this.popupOpened=!0},closeItem(){console.log("setup close"),this.popupOpened=!1},async loadData(){this.$utils.is_setup(this.id)||(U.dialog.alert("Kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp!"),this.f7router.navigate("/"));try{let e=await this.$api.verifyCard(this.id,this.privateCode);e&&(console.log(e.status),e.status=="INVALID_PRIVATE"?this.f7router.navigate("/"):e.status=="NOT_GENERATED"?this.data=e:(this.data=await this.$api.getQRID(this.id,this.privateCode),this.namecards=await this.$api.getQRIDsOfSetup(this.id,this.privateCode)))}catch(e){U.dialog.alert("Kh\xF4ng c\xF3 quy\u1EC1n truy c\u1EADp!")}},async updateData(){if(this.data.status=="NOT_GENERATED"){U.dialog.alert("Th\u1EBB ch\u01B0a \u0111\u01B0\u1EE3c kh\u1EDFi t\u1EA1o");return}this.data.status=="QRID_STATUS.GENERATED"&&(this.data.activatedDate=new Date,this.data.status="QRID_STATUS.ACTIVE"),await this.$api.updateQRSaleInfo(this.id,this.data,this.privateCode)&&U.dialog.alert("SUCCESS updateData()")},async initData(){console.log("initData()",this.id,this.privateCode,this.data);let e=await this.$api.initCard(this.id,this.privateCode,this.data);e&&(U.dialog.alert("Kh\u1EDFi t\u1EA1o th\xE0nh c\xF4ng"),this.data=e)}},async mounted(){await this.loadData()}}),Sf=c("Close"),Rf={key:0,class:"content"},Pf=c("Th\xF4ng tin qu\u1EA3n l\xFD"),Nf=c("Kh\u1EDFi t\u1EA1o"),qf={key:1,class:"content"},Bf=c("Th\xF4ng tin qu\u1EA3n l\xFD"),Lf=c("C\u1EADp nh\u1EADt"),Qf=c("Danh thi\u1EBFp \u0111ang qu\u1EA3n l\xFD");function Ff(e,t,l,u,a,d){const h=s("f7-nav-title"),g=s("f7-link"),v=s("f7-nav-right"),_=s("f7-navbar"),E=s("f7-card-header"),m=s("f7-list-input"),y=s("f7-button"),C=s("f7-list-item"),A=s("f7-list"),k=s("f7-card"),$=s("f7-card-content"),x=s("f7-page"),T=s("edit-card"),D=s("f7-popup");return r(),b(P,null,[n(x,null,{default:i(()=>[n(_,{sliding:!1},{default:i(()=>[n(h,{sliding:""},{default:i(()=>[c(p(e.name),1)]),_:1}),e.isPopup?(r(),f(v,{key:0},{default:i(()=>[n(g,{onClick:t[0]||(t[0]=B=>e.closeItem())},{default:i(()=>[Sf]),_:1})]),_:1})):w("",!0)]),_:1}),e.data.status=="NOT_GENERATED"?(r(),b("div",Rf,[n(k,null,{default:i(()=>[n(E,{"bg-color":"green"},{default:i(()=>[Pf]),_:1}),n(A,{"no-hairlines-md":""},{default:i(()=>[n(m,{outline:"",label:"CardType","floating-label":"",type:"text",disabled:"",value:e.data.cardType,"onUpdate:value":t[1]||(t[1]=B=>e.data.cardType=B)},null,8,["value"]),n(m,{outline:"",label:"Tr\u1EA1ng th\xE1i","floating-label":"",type:"text",disabled:"",value:e.data.status,"onUpdate:value":t[2]||(t[2]=B=>e.data.status=B)},null,8,["value"]),n(m,{type:"text",outline:"",label:"T\xEAn ","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"100","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:e.data.ownerName,"onUpdate:value":t[3]||(t[3]=B=>e.data.ownerName=B)},null,8,["value"]),n(m,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1 cu\u1ED1i",pattern:"[0-9]*","clear-button":"",value:e.data.ownerPhoneNumber,"onUpdate:value":t[4]||(t[4]=B=>e.data.ownerPhoneNumber=B)},null,8,["value"]),n(m,{outline:"",label:"ID c\xF4ng ty","floating-label":"",type:"number",pattern:"[0-9]*","clear-button":"",value:e.data.ownerOrganizationId,"onUpdate:value":t[5]||(t[5]=B=>e.data.ownerOrganizationId=B)},null,8,["value"]),n(m,{outline:"",type:"textarea",label:"\u0110\u1ECBa ch\u1EC9","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:e.data.ownerAddress,"onUpdate:value":t[6]||(t[6]=B=>e.data.ownerAddress=B)},null,8,["value"]),n(C,null,{default:i(()=>[n(y,{fill:"",large:"",outline:"",onClick:t[7]||(t[7]=B=>e.initData())},{default:i(()=>[Nf]),_:1})]),_:1})]),_:1})]),_:1})])):(r(),b("div",qf,[n(k,null,{default:i(()=>[n(E,{"bg-color":"green"},{default:i(()=>[Bf]),_:1}),n(A,{"no-hairlines-md":""},{default:i(()=>[n(m,{type:"text",outline:"",label:"T\xEAn ","floating-label":"",placeholder:"ng\u1EAFn g\u1ECDn, v\xED d\u1EE5 a qu\xE2n/c ng\u1ECDc)",info:"\u0111\u1EC3 ti\u1EC7n x\u01B0ng h\xF4",maxlength:"100","error-message":"kh\xF4ng \u0111\u01B0\u1EE3c b\u1ECF tr\u1ED1ng!",required:"","clear-button":"",value:e.data.ownerName,"onUpdate:value":t[8]||(t[8]=B=>e.data.ownerName=B)},null,8,["value"]),n(m,{outline:"",label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (tu\u1EF3 ch\u1ECDn)","floating-label":"",type:"text",placeholder:"nh\u1EADp t\u1ED1i thi\u1EC3u 6 s\u1ED1 cu\u1ED1i",pattern:"[0-9]*","clear-button":"",value:e.data.ownerPhoneNumber,"onUpdate:value":t[9]||(t[9]=B=>e.data.ownerPhoneNumber=B)},null,8,["value"]),n(m,{outline:"",type:"textarea",label:"\u0110\u1ECBa ch\u1EC9","floating-label":"",resizable:"",placeholder:"nh\u1EADp t\u1ED1i \u0111a 100 k\xFD t\u1EF1",maxlength:"100","clear-button":"",value:e.data.ownerAddress,"onUpdate:value":t[10]||(t[10]=B=>e.data.ownerAddress=B)},null,8,["value"]),n(C,null,{default:i(()=>[n(y,{fill:"",large:"",outline:"",onClick:t[11]||(t[11]=B=>e.updateData())},{default:i(()=>[Lf]),_:1})]),_:1})]),_:1})]),_:1}),n(k,null,{default:i(()=>[n(E,{"bg-color":"blue"},{default:i(()=>[Qf]),_:1}),n($,null,{default:i(()=>[n(A,{"media-list":""},{default:i(()=>[(r(!0),b(P,null,F(e.namecards,B=>(r(),f(C,{key:B.id,onClick:Q=>e.showItem(B),header:B.status,title:B.ownerName,subtitle:e.$utils.formatQRID(B.id),text:"Kh\u1EDFi t\u1EA1o: "+e.$utils.formatDate(B.activatedDate)},null,8,["onClick","header","title","subtitle","text"]))),128))]),_:1})]),_:1})]),_:1})]))]),_:1}),n(D,{opened:e.popupOpened,"tablet-fullscreen":!0},{default:i(()=>[n(T,{id:e.selectedId,privateCode:e.selectedCode,isPopup:!0,onCloseItem:e.closeItem},null,8,["id","privateCode","onCloseItem"])]),_:1},8,["opened"])],64)}var Of=N(xf,[["render",Ff]]);const Vf={name:"QRNAMECARD",components:{Slide:Qe,Avatar:ge},props:{f7route:Object,f7router:Object,accessType:String,id:Number,privateCode:String,index:Number},setup(){},data(){let e={facebook:"https://",tiktok:"",skype:"https://",linkedIn:"https://",twitter:"https://",momo:"https://",qrcare:"https://"};return{item:{title:"",imageUrls:["https://apps.vinaas.com/file/tgs5EFo1O"],ownerName:"",ownerPhoneNumber:"",supportId:111,status:"GENERATED",metadata:{company:{enable:!1,title:"",address:"",name:"",role:""},introduction:{enable:!1,title:"",content:""}}},vCard:{photo:"",firstName:"",middleName:"",lastName:"",organization:"",title:"",note:"",nickname:"",namePrefix:"",nameSuffix:"",gender:"",workPhone:"",homePhone:"",cellPhone:"",email:"",workEmail:"",socialUrls:e,facebook:"",zalo:"",linkedIn:"",twitter:"",momo:""},socialUrls:e,namecard40:{title:"Danh thi\u1EBFp T\u01B0\u01A1ng t\xE1c 4.0",desc:"Mang s\u1EF1 tr\xE2n tr\u1ECDng v\xE0 chuy\xEAn nghi\u1EC7p, nh\u1EEFng gi\xE1 tr\u1ECB v\u1ED1n c\xF3 c\u1EE7a bi\u1EC3u t\u01B0\u1EE3ng Danh thi\u1EBFp",imageUrl:"",icon:"",features:[{title:"\u0110\u01A1n gi\u1EA3n m\xE0 Chuy\xEAn nghi\u1EC7p"},{title:"Ch\u1EA1m \u0111\u1EC3 k\u1EBFt n\u1ED1i, t\u01B0\u01A1ng t\xE1c"},{title:"D\u1EC5 d\xE0ng chia s\u1EBB qua zalo, facebook,..."}]},vCardFile:"",metadata:{vcard:{},payments:{},ecommerce:{}}}},computed:{background(){if(this.item.imageUrls)return this.item.imageUrls[0]||"https://apps.vinaas.com/file/tgs5EFo1O"},address(){if(this.metadata&&this.metadata.vcard)return this.metadata.vcard.address||""},vcardButtons(){let e=[],t=ne.props;for(var l in t){let u=t[l].name;u!="address"&&this.metadata.vcard&&this.metadata.vcard[u]&&e.push({name:u,icon:t[l].icon,value:this.metadata.vcard[u]})}return e},paymentsButtons(){let e=[],t=ne.payments;for(var l in t){let u=t[l].name;this.metadata.payments&&this.metadata.payments[u]&&e.push({name:u,icon:t[l].icon,value:this.metadata.payments[u]})}return e},ecommerceButtons(){let e=[],t=ne.ecommerce;for(var l in t){let u=t[l].name;this.metadata.ecommerce&&this.metadata.ecommerce[u]&&e.push({name:u,icon:t[l].icon,value:this.metadata.ecommerce[u]})}return e}},methods:{async clickAddContact(){this.$api.PersonAction(this.id,this.privateCode,"CONTACT",this.index,{title:"clickAddContact",content:"Them vao danh ba"})},clickCall(e){console.log("clickCall",e),this.$api.PersonAction(this.id,this.privateCode,"CALL",this.index,{title:"clickCall",content:"tel:"+e}),e&&(window.location="tel:"+e)},clickLink(e,t){let l=t;if(e=="zalo"&&!t.includes("zalo")&&(l="https://zalo.me/"+t),e=="email"){this.clickMail(l);return}this.$api.PersonAction(this.id,this.privateCode,"CLICK",this.index,{title:"click "+e,content:l}),window.open(l)},clickMail(e){console.log("mailto",e),this.$api.PersonAction(this.id,this.privateCode,"EMAIL",this.index,{title:"clickMail",content:"mailto: "+e}),e&&(window.location="mailto:"+e)},async getDeviceData(){let e=await this.$api.getQRID(this.id,this.privateCode);if(e){this.item=e,e.metadata&&e.metadata.vcard&&(this.metadata=e.metadata,this.vCard=e.metadata.vcard),this.item.metadata.company||(this.item.metadata.company={enable:!1,title:"",address:"",name:"",role:""}),this.item.metadata.introduction||(this.item.metadata.introduction={enable:!1,title:"",content:""}),this.item.metadata.qrcall||(this.item.metadata.qrcall={enable:!1,title:"G\u1ECDi l\u1EA1i cho t\xF4i",name:"Quang",phoneNumber:"",workTime:""});const t="vcard_"+this.id+"-"+this.privateCode.substring(0,2)+".vcf";this.vCardFile=`https://api.qrcare.net/api/Containers/vcard/download/${t}`,this.accessType&&this.$api.PersonAction(this.id,this.privateCode,this.accessType,this.index)}else console.log(e),U.dialog.alert("Danh thi\u1EBFp ch\u01B0a k\xEDch ho\u1EA1t"),this.f7router.navigate("/")},updateItem(e){}},async mounted(){await this.getDeviceData()}},Mf={class:"fab fab-extended fab-center-bottom color-blue"},Hf=["href"],zf=o("i",{class:"icon f7-icons if-not-md"},"plus",-1),Kf=o("i",{class:"icon material-icons md-only"},"add",-1),jf=o("div",{class:"fab-text"},"Contact",-1),Yf=[zf,Kf,jf],Gf={class:"page-content",style:{"padding-bottom":"100px"}},Wf={key:1,style:{"text-align":"center",margin:"10px"}},Zf=c("Th\xF4ng tin"),Xf=c("Information"),Jf={key:0,class:"row"},e1=["onClick"],t1=["src"],n1={key:1,class:"f7-icons size-28"},i1=c("Payment Information"),o1={key:2,class:"row"},a1=["onClick"],s1=["src"],l1={key:1,class:"f7-icons size-28"},r1=c("Shopping Online"),d1={key:4,class:"row"},c1=["onClick"],u1=["src"],p1={key:1,class:"f7-icons size-28"},h1=["innerHTML"];function _1(e,t,l,u,a,d){const h=s("f7-icon"),g=s("f7-fab"),v=s("avatar"),_=s("f7-block-title"),E=s("f7-block"),m=s("f7-card-header"),y=s("f7-card-content"),C=s("f7-card"),A=s("f7-page");return r(),f(A,{"no-navbar":!0},{default:i(()=>[o("div",Mf,[o("a",{class:"external",href:a.vCardFile,onClick:t[0]||(t[0]=k=>d.clickAddContact())},Yf,8,Hf)]),n(g,{position:"right-bottom",color:"green",text:"",onClick:t[1]||(t[1]=k=>d.clickCall(a.item.ownerPhoneNumber))},{default:i(()=>[n(h,{f7:"phone_fill"})]),_:1}),o("div",Gf,[n(E,null,{default:i(()=>[n(v,{src:d.background,style:{margin:"auto",width:"50%",height:"50%"}},null,8,["src"]),n(_,{style:{"text-align":"center",margin:"10px"},large:""},{default:i(()=>[c(p(a.vCard.lastName+" "+a.vCard.firstName),1)]),_:1}),a.vCard.title?(r(),f(_,{key:0,style:{"text-align":"center",margin:"10px"},medium:""},{default:i(()=>[c(p(a.vCard.title),1)]),_:1})):w("",!0),a.vCard.address?(r(),b("div",Wf,[o("span",null,p(a.vCard.address),1)])):w("",!0)]),_:1}),n(C,null,{default:i(()=>[e.lang=="vn"?(r(),f(m,{key:0,"bg-color":"green"},{default:i(()=>[Zf]),_:1})):(r(),f(m,{key:1,"bg-color":"green"},{default:i(()=>[Xf]),_:1})),n(y,null,{default:i(()=>[d.vcardButtons.length>0?(r(),b("div",Jf,[(r(!0),b(P,null,F(d.vcardButtons,k=>(r(),b("a",{key:k.name,class:"col-50 button button-round",onClick:$=>d.clickLink(k.name,k.value)},[k.icon.includes(".")?(r(),b("img",{key:0,src:k.icon,width:"30",style:{width:"30px",margin:"5px",display:"inline-block","vertical-align":"top"}},null,8,t1)):(r(),b("i",n1,p(k.icon),1)),o("span",null,p(k.name),1)],8,e1))),128))])):w("",!0),d.paymentsButtons.length>0?(r(),f(_,{key:1},{default:i(()=>[i1]),_:1})):w("",!0),d.paymentsButtons.length>0?(r(),b("div",o1,[(r(!0),b(P,null,F(d.paymentsButtons,k=>(r(),b("a",{key:k.name,class:"col-50 button button-round",onClick:$=>d.clickLink(k.name,k.value)},[k.icon.includes(".")?(r(),b("img",{key:0,src:k.icon,width:"30",style:{width:"30px",margin:"5px",display:"inline-block","vertical-align":"top"}},null,8,s1)):(r(),b("i",l1,p(k.icon),1)),o("span",null,p(k.name),1)],8,a1))),128))])):w("",!0),d.ecommerceButtons.length>0?(r(),f(_,{key:3},{default:i(()=>[r1]),_:1})):w("",!0),d.ecommerceButtons.length>0?(r(),b("div",d1,[(r(!0),b(P,null,F(d.ecommerceButtons,k=>(r(),b("a",{key:k.name,class:"col-50 button button-round",onClick:$=>d.clickLink(k.name,k.value)},[k.icon.includes(".")?(r(),b("img",{key:0,src:k.icon,width:"30",style:{width:"30px",margin:"5px",display:"inline-block","vertical-align":"top"}},null,8,u1)):(r(),b("i",p1,p(k.icon),1)),o("span",null,p(k.name),1)],8,c1))),128))])):w("",!0)]),_:1})]),_:1}),a.item.metadata.introduction.enable?(r(),f(C,{key:0},{default:i(()=>[n(m,{"bg-color":"blue",innerHTML:a.item.metadata.introduction.title},null,8,["innerHTML"]),n(y,null,{default:i(()=>[o("div",{innerHTML:a.item.metadata.introduction.content},null,8,h1)]),_:1})]),_:1})):w("",!0),a.item.metadata.company.enable?(r(),f(C,{key:1},{default:i(()=>[n(m,{"bg-color":"blue"},{default:i(()=>[c(p(a.item.metadata.company.title),1)]),_:1}),n(y,null,{default:i(()=>[n(E,{strong:""},{default:i(()=>[n(_,null,{default:i(()=>[c(p(a.item.metadata.company.name),1)]),_:1}),o("div",null," \u0110\u1ECBa ch\u1EC9: "+p(a.item.metadata.company.address),1)]),_:1})]),_:1})]),_:1})):w("",!0),n(E,null,{default:i(()=>[n(_,{style:{"text-align":"center"}},{default:i(()=>[c(" ID: "+p(l.id)+", PrivateCode: "+p(l.privateCode),1)]),_:1})]),_:1})])]),_:1})}var ae=N(Vf,[["render",_1]]);const m1={props:{f7route:Object,f7router:Object,accessType:String,id:Number,privateCode:String,index:Number},data(){return{data:{status:"",metadata:{}}}},computed:{isActive(){return this.data.status=="QRID_STATUS.ACTIVE"}},methods:{redirectTo(){this.data.metadata.redirectUrl},copyNFC(){},async getDeviceData(){let e=await this.$api.iCheck(this.id,this.index,this.privateCode,this.accessType);e&&(this.data=e,this.redirectTo())}},async mounted(){await this.getDeviceData()}},f1=c("Goto "),g1=c("Copy NFC");function v1(e,t,l,u,a,d){const h=s("f7-button"),g=s("f7-col"),v=s("f7-row"),_=s("f7-block"),E=s("f7-page");return r(),f(E,null,{default:i(()=>[n(_,null,{default:i(()=>[n(v,null,{default:i(()=>[n(g,{width:"100"},{default:i(()=>[d.isActive?(r(),f(h,{key:0,fill:"",round:"",large:"",onClick:t[0]||(t[0]=m=>d.redirectTo())},{default:i(()=>[f1]),_:1})):w("",!0)]),_:1})]),_:1}),e.getNFCUrl?(r(),f(h,{key:0,large:"",onClick:t[1]||(t[1]=m=>d.copyNFC())},{default:i(()=>[g1]),_:1})):w("",!0)]),_:1}),o("h3",null,p(`${l.id} : ${l.index} : ${l.privateCode}`),1)]),_:1})}var b1=N(m1,[["render",v1]]),C1=[{path:"/",component:ht},{path:"/sample",component:He},{path:"/u/:id/t/:access_token",component:hs},{path:"/sale/:id/p/:privateCode",component:hr},{path:"/op/:id/p/:privateCode",component:kc},{path:"/qrmemberscan",component:Le},{path:"/setup/:id/p/:privateCode",component:zr},{path:"/admin/:id/p/:privateCode",component:nc},{path:"/pack/:packageId/p/:privateCode",component:xd},{path:"/m/:id/i/:index/p/:privateCode",component:tr},{path:"/setup-card/:id/p/:privateCode",component:Of},{path:"/edit-card/:id/p/:privateCode",component:Ve},{path:"/n/:id/p/:privateCode",component:ae,options:{props:{accessType:"SCAN",index:0}}},{path:"/n/:id/p/:privateCode/i/:index",component:ae,options:{props:{accessType:"SCAN"}}},{path:"/nfc/:id/p/:privateCode",component:ae,options:{props:{accessType:"NFC"}}},{path:"/url/:id/p/:privateCode",component:ae,options:{props:{accessType:"URL"}}},{path:"/link/:id/p/:privateCode",component:ae,options:{props:{accessType:"LINK"}}},{path:"/nfc/:id/p/:privateCode",component:ae,options:{props:{accessType:"NFC"}}},{path:"/id/:id/i/:index/p/:privateCode",component:re,options:{props:{accessType:"SCAN"}}},{path:"/infc/:id/i/:index/p/:privateCode",component:re,options:{props:{accessType:"NFC"}}},{path:"/id-url/:id/i/:index/p/:privateCode",component:re,options:{props:{accessType:"URL"}}},{path:"/id-edit/:id/p/:privateCode",component:re,options:{props:{isView:!1,index:"-1",accessType:"SCAN"}}},{path:"/idoc/:id/i/:index/p/:privateCode",component:b1,options:{props:{accessType:"NFC"}}},{path:"/d/:id/p/:privateCode",component:yi},{path:"/l/:id/p/:privateCode",component:ba},{path:"/p/:id/p/:privateCode",component:Ea},{path:"/pb/:id/p/:privateCode",component:Da},{path:"/a/:id/p/:privateCode",component:Ga},{path:"/login/",component:ps},{path:"(.*)",component:Dt}];const y1={setup(){const e={name:"QRCare.vn",theme:"auto",version:"1.2.3",view:{browserHistory:!0},store:Z,routes:C1},t=ce(""),l=ce(""),u=()=>{U.dialog.alert("Username: "+t.value+"<br>Password: "+l.value,()=>{U.loginScreen.close()})};return Xe(()=>{Je(()=>{})}),{f7params:e,username:t,password:l,alertLoginData:u}}},E1=c("Right panel content goes here"),k1=c("Close"),w1=o("p",null,"Popup content goes here.",-1),A1=c("Login"),D1=c("quet"),T1=c(" Some text about login information."),I1=o("br",null,null,-1),$1=c('Click "Sign In" to close Login Screen ');function U1(e,t,l,u,a,d){const h=s("f7-navbar"),g=s("f7-block"),v=s("f7-page"),_=s("f7-view"),E=s("f7-panel"),m=s("f7-link"),y=s("f7-nav-right"),C=s("f7-popup"),A=s("f7-login-screen-title"),k=s("f7-button"),$=s("f7-list-input"),x=s("f7-list"),T=s("f7-list-button"),D=s("f7-block-footer"),B=s("f7-login-screen"),Q=s("f7-app");return r(),f(Q,et(tt(u.f7params)),{default:i(()=>[n(E,{right:"",reveal:"","theme-dark":""},{default:i(()=>[n(_,null,{default:i(()=>[n(v,null,{default:i(()=>[n(h,{title:"Right Panel"}),n(g,null,{default:i(()=>[E1]),_:1})]),_:1})]),_:1})]),_:1}),n(_,{main:"",class:"safe-areas",url:"/"}),n(C,{id:"my-popup"},{default:i(()=>[n(_,null,{default:i(()=>[n(v,null,{default:i(()=>[n(h,{title:"Popup"},{default:i(()=>[n(y,null,{default:i(()=>[n(m,{"popup-close":""},{default:i(()=>[k1]),_:1})]),_:1})]),_:1}),n(g,null,{default:i(()=>[w1]),_:1})]),_:1})]),_:1})]),_:1}),n(B,{id:"my-login-screen"},{default:i(()=>[n(_,null,{default:i(()=>[n(v,{"login-screen":""},{default:i(()=>[n(A,null,{default:i(()=>[A1]),_:1}),n(k,{href:"/login/"},{default:i(()=>[D1]),_:1}),n(x,{form:""},{default:i(()=>[n($,{type:"text",name:"username",placeholder:"Your username",value:u.username,"onUpdate:value":t[0]||(t[0]=S=>u.username=S)},null,8,["value"]),n($,{type:"password",name:"password",placeholder:"Your password",value:u.password,"onUpdate:value":t[1]||(t[1]=S=>u.password=S)},null,8,["value"])]),_:1}),n(x,null,{default:i(()=>[n(T,{title:"Sign In",onClick:u.alertLoginData},null,8,["onClick"]),n(D,null,{default:i(()=>[T1,I1,$1]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},16)}var x1=N(y1,[["render",U1]]),R=De.create({baseURL:O.BASE_URL,headers:{"content-type":"application/json"}});let ie={getDeviceId(){let e=localStorage.getItem("qrcareId");return e||(e=U.utils.id(),localStorage.setItem("qrcareId",e)),e},getDeviceOS(){let e=Ee();return{os:e.os,osVersion:e.osVersion||"1.0"}},getAction(e,t,l="QRCODE",u=""){return{qrid:e,privateCode:t,type:l,time:new Date().toISOString(),deviceId:this.getDeviceId(),deviceInfo:this.getDeviceOS(),note:u}},getFilename(e){if(e){var t=e.toString().match(/.*\/(.+?)\./);if(t&&t.length>1)return t[1]}return""},getIcon(e){let t={facebook:"logo_facebook",tiktok:"link_circle",skype:"link_circle",linkedIn:"logo_linkedin",twitter:"link_circle",momo:"link_circle",qrcare:"link_circle"};for(const l in t)if(l==e)return t[l];return""},blobCreationFromURL(e){const t=e.split(","),l=t[0].indexOf("base64")>=0?atob(t[1]):decodeURI(t[1]),u=t[0].split(":")[1].split(";")[0],a=new Uint8Array(l.length);for(let d=0;d<l.length;d++)a[d]=l.charCodeAt(d);return new Blob([a],{type:u})},getActivityName(e){let t="";return e.type==="ACTIVITY.QR_REQUEST"&&(t+="Y\xEAu c\u1EA7u",e.status=="CREATED"&&(t+=" \u0111\xE3 g\u1EEDi")),e.type==="ACTIVITY.QRTASK"&&(t+="C\xF4ng vi\u1EC7c",e.status=="CREATED"&&(t+=" \u0111\xE3 g\u1EEDi"),e.status=="CONFIRMED"&&(t="Kh\xE1ch h\xE0ng x\xE1c nh\u1EADn"),e.status=="REJECTED"&&(t="Kh\xE1ch h\xE0ng t\u1EEB ch\u1ED1i")),e.type==="ACTIVITY.QRNOTE"&&(t+="Ghi ch\xFA",e.status=="CREATED"&&(t+=" \u0111\xE3 g\u1EEDi")),e.type==="ACTIVITY.QRDelivery"&&(t+="B\xE0n giao",e.status=="CREATED"&&(t+=" \u0111\xE3 g\u1EEDi"),e.status=="CONFIRMED"&&(t+="Kh\xE1ch h\xE0ng x\xE1c nh\u1EADn"),e.status=="REJECTED"&&(t+="Kh\xE1ch h\xE0ng t\u1EEB ch\u1ED1i")),t},getActivityColor(e){if(e.type==="ACTIVITY.QR_REQUEST")return"item-title text-color-orange";if(e.type==="ACTIVITY.QRTASK"){if(e.status==="CONFIRMED")return"item-title text-color-green";if(e.status==="CREATED")return"item-title text-color-blue"}return e.type==="ACTIVITY.QRNOTE"?"item-title text-color-blue":"item-title text-color-black"},firstImage(e){return e[0]?e[0]:"https://apps.vinaas.com/file/sBsN149Dh"},getFilter(e=null){return e||{skip:0,limit:10}},list_qrid(e,t,l){let u=[];if(t>=0&&l>0){for(var a=t;a<=l;a++)if(!(a>=1e4)){var d=e*1e4+a;u.push(d)}}return u},qrid_index(e){try{let l=e.toString().slice(11);var t=parseInt(l);return t}catch(l){return-1}},qrid_package(e){try{let l=e.toString().slice(0,11);var t=parseInt(l);return t}catch(l){return-1}},qrid_setup(e){return e>0?this.qrid_package(e)*1e4+9901:0},is_setup(e){if(e>0)return e%1e4>9900},formatQRID(e){return e.toString().slice(0,11)+"."+e.toString().slice(11)},formatDate(e){if(e)return me(new Date(e),"dd-MM-yyyy")},formatDistanceToNow(e){if(e)return Te(new Date(e),{includeSeconds:!0,addSuffix:!0,locale:fe})},formatDistance(e,t){if(e&&t)return nt(new Date(e),new Date(t),{includeSeconds:!0,locale:fe})},formatDateTime(e){return e?me(new Date(e),"dd-MM-yyyy hh:mm"):""},formatMoney(e){return e>0?new Intl.NumberFormat("de-DE",{style:"currency",currency:"VND"}).format(e):""},clickCall(e){console.log("clickCall",e),e&&(window.location="tel:"+e)},clickLink(e){console.log("link",e),window.open(e)},clickMail(e){console.log("mailto",e),e&&(window.location="mailto:"+e)},actionText(e){return e=="SCAN"?"Qu\xE9t QRCode":e=="NFC"?"Ch\u1EA1m NFC":e=="CALL"?"B\u1EA5m g\u1ECDi \u0111i\u1EC7n":e=="EMAIL"?"Click Email":e=="CONTACT"?"L\u01B0u danh b\u1EA1":e=="PAID"?"\u0110\xE3 mua":e=="CONFIRMED"?"\u0110\xE3 x\xE1c nh\u1EADn":e=="ACTIVE"?"\u0110\xE3 k\xEDch ho\u1EA1t":e},actionIcon(e){if(e=="SCAN")return"qrcode";if(e=="NFC")return"/assets/nfc.png";if(e=="CLICK")return"/assets/touch.png";if(e=="LINK"||e=="URI")return"link_circle";if(e=="CALL")return"phone_arrow_down_left";if(e=="EMAIL")return"envelope";if(e=="CONTACT")return"person_crop_circle"},getLogoOS(e){return e=="macos"?"device_desktop":e=="ios"?"logo_apple":e=="android"?"logo_android":e=="windows"?"logo_windows":e},actionMessage(e,t){const l=Te(new Date(t),{includeSeconds:!0,addSuffix:!0,locale:fe});return`${this.actionText(e)} ${l}, l\xFAc ${me(new Date(t),"hh:mm:ss.aaa")}`},isOrganization(e){return e.ownerOrganizationId>0},notGenerated(e){return e=="NOT_GENERATED"},async onFile(e,t="istand"){const{file:l,fileContent:u}=e;try{var a=this.dataURItoBlob(u);const d=new FormData;d.append("canvasImage",a);let h="https://media.vinaas.com/upload/"+t;const{data:g}=await R.post(h,d,{headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"}});if(g&&g.id)return"https://apps.vinaas.com/file/"+g.id}catch(d){console.log("err",d)}finally{}},dataURItoBlob(e){var t;e.split(",")[0].indexOf("base64")>=0?t=atob(e.split(",")[1]):t=unescape(e.split(",")[1]);for(var l=e.split(",")[0].split(":")[1].split(";")[0],u=new Uint8Array(t.length),a=0;a<t.length;a++)u[a]=t.charCodeAt(a);return new Blob([u],{type:l})}},S1={async confirmQRTask(e){e.status="CONFIRMED",e.modified=new Date().toISOString(),!!e.id},async confirmQRDelivery(e){},async createQRFeedback(e){return e.type="ACTIVITY.QR_FEEDBACK",await this.createRequest(e)},async createQRRequest(e){return e.type="ACTIVITY.QR_REQUEST",await this.createRequest(e)},async createSupplierRequest(e){return e.type="ACTIVITY.SUPPLIER_REQUEST",await this.createRequest(e)},async createQRcareRequest(e){return e.type="ACTIVITY.QRCARE_REQUEST",await this.createRequest(e)},async createQRCall(e){return e.type="ACTIVITY.QRCALL",await this.createRequest(e)},async createNote(e){},async createRequest(e){return e.created=new Date().toUTCString(),e.status="CREATED",R.defaults.baseURL=O.BASE_URL,(await R.post("/QRActivities",e)).data||{}},async getCardActivity(e){return(await R.get("/QRActivities/"+e)).data||{}},async getVcard(e,t){return(await R.get(`/QRIDs/vCard?qrid=${e}&privateCode=${t}`)).data||{}},async activeQRMember(e,t){try{R.defaults.baseURL=O.BASE_URL,t.status="QRID_STATUS.ACTIVE",t.modified=new Date;var l=await R.patch("/QRIDs/"+e,t);return!0}catch(u){return!1}},async activeQRLoyalty(e,t){try{R.defaults.baseURL=O.BASE_URL,t.status="ACTIVE",t.modified=new Date;var l=await R.patch("/QRIDs/"+e,t);return!0}catch(u){return!1}},async getQRID(e,t){try{R.defaults.baseURL=O.BASE_URL;var l=await R.get("QRIDs/"+e);return l.data}catch(u){console.log("error",u)}},async iCheck(e,t,l,u="SCAN"){try{let d=ie.getDeviceId(),h=ie.getDeviceOS();R.defaults.baseURL=O.BASE_URL;let g={accessType:u,deviceCode:d,os:h.os,osVersion:h.osVersion};var a=await R.get("QRIDs/iCheck",{params:{id:parseInt(e),index:t,privateCode:l,data:g}});return console.log("iCheck()",a.data),a.data}catch(d){console.log("error",d)}},async getIDocument(e,t,l){try{R.defaults.baseURL=O.BASE_URL;var u=await R.get("QRIDs/iDocument",{params:{id:parseInt(e),index:t,privateCode:l}});return u.data}catch(a){console.log("error",a)}},async verifyCard(e,t){try{R.defaults.baseURL=O.BASE_URL;var l=await R.get(`QRIDs/verify?id=${e}&privateCode=${t}`);return l.data}catch(u){console.log("error",u)}},async initCard(e,t,l){try{let a=parseInt(e);R.defaults.baseURL=O.BASE_URL;var u=await R.post("QRIDs/initCard",{id:a,privateCode:t,data:l});return u.data}catch(a){console.log("error",a)}},async updateCard(e,t,l){try{R.defaults.baseURL=O.BASE_URL,l.modified=new Date().toISOString();var u=await R.patch("QRIDs/"+e,l);return u.data}catch(a){console.log("error",a)}},async activeCard(e,t,l){try{R.defaults.baseURL=O.BASE_URL;var u=await R.post("QRIDs/activeCard",{id:e,privateCode:t,data:l});return u.data}catch(a){return!1}},async getCardHistory(e,t,l={limit:10}){try{R.defaults.baseURL=O.BASE_URL;var u=await R.get("QRIDs/"+e+"/history",{params:{filter:l}});return u.data}catch(a){console.log("error",a)}},async getRecentActivity(e,t,l={limit:10}){try{R.defaults.baseURL=O.BASE_URL;var u=await R.get(`/QRIDs/recentActivity?qrid=${e}&privateCode=${t}`);return u.data}catch(a){console.log("error",a)}},async getQRCustomerBySale(e,t){try{R.defaults.baseURL=O.BASE_URL;var l=await R.get(`QRIDs/getQRCustomers?qrid=${e}&privateCode=${t}`);return console.log("getQRCustomerBySale",e,l.data),l.data}catch(u){console.log("error",u)}},async getQRCustomers(e,t){try{R.defaults.baseURL=O.BASE_URL;var l=await R.get("People",{params:{filter:{where:{qrid:e},fields:["qrUrl","name","info","qrid","status","modified"],limit:20,order:"modified desc"}}});return console.log("getQRCustomerBySale",e,l.data),l.data}catch(u){console.log("error",u)}},async scanQRCustomer(e,t,l){try{R.defaults.baseURL=O.BASE_URL;var u=await R.get(`People/scanQRCustomer?qrid=${e}&index=${t}&privateCode=${l}`);return u.data}catch(a){console.log("error",a)}},async PersonAction(e,t,l="SCAN",u=-1,a=null){let d=ie.getDeviceId(),h=ie.getDeviceOS();a?(a.os=h.os,a.osVersion=h.osVersion):a=h;let g=parseInt(e),v=parseInt(u),_={qrid:g,privateCode:t,deviceCode:d,type:l,userIndex:v,data:a};try{console.log("record",_),R.defaults.baseURL=O.BASE_URL;var E=await R.post("UserActions/addAction",_);return console.log(E.data),E.data}catch(m){console.log("error",m)}},async UserActionHistory(e,t){let l=parseInt(e);try{R.defaults.baseURL=O.BASE_URL;var u=await R.get("UserActions/actionHistory/",{params:{qrid:l,privateCode:t}});return u.data}catch(a){return console.log("error",a),null}},async UserDeviceAction(e,t,l){let u=parseInt(e);try{R.defaults.baseURL=O.BASE_URL;var a=await R.get("UserActions/actionDevice/",{params:{qrid:u,privateCode:t,deviceId:l}});return console.log(a.data),a.data}catch(d){return console.log("error",d),null}},async updateUserInfo(e,t,l,u){try{R.defaults.baseURL=O.BASE_URL;let d=parseInt(e);var a=await R.post("UserActions/updateUserInfo",{qrid:d,privateCode:t,deviceId:l,userInfo:u});return a.data}catch(d){return console.log("error",d),null}},async OwnerAction(e,t,l="CHECK_SCAN",u=null,a=0){let d=ie.getDeviceId();u||(u=ie.getDeviceOS());let g={qrid:parseInt(e),privateCode:t,deviceCode:d,type:l,data:u};try{R.defaults.baseURL=O.BASE_URL;var v=await R.post("QRIDs/addAction",g);return console.log(v.data),v.data}catch(_){console.log("error",_)}},async getQRIDsOfSetup(e,t){try{let u=parseInt(e);R.defaults.baseURL=O.BASE_URL;var l=await R.get("QRIDs/manageQRIDs",{params:{qrid:u,privateCode:t}});return l.data}catch(u){return console.log("error",u),null}},async getQRCustomer(e){try{R.defaults.baseURL=O.BASE_URL;var t=await R.get(`People/${e}`);return t.data}catch(l){return console.log("error",l),null}},async updateQRCustomer(e,t){try{R.defaults.baseURL=O.BASE_URL;var l=await R.patch(`People/${e}`,t);return l.data}catch(u){console.log("error",u)}},async updateQRSaleInfo(e,t,l){try{R.defaults.baseURL=O.BASE_URL,t.modified=new Date().toISOString(),console.log("patchQRSale()",e,t);var u=await R.patch("QRIDs/"+e,t);return u.data}catch(a){console.log("error",a)}},async updateISale(e,t,l){try{R.defaults.baseURL=O.BASE_URL,l.modified=new Date().toISOString();var u=await R.patch("QRIDs/"+e,l);return u.data}catch(a){console.log("error",a)}},async getLifecycle(e,t){try{let u=parseInt(e);R.defaults.baseURL=O.BASE_URL;var l=await R.get("QRIDs/getLifecycle",{params:{qrid:u,privateCode:t}});return l.data}catch(u){console.log("error",u)}},async getProjectSummary(e,t){try{R.defaults.baseURL=O.BASE_URL;var l=await R.get("QRPackages/summary",{params:{packageId:e,privateCode:t}});return l.data}catch(u){console.log("error",u)}},async getPrivateCode(e,t,l){try{R.defaults.baseURL=O.BASE_URL;var u=await R.get("QRIDs/getPrivateCode",{params:{qrid:e,index:t,privateCode:l}});return u.data}catch(a){console.log("error",a)}},async getQRList(e,t){try{R.defaults.baseURL=O.BASE_URL;var l=await R.get(`QRPackages/${e}/qridlist`,{params:{filter:{where:{status:"QRID_STATUS.ACTIVE"},order:"id desc"}}});return l.data}catch(u){console.log("error",u)}}};it.use(ot);const se=at(x1);se.config.globalProperties.$axios=De;se.config.globalProperties.$utils=ie;se.config.globalProperties.$api=S1;se.config.globalProperties.$mode=location.host;st(se);se.mount("#app");
